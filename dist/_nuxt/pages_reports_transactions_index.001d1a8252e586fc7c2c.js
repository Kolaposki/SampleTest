webpackJsonp([47],{D7kj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("dSJF"),r=a("eafj"),o=!1;var i=function(t){o||a("l1vH")},n=a("VU/8")(s.a,r.a,!1,i,"data-v-436ff921",null);n.options.__file="pages/reports/transactions/index.vue",e.default=n.exports},awBG:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".table-content.large-content[data-v-436ff921]{width:2500px}",""])},dSJF:function(t,e,a){"use strict";e.a={layout:"main",computed:{filteredList:function(){var t=this;return this.reports.filter(function(e){return e.riderfirstname.toLowerCase().includes(t.search.toLowerCase())?e.riderfirstname.toLowerCase().includes(t.search.toLowerCase()):e.riderlastname.toLowerCase().includes(t.search.toLowerCase())?e.riderlastname.toLowerCase().includes(t.search.toLowerCase()):e.riderusername.toLowerCase().includes(t.search.toLowerCase())})},json_fields:function(){var t=this,e=(this.$moment,this);return{"Request Date":{callback:function(e){return t.$moment(e.created_at).format("Do MMM, YYYY")}},"Order Source":"source","User ID":"customerID","Order Match Date":{callback:function(e){return t.$moment(e.assigntime).format("Do MMM, YYYY")}},"Rider ID":"riderID","User Location":"address","Rider's City of Operation":"branchcity","Pickup Date":{callback:function(e){return t.$moment(e.pickuptime).format("Do MMM, YYYY")}},"Mode of Payment":"paymentmethod",Amount:{field:"ordertotal",callback:function(t){return e.formatPrice(t)}},"Order Completion Time":{callback:function(e){return t.$moment(e.completiontime).format("Do MMM, YYYY")}},"Commission Rate":"commissionrate","Order Status":"orderstatus","Order No":"ordercode","User Rating":"userating","User Feedback":"userfeedback"}}},data:function(){return{loading:!0,formData:{merchID:"",startdate:"",enddate:"",branchID:""},date:"",reports:[],search:"",api:"usersreport/getTransactions",headers:{Next:"",Prev:"",Count:0,total:0,pagenum:1}}},methods:{formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getRiderReport:function(){var t=this;this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate="");this.formData.export="",this.$store.dispatch("usersreport/getTransactions",this.formData).then(function(e){if(e.data.status)return t.reports=e.data.data,t.setHeaders(e.data.data,e.data.headers),void(t.loading=!1);t.loading=!1,t.$toast.error("An error occurred")}).catch(function(e){t.loading=!1,t.$toast.error("An error occurred!")})},nextData:function(){if(""!==this.headers.Next){var t=+this.formData.page+1;this.formData.page=t,this.getRiderReport()}},previousData:function(){if(""!==this.headers.Previous){var t=+this.formData.page-1;t<0?this.formData.page=1:(this.formData.page=t,this.getRiderReport())}},viewOrderDetails:function(t){localStorage.removeItem("riderHistory"),this.$store.dispatch("usersreport/setRiderHistory",t),this.$router.push("/reports/users/rider/history")}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.formData.branchID="",this.getRiderReport()}}},eafj:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),a("div",{staticClass:"search-filter d-flx-alc-jfe"},[a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),a("div",{staticClass:"drop-down page-drop"},[a("date-picker",{attrs:{range:"",placeholder:"Date Range",type:"datetime",timeTitleFormat:"YYYY-MM-DD hh:mm a",format:"YYYY-MM-DD hh:mm a","value-type":"format","show-second":!1,"show-time-panel":t.showTimeRangePanel},on:{change:t.getRiderReport,close:t.handleRangeClose},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"mx-btn mx-btn-text",on:{click:t.toggleTimeRangePanel}},[t._v("\n\t\t\t\t\t"+t._s(t.showTimeRangePanel?"select date":"select time")+"\n\t\t\t\t")])]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",fetch:t.fetchData,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:"source-of-truth-transactions-report.xls"}},[t._v("\n          Export\n        ")])],1)],1),a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("div",{staticClass:"drop-down page-drop"},[a("button",{staticClass:"btn-text ",attrs:{type:"button"}},[t._v("\n          Showing "),a("span",[t._v(" "+t._s(t.showing)+" ")]),t._v(" of "),a("span",[t._v(" "+t._s(void 0!=this.headers.Count?this.headers.Count:0)+" ")])])]),a("div",{staticClass:"d-flx-alc"},[a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.previousData}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-right"}})])]),a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.nextData}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-left"}})])])])]),a("div",{staticClass:"inner-main-wrapper"},[a("overlay-scrollbars",{staticClass:"table-wrapper no-deco"},[a("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),a("table",{staticClass:"table-content large-content"},[a("thead",{},[a("tr",[a("th",{staticClass:"large-space column-name"},[t._v("S/N")]),a("th",{staticClass:"large-space column-name"},[t._v("Request Date")]),a("th",{staticClass:" large-space column-name"},[t._v("Order Source")]),a("th",{staticClass:"large-space"},[t._v("User ID")]),a("th",{staticClass:"large-space"},[t._v("order Match Date")]),a("th",{staticClass:"large-space"},[t._v("Rider ID")]),a("th",{staticClass:"large-space"},[t._v("User Location")]),a("th",{staticClass:"large-space"},[t._v("Rider's City of Operation")]),a("th",{staticClass:"large-space"},[t._v("Pickup Date")]),a("th",{staticClass:"large-space"},[t._v("Mode of Payment")]),a("th",{staticClass:"large-space"},[t._v("Amount (â‚¦)")]),a("th",{staticClass:"large-space"},[t._v("Order Completion Date")]),a("th",{staticClass:"large-space"},[t._v("Commission Rate (%)")]),a("th",{staticClass:"large-space"},[t._v("Order Status")]),a("th",{staticClass:"large-space"},[t._v("Order No")]),a("th",{staticClass:"large-space"},[t._v("User Rating")]),a("th",{staticClass:"large-space"},[t._v("User Feedback")])])]),a("tbody",{staticClass:"tablebody"},[t.loading?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.reports.length<1?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("No record at the moment")])]):t._e(),t._l(t.reports,function(e,s){return!t.loading&&t.reports.length>0?a("tr",{key:s,staticClass:"link"},[a("td",{staticClass:"column-name"},[a("span",{staticClass:"column-name"},[t._v("1")])]),a("td",{staticClass:"column-name",staticStyle:{color:"#28A745"}},[t._v(t._s(e.created_at?t.$moment(e.created_at).format("MMM Do YY, h:mm a"):"N/A"))]),a("td",{staticClass:"column-name"},[t._v(t._s(e.source?e.source:"N/A"))]),a("td",[t._v(t._s(e.customerID?e.customerID:"N/A"))]),a("td",[t._v(t._s(e.assigntime?t.$moment(e.assigntime).format("MMM Do YY, h:mm a"):"N/A")+" ")]),a("td",[t._v(t._s(e.riderID?e.riderID:"N/A"))]),a("td",[t._v(t._s(e.address?e.address:"N/A"))]),a("td",[t._v(t._s(e.branchcity?e.branchcity:"N/A"))]),a("td",[t._v(t._s(e.pickuptime?t.$moment(e.pickuptime).format("MMM Do YY, h:mm a"):"N/A"))]),a("td",[t._v(t._s(e.paymentmethod?e.paymentmethod:"N/A"))]),a("td",[t._v(t._s(e.ordertotal?t.formatPrice(e.ordertotal):"N/A"))]),a("td",[t._v(t._s(e.completiontime?t.$moment(e.completiontime).format("MMM Do YY, h:mm a"):"N/A"))]),a("td",[t._v(t._s(e.commissionrate?e.commissionrate:"N/A"))]),a("td",[t._v(t._s(e.orderstatus?e.orderstatus:"N/A"))]),a("td",[t._v(t._s(e.ordercode?e.ordercode:"N/A"))]),a("td",[t._v(t._s(e.userrating?e.userrating:"N/A"))]),a("td",[t._v(t._s(e.userfeedback?e.userfeedback:"N/A"))])]):t._e()})],2)])])],1)])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};e.a=r},l1vH:function(t,e,a){var s=a("awBG");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("52ed6529",s,!1,{sourceMap:!1})}});