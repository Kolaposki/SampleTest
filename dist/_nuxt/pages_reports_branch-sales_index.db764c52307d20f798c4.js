webpackJsonp([39],{"2T0/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("IyA1"),r=e("7YfR"),n=e("VU/8")(s.a,r.a,!1,null,null,null);n.options.__file="pages/reports/branch-sales/index.vue",a.default=n.exports},"7YfR":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("div",{staticClass:"d-flx-alc-jsb page-extras"},[e("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#back"}})]),e("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),e("div",{staticClass:"search-filter d-flx-alc-jfe"},[e("div",{staticClass:"drop-down filter-drop"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.branchID,expression:"formData.branchID"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"branchID",a.target.multiple?e:e[0])},function(a){return t.getReport("branchID")}]}},[e("option",{attrs:{value:""}},[t._v("All Branches")]),t._l(t.branches,function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v("\n              "+t._s(a.branchname)+"\n            ")])})],2)]),e("div",{staticClass:"drop-down date-drop"},[e("date-picker",{attrs:{type:"datetime",range:"",placeholder:"Date Range",timeTitleFormat:"YYYY-MM-DD hh:mm a",format:"YYYY-MM-DD hh:mm a","value-type":"format","show-second":!1,"show-time-panel":t.showTimeRangePanel},on:{change:t.getReport,close:t.handleRangeClose},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"mx-btn mx-btn-text",on:{click:t.toggleTimeRangePanel}},[t._v("\n\t\t\t\t\t"+t._s(t.showTimeRangePanel?"select date":"select time")+"\n\t\t\t\t")])]},proxy:!0}]),model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),e("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",fetch:t.fetchData,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:"branch_sales_report.xls"}},[t._v("\n          Export\n        ")])],1)],1),e("pagination",{attrs:{headers:t.headers,date:t.date},on:{go:t.getReport},model:{value:t.formData.page,callback:function(a){t.$set(t.formData,"page",a)},expression:"formData.page"}}),e("div",{staticClass:"inner-main-wrapper"},[e("overlay-scrollbars",{staticClass:"table-wrapper"},[e("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),e("table",{staticClass:"table-content"},[e("thead",{},[e("tr",[e("th",{staticClass:"medium-space column-name"},[t._v("Start Date")]),e("th",{staticClass:"medium-space column-name"},[t._v("End Date")]),e("th",{staticClass:"medium-space column-name"},[t._v("Store/ Branch")]),e("th",{staticClass:"medium-space"},[t._v("Sales Amount(â‚¦)")]),e("th",{staticClass:"medium-space"},[t._v("Customer/Sales Count")])])]),e("tbody",{staticClass:"tablebody"},[t.loading?e("tr",[e("td",{attrs:{colspan:"10"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?e("tr",[e("td",{attrs:{colspan:"10"}},[t._v("No record at the moment")])]):t._e(),t._l(t.filteredList,function(a,s){return!t.loading&&t.filteredList.length>0?e("tr",{key:s},[e("td",{directives:[{name:"show",rawName:"v-show",value:a.date,expression:"row.date"}],staticClass:"column-name"},[t._v("\n\t\t\t\t"+t._s(t.$moment(a.date).format("Do MMM, YYYY"))+"\n\t\t\t  ")]),e("td",{directives:[{name:"show",rawName:"v-show",value:a.date,expression:"row.date"}],staticClass:"column-name"},[t._v("\n\t\t\t\t"+t._s(t.$moment(a.date).format("Do MMM, YYYY"))+"\n\t\t\t  ")]),e("td",{directives:[{name:"show",rawName:"v-show",value:!a.date,expression:"!row.date"}],staticClass:"column-name"},[t._v("\n\t\t\t\t"+t._s(t.$moment(a.start_date).format("Do MMM, YYYY HH:mm"))+" \n\t\t\t  ")]),e("td",{directives:[{name:"show",rawName:"v-show",value:!a.date,expression:"!row.date"}],staticClass:"column-name"},[t._v("\n\t\t\t\t"+t._s(t.$moment(a.end_date).format("Do MMM, YYYY HH:mm"))+"\n\t\t\t  ")]),e("td",{staticClass:"column-name"},[t._v(t._s(a.branchname))]),e("td",[t._v(t._s(t.formatPrice(a.ordertotal)))]),e("td",[t._v(t._s(a.totalcustomer))])]):t._e()})],2)])])],1)],1)};s._withStripped=!0;var r={render:s,staticRenderFns:[]};a.a=r},IyA1:function(t,a,e){"use strict";var s=e("mvHQ"),r=e.n(s),n=e("hYtS");a.a={components:{Pagination:n.a},layout:"main",computed:{filteredList:function(){return this.reports},json_fields:function(){var t=this,a=this;return{DATE:{callback:function(a){return a.date?t.$moment(a.date).format("Do MMM, YYYY"):t.$moment(a.start_date).format("Do MMM, YYYY HH:mm")+" - "+t.$moment(a.end_date).format("Do MMM, YYYY HH:mm")}},AREA:"branchcity","STORE/ BRANCH":"branchname",AMOUNT:{field:"ordertotal",callback:function(t){return a.formatPrice(t)}},"CUSTOMER COUNT":{field:"totalcustomer",callback:function(t){return a.formatPrice(t)}}}}},data:function(){return{loading:!0,search:"",result:"",start_date:"",end_date:"",reports:[],branches:[],date:"",formData:{merchID:"",branchID:"",startdate:"",enddate:"",page:1},headers:{Next:"",Prev:"",Count:0,total:0,pagenum:1},api:"salesreport/getBranchSales"}},methods:{formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getReport:function(t){var a=this;void 0!=t&&"branchID"==t&&(this.formData.page=1),this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD HH:MM:SS"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD HH:MM:SS")):(this.formData.startdate="",this.formData.enddate="");this.formData.export="",this.$store.dispatch("salesreport/getBranchSales",this.new_data).then(function(t){if(t.data.status)return a.reports=t.data.data,a.setHeaders(t.data.data,t.data.headers),void(a.loading=!1);a.loading=!1,a.$toast.error("An error occurred")}).catch(function(t){a.loading=!1,a.$toast.error("An error occurred "+t)})},nextData:function(){if(""!==this.headers.Next){var t=+this.formData.page+1;this.formData.page=t,this.getReport()}},previousData:function(){if(""!==this.headers.Prev){var t=+this.formData.page-1;t<0?this.formData.page=1:(this.formData.page=t,this.getReport())}},listBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(a){t.branches=a.data.data}).catch(function(t){console.log(t)})},orderDetails:function(t){var a={merchID:this.user.id,branchID:t.branchID,page:1,startdate:"",enddate:""};t.date?(this.data.startdate=this.$moment(t.date).format("YYYY-MM-DD"),this.data.enddate=this.$moment(t.date).add(1,"days").format("YYYY-MM-DD")):(this.data.startdate=this.$moment(t.start_date).format("YYYY-MM-DD"),this.data.enddate=this.$moment(t.end_date).format("YYYY-MM-DD")),localStorage.removeItem("formData"),localStorage.setItem("formData",r()(a)),this.$router.push("/reports/all-sales/")}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getReport(),this.listBranches()}}},M2Sb:function(t,a,e){"use strict";a.a={layout:"main",props:["headers","value","date"],methods:{previous:function(){if(""!==this.headers.Prev){var t=+this.value-1;t<0?t=1:(this.$emit("input",t),this.$emit("go"))}},next:function(){if(""!==this.headers.Next){var t=+this.value+1;this.$emit("input",t),this.$emit("go")}}}}},hYtS:function(t,a,e){"use strict";var s=e("M2Sb"),r=e("zTfd"),n=e("VU/8")(s.a,r.a,!1,null,null,null);n.options.__file="components/Pagination.vue",a.a=n.exports},zTfd:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flx-alc-jsb page-extras"},[e("div",{staticClass:"drop-down page-drop"},[e("button",{staticClass:"btn-text ",attrs:{type:"button"}},[t._v("\n          Showing "),e("span",[t._v(" "+t._s(t.showing)+" ")]),t._v(" of "),e("span",[t._v(" "+t._s(void 0!=this.headers.Count?this.headers.Count:0)+" ")])])]),e("div",{staticClass:"d-flx-alc"},[t.date&&"object"==typeof t.date?e("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date[0])+" - "+t._s(t.date[1]))]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:"string"==typeof t.date,expression:"typeof date == 'string'"}],staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date)+" ")]),e("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.previous}},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#arrow-right"}})])]),e("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.next}},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#arrow-left"}})])])])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};a.a=r}});