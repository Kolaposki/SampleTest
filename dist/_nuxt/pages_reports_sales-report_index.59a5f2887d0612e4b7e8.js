webpackJsonp([3],{GMH1:function(t,e,a){"use strict";(function(t){e.a={layout:"main",data:function(){return{orderList:{},orderDetailsData:{items:[],tax:0,id:"",orderid:"",orderstatus:"",customername:"",customerphone:"",deliveryaddress:"",profilelink:"",discountpayment:0,ordertotal:0,deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:"",photo:""},staff:{photo:"",name:"",phone:""}},formData:{orderID:"",orderstatus:"cancel",reason:""}}},methods:{copyLink:function(t){var e=this;this.$copyText(t).then(function(t){e.$toast.success("Pick-up code copied to clipboard")},function(t){e.$toast.error("An error occurred.Cannot copy.")})},clearOrderDetails:function(){this.orderDetailsData={items:[],orderid:"",orderstatus:"",tax:0,customername:"",customerphone:"",deliveryaddress:"",discountpayment:0,ordertotal:0,profilelink:"",deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:""},staff:{name:"",photo:"",phone:""}}},orderDetails:function(e){this.clearOrderDetails(),this.orderList=e,this.orderDetailsData={items:e.orderitems,orderid:e.ordercode,id:e.id,vat:e.vat,paymentdetails:e.paymentdetails,tax:0,orderstatus:e.orderstatus,customername:e.sendername,customerphone:e.sendernumber,deliveryaddress:e.address,discountpayment:e.discountpayment,ordertotal:e.ordertotal,profilelink:e.profilelink,deliverycharge:e.deliverycharge,rider:{id:e.riderID,name:e.riderfirstname+" "+e.riderlastname,phone:e.riderphonenumber,regnumber:e.registrationnumber,photo:e.riderphoto},staff:{name:e.staffname,photo:e.staffpic}},this.formData.orderID=e.id,t("#order-details").addClass("uk-open").show()},setOrder:function(t){this.orderDetails(t)},calculateSubTotal:function(t){var e=0;return t.forEach(function(t,a,r){e+=t.totalprice}),e},calculateTotal:function(t){var e=0;t.forEach(function(t,a,r){e+=t.totalprice});var a=0;return this.orderDetailsData.tax>0&&(a=this.orderDetailsData.tax/100*e),+e+ +a+ +this.orderDetailsData.deliverycharge},closeOrderDetails:function(){this.clearOrderDetails(),t("#order-details").removeClass("uk-open").hide()},cancelOrder:function(){t("#cancel-order").addClass("uk-open").show()},orderCancel:function(e){var a=this;t("#submitBtn").attr("disabled",!0).html("canceling....please wait"),this.$store.dispatch("orders/cancelOrder",this.formData).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("Cancel Order"),e.data.status)return t("#cancel-order").removeClass("uk-open").hide(),a.$toast.success(e.data.message),void location.reload();a.$toast.error(e.data.message)}).catch(function(e){a.$toast.error(res.data.message),t("#submitBtn").attr("disabled",!1).html("Cancel Order")})}}}}).call(e,a("7t+N"))},M2Sb:function(t,e,a){"use strict";e.a={layout:"main",props:["headers","value","date"],methods:{previous:function(){if(""!==this.headers.Prev){var t=+this.value-1;t<0?t=1:(this.$emit("input",t),this.$emit("go"))}},next:function(){if(""!==this.headers.Next){var t=+this.value+1;this.$emit("input",t),this.$emit("go")}}}}},axji:function(t,e,a){"use strict";var r=a("GMH1"),s=a("heh4"),o=!1;var i=function(t){o||a("q4xG")},n=a("VU/8")(r.a,s.a,!1,i,"data-v-b1245822",null);n.options.__file="components/OrderDetails.vue",e.a=n.exports},eQ15:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"h2.delivery-pin[data-v-b1245822]{color:#228b22;background-color:#cff8cf;padding:10px 16px;font-size:20px;cursor:pointer;border-radius:6px}div h2[data-v-b1245822]{font-size:16px;font-weight:600}h1[data-v-b1245822]{margin-top:20px;font-weight:600}hr[data-v-b1245822]{margin-top:8px;margin-bottom:6px}.status[data-v-b1245822]{padding:4px 12px}.btn[data-v-b1245822]{padding:8px 16px}.btn--primary[data-v-b1245822]{min-width:75px}.btn--danger[data-v-b1245822]{background-color:#dc3545;color:#fff}.review[data-v-b1245822]{border-radius:8px}",""])},f9lL:function(t,e,a){var r=a("xLBZ");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("96518c78",r,!1,{sourceMap:!1})},fTOH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("yMQa"),s=a("iPkZ"),o=!1;var i=function(t){o||a("f9lL")},n=a("VU/8")(r.a,s.a,!1,i,"data-v-11a430e1",null);n.options.__file="pages/reports/sales-report/index.vue",e.default=n.exports},hYtS:function(t,e,a){"use strict";var r=a("M2Sb"),s=a("zTfd"),o=a("VU/8")(r.a,s.a,!1,null,null,null);o.options.__file="components/Pagination.vue",e.a=o.exports},heh4:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"order-details","uk-modal":"","data-uk-modal":"{target:'#order-details',bgclose:false}",container:"#parent-component"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("div",{staticClass:"modal-header d-flx-alc-jsb"},[a("h2",{staticStyle:{"font-size":"20px"}},[t._v("Order Details")]),a("button",{staticClass:"uk-modal-close-default",staticStyle:{right:"20px",padding:"16px 8px"},attrs:{type:"button","uk-close":""},on:{click:t.closeOrderDetails}})]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb",staticStyle:{"margin-top":"12px"}},[a("p",{staticStyle:{"font-size":"16px"}},[t._v("\r\n              Order Status\r\n              "),"cancel"!==t.orderList.orderstatus?a("span",{class:"status "+t.orderDetailsData.orderstatus.toLowerCase()},[t._v(t._s(t.orderList.orderstatus?t.orderList.orderstatus.replace("_"," ").toUpperCase():t.orderList.orderstatus))]):t._e(),"cancel"==t.orderList.orderstatus?a("span",{class:"status "+t.orderDetailsData.orderstatus.toLowerCase()},[t._v("CANCELLED")]):t._e()]),"cancel"!==t.orderDetailsData.orderstatus&&"completed"!==t.orderDetailsData.orderstatus&&(t.user.rolepermission&&t.user.rolepermission[0].orders.cancelorder||t.isMerchant)?a("button",{staticClass:"btn btn--danger",attrs:{type:"submit"},on:{click:function(e){return t.cancelOrder()}}},[t._v("\r\n              Cancel Order\r\n            ")]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:"cancel"==t.orderList.orderstatus,expression:"orderList.orderstatus =='cancel'"}],staticStyle:{"margin-top":"12px"}},[a("hr"),a("p",{staticStyle:{"font-size":"16px"}},[t._v("\r\n                Reason for Order Cancellation             \r\n              ")]),a("h2",[t._v(t._s(t.orderList.reason))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"Rejected"==t.orderList.orderstatus,expression:"orderList.orderstatus =='Rejected'"}],staticStyle:{"margin-top":"12px"}},[a("hr"),a("p",{staticStyle:{"font-size":"16px"}},[t._v("\r\n                Reason for Order Rejection             \r\n              ")]),a("h2",[t._v(t._s(t.orderList.reason))])]),a("hr"),a("overlay-scrollbars",{staticClass:"modal-body",staticStyle:{"padding-top":"0"},attrs:{"uk-overflow-auto":""}},[a("div",{staticClass:"d-flx-alc-jsb"},[a("p",[t._v("Order ID")]),a("h2",{staticClass:"d-flx my-1"},[a("span",{staticClass:"review"},[t._v(t._s(t.orderList.ordercode))])])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Payment Status")]),a("h2",{staticStyle:{"margin-top":"10px",color:"#47a147"}},[t._v(t._s(t.orderList.paymentstatus))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Payment Method")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.orderList.paymentmethod))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Delivery Method")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.orderList.ordermethod))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Order Category")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.orderList.ordercategory))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Item Name")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.orderList.itemname))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Item Quantity")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.orderList.itemquantity))])]),a("hr"),a("div",{directives:[{name:"show",rawName:"v-show",value:"scheduled"==t.orderList.orderstatus,expression:"orderList.orderstatus == 'scheduled'"}],staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Schedule time")]),a("h2",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.$moment(t.orderList.scheduletime).format("MMM Do YYYY | hh:mma")))])]),a("hr"),a("h1",[t._v("Pick-Up Information")]),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Name")]),a("h2",[t._v(t._s(t.orderList.sendername))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Phone Number")]),a("h2",[t._v(t._s(t.orderList.senderphone))])]),a("hr"),a("div",[a("p",{staticClass:"co-lgray"},[t._v("Pick-Up Address")]),a("h2",[t._v(t._s(t.orderList.pickupaddress))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Pick-up Code")]),a("h2",{staticClass:"delivery-pin",attrs:{title:"click to copy pick-up code"},on:{click:function(e){return e.preventDefault(),t.copyLink(t.orderList.pickuppin)}}},[t._v(t._s(t.orderList.pickuppin?t.orderList.pickuppin:"N/A"))])]),t._l(t.orderList.delivery_location,function(e,r){return a("div",{key:r},[a("hr"),1==t.orderList.delivery_location.length?a("h1",[t._v("Delivery Information")]):t._e(),t.orderList.delivery_location.length>1?a("h1",[t._v("Delivery Information ("+t._s(r+1)+")")]):t._e(),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Name")]),a("h2",[t._v(t._s(e.receivername))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Phone Number")]),a("h2",[t._v(t._s(e.receiverphonenumber))])]),a("hr"),a("div",[a("p",{staticClass:"co-lgray"},[t._v("Delivery Address")]),a("h2",[t._v(t._s(e.address))])]),a("div",[a("p",{staticClass:"co-lgray"},[t._v("Delivery Instruction")]),a("h2",[t._v(t._s(e.deliveryinstruction?e.deliveryinstruction:"N/A"))])])])}),null!==t.orderList.riderID?a("div",[a("hr"),a("h1",[t._v("Rider Details")]),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Rider Name")]),a("h2",[t._v(t._s(t.orderList.riderfirstname)+" "+t._s(t.orderList.riderlastname))])]),a("hr"),a("div",{staticClass:"d-flx-alc-jsb"},[a("p",{staticClass:"co-lgray"},[t._v("Rider Phone Number")]),a("h2",[t._v(t._s(t.orderList.riderphonenumber))])])]):t._e(),a("table",{staticClass:"table-content order-list"},[a("tbody",{staticClass:"tablebody"},[t._l(t.orderDetailsData.items,function(e){return a("tr",{key:e.id},[a("td",[a("div",{staticClass:"text-img alt"},[a("img",{staticClass:"text-img__img",attrs:{src:e.photo,alt:""}}),a("div",{staticClass:"text-img__content"},[a("h3",{staticClass:"fw-medium"},[t._v("\r\n                                  "+t._s(e.productname)+"\r\n                              ")]),e.discountprice?a("div",[a("s",{staticClass:"old-price"},[t._v("₦ "+t._s(t.formatPrice(e.unitprice)))]),a("p",{staticClass:"discount-price-normal"},[t._v("₦ "+t._s(t.formatPrice(e.discountprice)))])]):a("div",[a("p",{staticClass:"price"},[t._v("₦ "+t._s(t.formatPrice(e.unitprice)))])])])])]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v(" ₦ "+t._s(t.formatPrice(e.totalprice)))])])}),a("tr",{staticClass:"no-border-bottom"},[a("td",{staticClass:"co-lgray tx-r font-16",attrs:{colspan:"2"}},[t._v("Delivery Fee")]),a("td",{staticClass:"fw-medium co-lgray"},[t._v("₦ "+t._s(t.formatPrice(t.orderList.deliverycharge)))])]),a("tr",{staticClass:"no-border-bottom"},[a("td",{staticClass:"font-18 fw-bold tx-r",attrs:{colspan:"2"}},[t._v("Total")]),a("td",{staticClass:"font-18 fw-bold"},[t._v("₦ "+t._s(t.formatPrice(t.orderList.deliverycharge)))])])],2)])],2),a("div",{attrs:{id:"cancel-order","uk-modal":"","data-uk-modal":"{target:'#cancel-order',bgclose:false}",container:"#parent-component"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeOrderDetails}}),t._m(0),a("form",{attrs:{action:""}},[t._m(1),a("div",{staticClass:"form-input__input"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.reason,expression:"formData.reason"}],attrs:{rows:"5"},domProps:{value:t.formData.reason},on:{input:function(e){e.target.composing||t.$set(t.formData,"reason",e.target.value)}}})])]),a("div",{staticClass:"d-flx-alc-jfe mt-2"},[a("button",{staticClass:"btn btn--primary",attrs:{type:"submit",id:"submitBtn"},on:{click:function(e){return t.orderCancel(t.order)}}},[t._v("\r\n              Cancel\r\n            ")])])])])],1)])])};r._withStripped=!0;var s={render:r,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h2",[this._v("\r\n              Cancel order\r\n            ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form-input"},[e("p",{staticClass:"form-input__label"},[this._v("Why do you want to cancel this order? "),e("span",{staticStyle:{color:"red"}},[this._v("*")])])])}]};e.a=s},iPkZ:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),a("div",{staticClass:"search-filter d-flx-alc-jfe"},[a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{keyup:t.filteredOrder,input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.paymentMethod,expression:"paymentMethod"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.paymentMethod=e.target.multiple?a:a[0]},function(e){return t.paymentMethodFilter()}]}},[a("option",{attrs:{value:""}},[t._v("All Payment Methods")]),a("option",{attrs:{value:"cash"}},[t._v("Cash")]),a("option",{attrs:{value:"card"}},[t._v("Card")]),a("option",{attrs:{value:"wallet"}},[t._v("Wallet")]),a("option",{attrs:{value:"banktransfer"}},[t._v("Bank Transfer")])])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderStatus,expression:"orderStatus"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderStatus=e.target.multiple?a:a[0]},function(e){return t.orderStatusFilter()}]}},[a("option",{attrs:{value:""}},[t._v("All Order Status")]),a("option",{attrs:{value:"pending"}},[t._v("Pending")]),a("option",{attrs:{value:"assigned"}},[t._v("Assigned")]),a("option",{attrs:{value:"intransit"}},[t._v("In Transit")]),a("option",{attrs:{value:"delivered"}},[t._v("Delivered")])])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderCategory,expression:"orderCategory"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderCategory=e.target.multiple?a:a[0]},function(e){return t.orderCategoryFilter()}]}},[a("option",{attrs:{value:""}},[t._v("All Category")]),a("option",{attrs:{value:"food"}},[t._v("Food")]),a("option",{attrs:{value:"delivery"}},[t._v("Delivery")])])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.branchID,expression:"formData.branchID"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"branchID",e.target.multiple?a:a[0])},function(e){return t.getReport("branchID")}]}},[a("option",{attrs:{value:""}},[t._v("All Branches")]),t._l(t.branches,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n            "+t._s(e.branchname)+"\n          ")])})],2)]),a("div",{staticClass:"drop-down date-drop"},[a("date-picker",{attrs:{type:"datetime",range:"",placeholder:"Date Range",timeTitleFormat:"YYYY-MM-DD hh:mm a",format:"YYYY-MM-DD hh:mm a","value-type":"format","show-second":!1,"show-time-panel":t.showTimeRangePanel},on:{change:t.getReport,close:t.handleRangeClose},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"mx-btn mx-btn-text",on:{click:t.toggleTimeRangePanel}},[t._v("\n              "+t._s(t.showTimeRangePanel?"select date":"select time")+"\n            ")])]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",fetch:t.fetchData,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:"order-status-report.xls"}},[t._v("\n        Export\n      ")])],1)],1),a("pagination",{attrs:{headers:t.headers,date:t.date},on:{go:t.getReport},model:{value:t.formData.page,callback:function(e){t.$set(t.formData,"page",e)},expression:"formData.page"}}),a("div",{attrs:{id:"parent-component"}},[a("order-details",{ref:"order_details"})],1),a("div",{staticClass:"inner-main-wrapper"},[a("overlay-scrollbars",{staticClass:"table-wrapper"},[a("figcaption",{staticClass:"sr"},[t._v("\n        A table showing information of categories\n      ")]),a("table",{staticClass:"table-content"},[a("thead",{},[a("tr",[a("th",{staticClass:"large-space column-name"},[t._v("Customer")]),a("th",{staticClass:"column-name"},[t._v("Phone")]),a("th",{staticClass:"column-name"},[t._v("Order ID")]),a("th",{staticClass:"column-name"},[t._v("Order Category")]),a("th",{},[t._v("Amount (₦)")]),a("th",{staticClass:"column-name"},[t._v("Payment Method")]),a("th",{staticClass:"column-name"},[t._v("Branch")]),a("th",{staticClass:"large-space column-name"},[t._v("Rider")]),a("th",{staticClass:"column-name"},[t._v("Order Status")]),a("th",{staticClass:"column-name"},[t._v("Order Date")])])]),a("tbody",{staticClass:"tablebody"},[t.loading?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("No record at the moment")])]):t._e(),t._l(t.filteredList,function(e,r){return!t.loading&&t.filteredList.length>0?a("tr",{key:r},[a("td",{staticClass:"column-name"},[a("div",{staticClass:"avatar-wtext"},[a("span",{staticClass:"column-name"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))])])]),a("td",{staticClass:"column-name"},[t._v(t._s(e.phonenumber))]),a("td",{staticClass:"column-name",staticStyle:{color:"#28a745"}},[t._v("\n              "+t._s(e.ordercode)+"\n            ")]),a("td",{staticClass:"column-name"},[t._v(t._s(e.ordercategory))]),a("td",[t._v(t._s(t.formatPrice(e.ordertotal)))]),a("td",{staticClass:"column-name"},[t._v("\n              "+t._s(e.paymentmethod)+"\n            ")]),a("td",{staticClass:"column-name"},[t._v(t._s(e.branchname))]),void 0!=e.riderfirstname&&void 0!=e.riderlastname?a("td",{staticClass:"avatar-wtext column-name"},[a("span",{staticClass:"column-name"},[t._v(t._s(e.riderfirstname)+" "+t._s(e.riderlastname))])]):a("td",{staticClass:"avatar-wtext column-name"},[a("span")]),a("td",{staticClass:"tx-c column-name"},[a("span",{class:"column-name status "+e.orderstatus.toLowerCase()},[t._v(t._s(e.orderstatus.replace("_"," ")))])]),a("td",{staticClass:"column-name"},[t._v(t._s(e.created_at))])]):t._e()})],2)])])],1)],1)};r._withStripped=!0;var s={render:r,staticRenderFns:[]};e.a=s},q4xG:function(t,e,a){var r=a("eQ15");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("c6ad5870",r,!1,{sourceMap:!1})},xLBZ:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".search-filter .filter-drop[data-v-11a430e1]{min-width:0!important}.search-filter>[data-v-11a430e1]{margin-right:7px}.filter-btn[data-v-11a430e1]{padding:12px 7px!important}",""])},yMQa:function(t,e,a){"use strict";(function(t){var r=a("mvHQ"),s=a.n(r),o=a("hYtS"),i=a("axji");e.a={components:{Pagination:o.a,OrderDetails:i.a},layout:"main",computed:{json_fields:function(){var t=this,e={CUSTOMER:{callback:function(t){return t.firstname+" "+t.lastname}},PHONE:"phonenumber","ORDER ID":"ordercode","ORDER CATEGORY":"ordercategory",AMOUNT:{field:"ordertotal",callback:function(e){return t.formatPrice(e)}},"PAYMENT METHOD":"paymentmethod",BRANCH:"branchname","ORDER STATUS":"orderstatus"};return e.BRANCH={callback:function(t){return t.branchname+", "+t.branchcity}},e.RIDER={callback:function(t){return t.riderfirstname+" "+t.riderlastname}},e["ORDER DATE"]="created_at",e}},data:function(){return{filteredList:[],paymentMethod:"",orderStatus:"",orderCategory:"",taxes:[],loading:!0,date:"",formData:{branchID:"",enddate:"",merchID:"",reporttype:"",startdate:"",page:1},api:"salesreport/getReport",search:"",reports:[],branches:[],orderDetailsData:{items:[],tax:0,orderid:"",orderstatus:"",customername:"",customerphone:"",deliveryaddress:"",profilelink:"",deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:"",photo:""},staff:{photo:"",name:"",phone:""}},headers:{Next:"",Prev:"",Count:0,total:0,pagenum:1}}},methods:{paymentMethodFilter:function(){var t=this;this.filteredList=this.reports.filter(function(e){return""==t.paymentMethod?t.reports:null!=e.paymentmethod&&e.paymentmethod.toLowerCase().includes(t.paymentMethod.toLowerCase())?e.paymentmethod.toLowerCase().includes(t.paymentMethod.toLowerCase()):void 0})},orderStatusFilter:function(){var t=this;this.filteredList=this.reports.filter(function(e){return""==t.orderStatus?t.reports:null!=e.orderstatus&&e.orderstatus.toLowerCase().includes(t.orderStatus.toLowerCase())?e.orderstatus.toLowerCase().includes(t.orderStatus.toLowerCase()):void 0})},orderCategoryFilter:function(){var t=this;this.filteredList=this.reports.filter(function(e){return""==t.orderCategory?t.reports:null!=e.ordercategory&&e.ordercategory.toLowerCase().includes(t.orderCategory.toLowerCase())?e.ordercategory.toLowerCase().includes(t.orderCategory.toLowerCase()):void 0})},filteredOrder:function(){var t=this;this.filteredList=this.reports.filter(function(e){return e.ordercode.toLowerCase().includes(t.search.toLowerCase())?e.ordercode.toLowerCase().includes(t.search.toLowerCase()):e.firstname.toLowerCase().includes(t.search.toLowerCase())?e.firstname.toLowerCase().includes(t.search.toLowerCase()):e.lastname.toLowerCase().includes(t.search.toLowerCase())?e.lastname.toLowerCase().includes(t.search.toLowerCase()):e.paymentstatus.toLowerCase().includes(t.search.toLowerCase())?e.paymentstatus.toLowerCase().includes(t.search.toLowerCase()):void 0})},getTaxs:function(){var t=this;this.$store.dispatch("tax/listTaxsWithDeleted",this.formData).then(function(e){t.taxes=e.data.data}).catch(function(t){console.log(t)})},getAmount:function(t,e){if(t.length>0){var a=t.filter(function(t){return!!t.paymentmethod&&t.paymentmethod.toLowerCase().includes(e)});if(1==a.length)return this.formatPrice(a[0].paymentamount)}return""},getTax:function(t,e){if(t.length>0){var a=t.filter(function(t){return t.tax_id==e});if(1==a.length)return this.formatPrice(a[0].value)}return""},formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getReport:function(t){var e=this;void 0!=t&&"branchID"==t&&(this.formData.page=1),this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate="");this.formData.export="",this.$store.dispatch("salesreport/getReport",this.new_data).then(function(t){if(t.status)return e.reports=t.data,e.filteredList=t.data,e.setHeaders(t.data,t.headers),void(e.loading=!1);e.loading=!1,e.$toast.error("An error occurred")}).catch(function(t){e.loading=!1,e.$toast.error("An error occurred "+t)})},sortReport:function(){var t=this;this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate=""),this.formData.export="",this.formData.page=1,this.$store.dispatch("salesreport/getReport",this.formData).then(function(e){if(e.status){t.reports=e.data;var a=[],r=t.formatPrice;return t.reports.forEach(function(t){var e={name:t.firstname+" "+t.lastname,contact:t.phonenumber,orderID:t.ordercode,amount:r(t.ordertotal),branch:t.branchname+", "+t.branchcity,rider:t.riderfirstname+" "+t.riderlastname};a.push(e)}),t.json_data=a,t.headers=e.headers,void(t.loading=!1)}t.loading=!1,t.$toast.error("An error occurred")}).catch(function(e){t.loading=!1,t.$toast.error("An error occurred"+e)})},listBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(e){t.branches=e.data.data}).catch(function(t){console.log(t)})},nextData:function(){if(""!==this.headers.Next){var t=+this.formData.page+1;this.formData.page=t,this.getReport()}},previousData:function(){if(""!==this.headers.Prev){var t=+this.formData.page-1;t<0?this.formData.page=1:(this.formData.page=t,this.getReport())}},orderDetails:function(t){localStorage.setItem("order_data",s()(t)),this.$refs.order_details.setOrder(t)},clearOrderDetails:function(){this.orderDetailsData={items:[],orderid:"",orderstatus:"",tax:0,customername:"",customerphone:"",deliveryaddress:"",profilelink:"",deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:""},staff:{name:"",photo:"",phone:""}}},calculateSubTotal:function(t){var e=0;return t.forEach(function(t,a,r){e+=t.totalprice}),e},calculateTotal:function(t){var e=0;t.forEach(function(t,a,r){e+=t.totalprice});var a=0;return this.orderDetailsData.tax>0&&(a=this.orderDetailsData.tax/100*e),+e+ +a+ +this.orderDetailsData.deliverycharge},closeOrderDetails:function(){this.clearOrderDetails(),t("#order-details").removeClass("uk-open").hide()}},beforeRouteEnter:function(t,e,a){var r=JSON.parse(localStorage.getItem("user"));void 0==r.role||r.rolepermission&&r.rolepermission[0].reports.viewsalesreport?a():(alert("You have not been permitted to view this page"),a({path:"/dashboard"}))},mounted:function(){this.formData.merchID=this.user.id,this.formData.reporttype=this.$route.params.name,this.listBranches(),this.getReport(),this.filteredOrder(),this.getTaxs()}}}).call(e,a("7t+N"))},zTfd:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("div",{staticClass:"drop-down page-drop"},[a("button",{staticClass:"btn-text ",attrs:{type:"button"}},[t._v("\n          Showing "),a("span",[t._v(" "+t._s(t.showing)+" ")]),t._v(" of "),a("span",[t._v(" "+t._s(void 0!=this.headers.Count?this.headers.Count:0)+" ")])])]),a("div",{staticClass:"d-flx-alc"},[t.date&&"object"==typeof t.date?a("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date[0])+" - "+t._s(t.date[1]))]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"string"==typeof t.date,expression:"typeof date == 'string'"}],staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date)+" ")]),a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.previous}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-right"}})])]),a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.next}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-left"}})])])])])};r._withStripped=!0;var s={render:r,staticRenderFns:[]};e.a=s}});