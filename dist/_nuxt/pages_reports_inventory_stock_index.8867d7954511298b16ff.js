webpackJsonp([37],{B5ax:function(t,e,a){"use strict";var s=a("hYtS");e.a={components:{Pagination:s.a},layout:"main",computed:{filteredList:function(){var t=this;return this.reports.filter(function(e){return void 0!=e.branchname&&e.branchname.toLowerCase().includes(t.search.toLowerCase())||void 0!=e.branchstate&&e.branchstate.toLowerCase().includes(t.search.toLowerCase())||void 0!=e.branchcity&&e.branchcity.toLowerCase().includes(t.search.toLowerCase())||void 0!=e.productname&&e.productname.toLowerCase().includes(t.search.toLowerCase())})},json_fields:function(){var t=this.$moment;return{"PRODUCT NAME":"productname","SELLING PRICE":"sellingprice","OPENING STOCK":"pastqty",INWARD:"prod",STOCK:"productqty",BRANCH:"branchname",DATE:{field:"date",callback:function(e){return t(e).format("Do MMMM, YYYY")}}}}},data:function(){return{branches:[],search:"",closing:!1,reports:[],headers:{Next:"",Prev:"",count:0,total:0,pagenum:1},loading:!0,api:"inventoryreport/getStockReport",formData:{merchID:"",branchID:"",startdate:"",enddate:"",page:1},date:"",productTypes:{nonstocked_product:"Non stocked product",stocked_product:"Stocked product",service:"Service product"}}},methods:{showProductType:function(t){return this.productTypes[t]},showQuantity:function(t){return null!=t.inwardqty?'<svg style="width:16px;height:16px" viewBox="0 0 24 24"><path fill="green" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>'+t.inwardqty:'<svg style="width:16px;height:16px" viewBox="0 0 24 24"><path fill="red" d="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z" /></svg>'+t.outwardqty},getBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(e){t.branches=e.data.data}).catch(function(t){})},getStockReport:function(){var t=this;this.loading=!0,null!=this.date&&""!==this.date&&null!=this.date[0]?this.formData.startdate=this.$moment(this.date).format("YYYY-MM-DD HH:MM:SS"):this.formData.startdate="",this.formData.export="",this.$store.dispatch("inventoryreport/getStockReport",this.new_data).then(function(e){if(e.data.status)return t.reports=e.data.data,void 0!=e.data.data&&e.data.data.length>0&&(t.setHeaders(e.data.data,e.data.headers),t.closing=t.$moment(new Date).format("Do")!=t.$moment(t.reports[0].date).format("Do")),void(t.loading=!1);t.loading=!1,t.$toast.error("An error occurred! Please try again")}).catch(function(e){t.loading=!1,t.$toast.error(e)})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getBranches(),this.getStockReport()}}},M2Sb:function(t,e,a){"use strict";e.a={layout:"main",props:["headers","value","date"],methods:{previous:function(){if(""!==this.headers.Prev){var t=+this.value-1;t<0?t=1:(this.$emit("input",t),this.$emit("go"))}},next:function(){if(""!==this.headers.Next){var t=+this.value+1;this.$emit("input",t),this.$emit("go")}}}}},PwPM:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),a("div",{staticClass:"search-filter d-flx-alc-jfe"},[a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.branchID,expression:"formData.branchID"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"branchID",e.target.multiple?a:a[0])},t.getStockReport]}},[a("option",{attrs:{value:""}},[t._v("Select Branch")]),t._l(t.branches,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.branchname))])})],2)]),a("div",{staticClass:"drop-down date-drop"},[a("date-picker",{attrs:{type:"datetime",placeholder:"Date",timeTitleFormat:"YYYY-MM-DD hh:mm a",format:"YYYY-MM-DD hh:mm a","value-type":"format","show-second":!1,range:!1,"show-time-panel":t.showTimeRangePanel},on:{change:t.getStockReport,close:t.handleRangeClose},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"mx-btn mx-btn-text",on:{click:t.toggleTimeRangePanel}},[t._v("\n\t\t\t\t\t"+t._s(t.showTimeRangePanel?"select date":"select time")+"\n\t\t\t\t")])]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",fetch:t.fetchData,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:"inventory-stock-report.xls"}},[t._v("\n          Export\n        ")])],1)],1),a("pagination",{attrs:{headers:t.headers,date:t.date},on:{go:t.getStockReport},model:{value:t.formData.page,callback:function(e){t.$set(t.formData,"page",e)},expression:"formData.page"}}),a("div",{staticClass:"inner-main-wrapper"},[a("overlay-scrollbars",{staticClass:"table-wrapper"},[a("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),a("table",{staticClass:"table-content"},[a("thead",{},[a("tr",[a("th",{staticClass:"column-name"},[t._v(" Name")]),a("th",{},[t._v(" Price(â‚¦)")]),a("th",{},[t._v(" Opening Stock")]),a("th",{},[t._v(" Stock In")]),t.closing?a("th",{},[t._v(" Closing Stock")]):a("th",{},[t._v(" Current Stock")]),a("th",{staticClass:"column-name"},[t._v("Branch")]),a("th",{staticClass:"column-name"},[t._v("Date")])])]),a("tbody",{staticClass:"tablebody"},[t.loading?a("tr",[a("td",{attrs:{colspan:"8"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?a("tr",[a("td",{attrs:{colspan:"8"}},[t._v("No record at the moment")])]):t._e(),t._l(t.filteredList,function(e,s){return!t.loading&&t.filteredList.length>0?a("tr",{key:s},[a("td",{staticClass:"column-name"},[t._v(t._s(e.productname))]),a("td",[t._v(t._s(t.formatPrice(e.sellingprice)))]),a("td",[t._v(t._s(e.pastqty))]),a("td",[t._v(t._s(e.prod))]),a("td",[t._v(t._s(e.productqty))]),a("td",{staticClass:"column-name"},[t._v(t._s(e.branchname))]),a("td",{staticClass:"column-name"},[t._v(t._s(t.$moment(e.date).format("Do, MMM YYYY")))])]):t._e()})],2)])])],1)],1)};s._withStripped=!0;var o={render:s,staticRenderFns:[]};e.a=o},hYtS:function(t,e,a){"use strict";var s=a("M2Sb"),o=a("zTfd"),r=a("VU/8")(s.a,o.a,!1,null,null,null);r.options.__file="components/Pagination.vue",e.a=r.exports},y867:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("B5ax"),o=a("PwPM"),r=a("VU/8")(s.a,o.a,!1,null,null,null);r.options.__file="pages/reports/inventory/stock/index.vue",e.default=r.exports},zTfd:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("div",{staticClass:"drop-down page-drop"},[a("button",{staticClass:"btn-text ",attrs:{type:"button"}},[t._v("\n          Showing "),a("span",[t._v(" "+t._s(t.showing)+" ")]),t._v(" of "),a("span",[t._v(" "+t._s(void 0!=this.headers.Count?this.headers.Count:0)+" ")])])]),a("div",{staticClass:"d-flx-alc"},[t.date&&"object"==typeof t.date?a("div",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date[0])+" - "+t._s(t.date[1]))]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"string"==typeof t.date,expression:"typeof date == 'string'"}],staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.date)+" ")]),a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.previous}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-right"}})])]),a("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.next}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#arrow-left"}})])])])])};s._withStripped=!0;var o={render:s,staticRenderFns:[]};e.a=o}});