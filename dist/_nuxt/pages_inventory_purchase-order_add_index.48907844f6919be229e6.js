webpackJsonp([11],{ApnF:function(t,e,a){"use strict";var r=a("pKJT"),i=a("ILnC"),s=!1;var n=function(t){s||a("clZ+")},o=a("VU/8")(r.a,i.a,!1,n,"data-v-9cdaad0e",null);o.options.__file="components/DataTable.vue",e.a=o.exports},GRnq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("H2x4"),i=a("lNkv"),s=!1;var n=function(t){s||a("gCj1")},o=a("VU/8")(r.a,i.a,!1,n,"data-v-1d008bba",null);o.options.__file="pages/inventory/purchase-order/add/index.vue",e.default=o.exports},H2x4:function(t,e,a){"use strict";(function(t){var r=a("ApnF");e.a={layout:"main",components:{DataTable:r.a},data:function(){return{formData:{template:"",merchID:"",branchID:"",vendorID:"",purchaseordercode:"",paymentterms:"",description:"",orderdate:"",duedate:"",currency:"NGN",createdby:"",purchaseorderitems:[]},listProductData:{page:1,merchID:"",branchID:"",categoryID:"",search:""},errorData:{branchID:!1,vendorID:!1,purchaseordercode:!1,paymentterms:!1,orderdate:!1,duedate:!1},poitems:[{productID:"",packsize:1,packquantity:"",packcost:"",quantity:"",vendorproductcode:"",unitprice:0,discountprice:0,totalprice:0,merchID:""}],products:[],branches:[],vendors:[]}},methods:{validate:function(){return""==this.formData.purchaseordercode?(this.errorData.purchaseordercode=!0,!0):""==this.formData.orderdate?(this.errorData.orderdate=!0,!0):""==this.formData.branchID?(this.errorData.branchID=!0,!0):""==this.formData.vendorID?(this.errorData.vendorID=!0,!0):""==this.formData.paymentterms?(this.errorData.paymentterms=!0,!0):(0==this.formData.purchaseorderitems.length&&this.$toast.error("Add at least one product"),""==this.formData.duedate?(this.errorData.duedate=!0,!0):void 0)},savePurchaseOrder:function(){var e=this;this.formData.createdby=this.user.id,this.formData.purchaseorderitems=this.poitems,this.validate()||(console.log(this.formData),t("#submitBtn").attr("disabled",!0).html("Creating...please wait"),this.$store.dispatch("purchaseorders/savePurchaseOrder",this.formData).then(function(a){if(t("#submitBtn").attr("disabled",!1).html("+ Create PO"),a.data.status)return e.$toast.success(a.data.message),e.clearFormData(),e.errorData={branchID:!1,vendorID:!1,purchaseordercode:!1,paymentterms:!1,orderdate:!1,duedate:!1},void e.$router.push("/inventory/purchase-order");e.$toast.error(a.data.message)}).catch(function(e){t("#submitBtn").attr("disabled",!1).html("+ Create PO"),console.log(e)}))},clearFormData:function(){this.formData={template:"",branchID:"",vendorID:"",purchaseordercode:"",paymentterms:"",description:"",orderdate:"",duedate:"",currency:"NGN",createdby:"",purchaseorderitems:[]}},addChild:function(){this.poitems.push({productID:"",quantity:"",vendorproductcode:"",unitprice:0,discountprice:0,totalprice:0,merchID:""})},removeChild:function(t){this.poitems.splice(t,1)},getProducts:function(t){var e=this;void 0!=t&&"branchID"==t&&(this.listProductData.page=1),this.$store.dispatch("products/listProducts",this.formData.merchID).then(function(t){e.products=t.data.data}).catch(function(t){console.log(t)})},setMerchID:function(t){this.poitems[t].merchID=this.formData.merchID},getBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(e){t.branches=e.data.data}).catch(function(t){console.log(t)})},getVendors:function(){var t=this;this.$store.dispatch("vendor/listVendors",this.formData.merchID).then(function(e){t.vendors=e.data.data}).catch(function(t){console.log(t)})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.poitems[0].merchID=this.user.role?this.user.merchID:this.user.id,this.getBranches(),this.getProducts(),this.getVendors()}}}).call(e,a("7t+N"))},ILnC:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-responsive",[a("v-data-table",{attrs:{headers:t.headers,"no-data-text":"No items in the list",items:t.poitems,loading:t.loading,"footer-props":{itemsPerPage:"200"}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{staticClass:"text-right",attrs:{flat:""}},[a("v-toolbar-title",[t._v("Order Items")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{staticClass:"mb-2 float-right",attrs:{color:"primary",green:""},on:{click:t.addChild}},[t._v("\n              New Item\n            ")])],1)]},proxy:!0},{key:"header.name",fn:function(e){var a=e.header;return[t._v("\n\t\t\t"+t._s(a.text.toUpperCase())+"\n\t\t\t")]}},{key:"item.productID",fn:function(e){return[a("v-edit-dialog",{on:{open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-select",{attrs:{items:t.products,filled:"",label:"Select","item-text":"productname","item-value":"id",autofocus:"",required:""},model:{value:e.item.productID,callback:function(a){t.$set(e.item,"productID",a)},expression:"props.item.productID"}})]},proxy:!0}],null,!0)},[t._v("\n                "+t._s(t.getProductName(e.item))+"\n\t\t\t\t")])]}},{key:"item.quantity",fn:function(e){return[a("v-edit-dialog",{on:{save:function(a){return t.save(e.item,"quantity")},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit Qty","single-line":"",autofocus:""},on:{keyup:function(a){return t.save(e.item,"quantity")}},model:{value:e.item.quantity,callback:function(a){t.$set(e.item,"quantity",a)},expression:"props.item.quantity"}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(t.formNumber(e.item.quantity)))])])]}},{key:"item.packquantity",fn:function(e){return[a("v-edit-dialog",{on:{save:function(a){return t.save(e.item,"packquantity")},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit Pack Qty","single-line":"",autofocus:""},on:{keyup:function(a){return t.save(e.item,"packquantity")}},model:{value:e.item.packquantity,callback:function(a){t.$set(e.item,"packquantity",a)},expression:"props.item.packquantity"}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(isNaN(e.item.packquantity)?"Enter Pack Quantity":t.formNumber(e.item.packquantity)))])])]}},{key:"item.packsize",fn:function(e){return[a("v-edit-dialog",{on:{save:function(a){return t.save(e.item,"packsize")},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit Pack Size","single-line":"",autofocus:""},on:{keyup:function(a){return t.save(e.item,"packsize")}},model:{value:e.item.packsize,callback:function(a){t.$set(e.item,"packsize",a)},expression:"props.item.packsize"}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(isNaN(e.item.packsize)?"Enter Pack Size":t.formNumber(e.item.packsize)))])])]}},{key:"item.packcost",fn:function(e){return[a("v-edit-dialog",{on:{save:function(a){return t.save(e.item,"packcost")},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit Pack Cost","single-line":"",autofocus:""},on:{keyup:function(a){return t.save(e.item,"packcost")}},model:{value:e.item.packcost,callback:function(a){t.$set(e.item,"packcost",a)},expression:"props.item.packcost"}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(isNaN(e.item.packcost)?"Enter Cost Per Pack":t.formNumber(e.item.packcost)))])])]}},{key:"item.discountprice",fn:function(e){return[a("v-edit-dialog",{on:{save:function(a){return t.save(e.item,"discountprice")},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit Discount Price","single-line":"",autofocus:""},on:{keyup:function(a){return t.save(e.item,"discountprice")}},model:{value:e.item.discountprice,callback:function(a){t.$set(e.item,"discountprice",a)},expression:"props.item.discountprice"}})]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(t.formatPrice(e.item.discountprice)))])])]}},{key:"item.totalprice",fn:function(e){return[a("div",[t._v(t._s(t.formatPrice(e.item.totalprice)))])]}},{key:"item.unitprice",fn:function(e){return[a("div",[t._v(t._s(t.formatPrice(e.item.unitprice)))])]}},{key:"footer",fn:function(){return[a("v-col",{staticClass:"text-right smaller",attrs:{cols:"12"}},[t._v("\n\t\t\t\tTotal Price :"+t._s(t.formatPrice(t.totalitems))+"\n\t\t\t\t")])]},proxy:!0},{key:"item.actions",fn:function(e){var r=e.item;return[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(r)}}},[t._v("\n\t\t\t\t\tmdi-delete\n\t\t\t\t")])]}}])})],1)],1)};r._withStripped=!0;var i={render:r,staticRenderFns:[]};e.a=i},WPLz:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".v-btn:not(.v-btn--round).v-size--default[data-v-9cdaad0e]{background-color:green!important}th[data-v-9cdaad0e]{font-size:10px!important;text-align:center!important}",""])},"clZ+":function(t,e,a){var r=a("WPLz");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("6cf9bb21",r,!1,{sourceMap:!1})},gCj1:function(t,e,a){var r=a("yhLY");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("e2869a74",r,!1,{sourceMap:!1})},lNkv:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("p",{staticClass:"fw-medium font-16"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/inventory/purchase-order"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])])],1),a("div",{staticClass:"search-filter d-flx-alc-jfe"})]),a("div",{staticClass:"inner-main-wrapper"},[t._m(0),a("overlay-scrollbars",{staticClass:"table-wrapper no-deco"},[a("div",{staticClass:"mt-2"},[a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Branch")]),a("div",{staticClass:"form-input__input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.branchID,expression:"formData.branchID"}],staticClass:"filter-btn box-deco-smallr",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"branchID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-Select Branch-")]),t._l(t.branches,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                  "+t._s(e.branchname)+"\n                ")])})],2)]),t.errorData.branchID?a("span",{staticClass:"form-input__error-msg"},[t._v("Please select a branch")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Vendor")]),a("div",{staticClass:"form-input__input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.vendorID,expression:"formData.vendorID"}],staticClass:"filter-btn box-deco-smallr",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"vendorID",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("-Select Vendor-")]),t._l(t.vendors,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                  "+t._s(e.vendorname)+"\n                ")])})],2)]),t.errorData.vendorID?a("span",{staticClass:"form-input__error-msg"},[t._v("Please select a vendor")]):t._e()])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Purchase order code")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.purchaseordercode,expression:"formData.purchaseordercode"}],attrs:{type:"text",name:""},domProps:{value:t.formData.purchaseordercode},on:{input:function(e){e.target.composing||t.$set(t.formData,"purchaseordercode",e.target.value)}}})]),t.errorData.purchaseordercode?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a Purchaseorder code")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Payment terms")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.paymentterms,expression:"formData.paymentterms"}],attrs:{type:"text",name:""},domProps:{value:t.formData.paymentterms},on:{input:function(e){e.target.composing||t.$set(t.formData,"paymentterms",e.target.value)}}})]),t.errorData.paymentterms?a("span",{staticClass:"form-input__error-msg"},[t._v("Please specify the payement terms")]):t._e()])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Order date")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.orderdate,expression:"formData.orderdate"}],attrs:{type:"date",name:""},domProps:{value:t.formData.orderdate},on:{input:function(e){e.target.composing||t.$set(t.formData,"orderdate",e.target.value)}}})]),t.errorData.orderdate?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter the order date")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Due date")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.duedate,expression:"formData.duedate"}],attrs:{type:"date",name:""},domProps:{value:t.formData.duedate},on:{input:function(e){e.target.composing||t.$set(t.formData,"duedate",e.target.value)}}})]),t.errorData.duedate?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter the due date")]):t._e()])]),a("DataTable",{attrs:{poitems:t.poitems,type:"purchaseOrder"}}),a("div",{staticClass:"d-flx-alc-jfe mt-3"},[a("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"}},[t._v("\n            Cancel\n          ")]),a("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"submitBtn"},on:{click:t.savePurchaseOrder}},[t._v("\n            + Create PO\n          ")])])],1)])],1)])};r._withStripped=!0;var i={render:r,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flx-alc-jsb table-title"},[e("h3",{staticClass:"section-title"},[this._v("Create Purchase order")])])}]};e.a=i},pKJT:function(t,e,a){"use strict";var r=a("3EgV"),i=a.n(r);e.a={layout:"main",vuetify:new i.a,props:["poitems","type"],data:function(){return{snack:!1,snackColor:"green",snackText:"",formData:{merchID:""},pagination:{},headers:[{text:"Product",align:"start",sortable:!1,value:"productID"},{text:"Code",value:"vendorproductcode",align:"end",sortable:!1},{text:"Pack Size",value:"packsize",align:"start",sortable:!1},{text:"Pack Qty.",value:"packquantity",align:"start",sortable:!1},{text:"Qty.",value:"quantity",align:"start",sortable:!1},{text:"Cost / Pack",value:"packcost",align:"start",sortable:!1},{text:"Discount %",value:"discountprice",align:"start",sortable:!1},{text:"Total Price",value:"totalprice",align:"end",sortable:!1},{text:"Cost / Piece",value:"unitprice",align:"end",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],products:[]}},computed:{loading:function(){return!(this.poitems.length>0)},totalitems:function(){return this.poitems.map(function(t){return t.totalprice}).reduce(function(t,e){return t+=e},0)}},methods:{deleteItem:function(t){this.poitems.splice(this.poitems.indexOf(t),1)},calcQty:function(t){t.quantity=t.packsize*t.packquantity,1==t.quantity&&0!=t.unitprice&&0!=t.packcost&&(t.quantity=t.packcost*t.packsize/t.unitprice)},calcPackQty:function(t){t.packquantity=t.quantity/t.packsize},calcPackCost:function(t){t.packcost=t.packsize*t.unitprice*t.packquantity},calcUnitPrice:function(t){t.unitprice=t.totalprice/t.quantity},calcDiscount:function(t){return t.totalprice/100*t.discountprice},calculateTotal:function(t,e){switch(t.packsize=void 0!=t.packsize&&""!=t.packsize?Number(t.packsize):1,t.packquantity=void 0!=t.packquantity&&""!=t.packquantity?Number(t.packquantity):1,t.packcost=void 0!=t.packcost&&""!=t.packcost?Number(t.packcost):0,t.quantity=void 0!=t.quantity&&""!=t.quantity?Number(t.quantity):1,t.unitprice=void 0!=t.unitprice&&""!=t.unitprice?Number(t.unitprice):0,t.discountprice=void 0!=t.discountprice&&""!=t.discountprice?Number(t.discountprice):0,e){case"packsize":this.calcPackQty(t),this.calcQty(t);break;case"packquantity":this.calcQty(t);break;case"quantity":this.calcPackQty(t)}t.totalprice=t.packquantity*t.packcost,this.calcUnitPrice(t),t.totalprice-=this.calcDiscount(t)},getProductName:function(t){var e=this.products.find(function(e){return t.productID==e.id});return void 0!=e?(t.vendorproductcode=e.productcode,t.productcode=e.productcode,e.productname):"Select a Product"},save:function(t,e){"name"!=e&&this.calculateTotal(t,e),this.snack=!0,this.snackColor="success",this.snackText="Data saved"},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},open:function(){this.snack=!0,this.snackColor="info",this.snackText="Dialog opened"},close:function(){},addChild:function(){this.poitems.unshift({id:"",productID:"",packsize:1,packquantity:"",packcost:"",quantity:"",vendorproductcode:"",unitprice:0,discountprice:0,totalprice:0,merchID:this.user.id})},removeChild:function(t){this.poitems.splice(t,1)},getProducts:function(){var t=this;this.$store.dispatch("discount/listProducts",this.formData).then(function(e){t.products=e.data.data}).catch(function(t){})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getProducts()}}},yhLY:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])}});