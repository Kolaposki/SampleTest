webpackJsonp([68],{LcWM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("fG+w"),s=a("m2B8"),o=a("VU/8")(r.a,s.a,!1,null,null,null);o.options.__file="pages/reports/riders-earning/index.vue",e.default=o.exports},"fG+w":function(t,e,a){"use strict";e.a={layout:"main",computed:{filteredList:function(){var t=this;return this.reports.filter(function(e){return null!==e.riderID&&e.riderID==t.search?null!==e.riderID&&e.riderID==t.search:null!==e.paymentmethod&&e.paymentmethod.toLowerCase().includes(t.search.toLowerCase())?null!==e.paymentmethod&&e.paymentmethod.toLowerCase().includes(t.search.toLowerCase()):null!==e.ordercode&&e.ordercode.toLowerCase().includes(t.search.toLowerCase())})},json_fields:function(){this.$moment;var t=this;return{"Rider ID":"riderID","Order No":"ordercode","Total Amount":{field:"ordertotal",callback:function(e){return t.formatPrice(e)}},"Commission Rate":"commissionrate","Amount Due to Ntisa":{field:"amountduetontisa",callback:function(e){return t.formatPrice(e)}},"Amount Due to Rider":{field:"amountduetorider",callback:function(e){return t.formatPrice(e)}},"Mode of Payment":"paymentmethod"}}},data:function(){return{loading:!0,formData:{merchID:"",page:1,startdate:"",enddate:"",branchID:"",paymentmode:"",riderID:""},date:"",reports:[],search:"",headers:{Next:"",Prev:"",Count:0,total:0,pagenum:1},api:"usersreport/getRidersEarning"}},methods:{formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getRiderEarning:function(){var t=this;this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate="");this.formData.export="",this.$store.dispatch("usersreport/getRidersEarning",this.formData).then(function(e){if(e.status)return t.reports=e.data,t.setHeaders(e.data,e),void(t.loading=!1);t.loading=!1,t.$toast.error("An error occurred")}).catch(function(e){t.loading=!1,t.$toast.error("An error occurred!")})}},beforeRouteEnter:function(t,e,a){var r=JSON.parse(localStorage.getItem("user"));void 0==r.role||r.rolepermission&&r.rolepermission[0].reports.viewriderearning?a():(alert("You have not been permitted to view this page"),a({path:"/dashboard"}))},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.formData.branchID="",this.getRiderEarning()}}},m2B8:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),a("div",{staticClass:"search-filter d-flx-alc-jfe"},[a("div",{staticClass:"drop-down filter-drop",attrs:{id:"branch"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.paymentmode,expression:"formData.paymentmode"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"paymentmode",e.target.multiple?a:a[0])},t.getRiderEarning]}},[a("option",{attrs:{value:""}},[t._v("All Payment mode")]),a("option",{attrs:{value:"card"}},[t._v("Card")]),a("option",{attrs:{value:"wallet"}},[t._v("Wallet")]),a("option",{attrs:{value:"cash"}},[t._v("Cash")]),a("option",{attrs:{value:"banktransfer"}},[t._v("Bank Transfer")])])]),a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),a("div",{staticClass:"drop-down page-drop"},[a("date-picker",{attrs:{range:"",placeholder:"Date Range",type:"datetime",timeTitleFormat:"YYYY-MM-DD hh:mm a",format:"YYYY-MM-DD hh:mm a","value-type":"format","show-second":!1,"show-time-panel":t.showTimeRangePanel},on:{change:t.getRiderEarning,close:t.handleRangeClose},scopedSlots:t._u([{key:"footer",fn:function(){return[a("button",{staticClass:"mx-btn mx-btn-text",on:{click:t.toggleTimeRangePanel}},[t._v("\n              "+t._s(t.showTimeRangePanel?"select date":"select time")+"\n            ")])]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",fetch:t.fetchData,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:"rider-earnings-report.xls"}},[t._v("\n        Export\n      ")])],1)],1),a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("div",{staticClass:"drop-down page-drop"},[a("button",{staticClass:"btn-text",attrs:{type:"button"}},[t._v("\n        Showing "),a("span",[t._v(" "+t._s(t.showing)+" ")]),t._v(" of\n        "),a("span",[t._v("\n          "+t._s(void 0!=this.headers.Count?this.headers.Count:0)+"\n        ")])])]),a("div",{staticClass:"d-flx-alc"},[a("div",[t._v(t._s(t.date[0])+" - "+t._s(t.date[1]))])])]),a("div",{staticClass:"inner-main-wrapper"},[a("overlay-scrollbars",{staticClass:"table-wrapper"},[a("figcaption",{staticClass:"sr"},[t._v("\n        A table showing information of categories\n      ")]),a("table",{staticClass:"table-content"},[a("thead",{},[a("tr",[a("th",{staticClass:"large-space column-name"},[t._v("Rider ID")]),a("th",{staticClass:"column-name"},[t._v("Rider Name")]),a("th",{staticClass:"column-name"},[t._v("Order No")]),a("th",{},[t._v("Total Amount (₦)")]),a("th",{},[t._v("Commission Rate (%)")]),a("th",{},[t._v("Amount Due to Ntisa (₦)")]),a("th",{},[t._v("Amount Due to rider (₦)")]),a("th",{staticClass:"column-name"},[t._v("Payment Mode")])])]),a("tbody",{staticClass:"tablebody"},[t.loading?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("No record at the moment")])]):t._e(),t._l(t.filteredList,function(e,r){return!t.loading&&t.filteredList.length>0?a("tr",{key:r,staticClass:"link"},[a("td",{staticClass:"column-name"},[a("span",{staticClass:"column-name"},[t._v(t._s(e.riderID?e.riderID:"N/A"))])]),a("td",{staticClass:"column-name"},[t._v("\n              "+t._s(e.riderfirstname)+" "+t._s(e.riderlastname)+"\n            ")]),a("td",{staticClass:"column-name",staticStyle:{color:"#28a745"}},[t._v("\n              "+t._s(e.ordercode?e.ordercode:"N/A")+"\n            ")]),a("td",{},[t._v("\n              "+t._s(e.ordertotal?t.formatPrice(e.ordertotal):"N/A")+"\n            ")]),a("td",[t._v(t._s(e.commissionrate?e.commissionrate:"N/A"))]),a("td",[t._v("\n              "+t._s(e.amountduetontisa?t.formatPrice(e.amountduetontisa):"N/A")+"\n            ")]),a("td",[t._v("\n              "+t._s(e.amountduetorider?t.formatPrice(e.amountduetorider):"N/A")+"\n            ")]),a("td",{staticClass:"column-name"},[t._v("\n              "+t._s(e.paymentmethod?e.paymentmethod:"N/A")+"\n            ")])]):t._e()})],2)])])],1)])};r._withStripped=!0;var s={render:r,staticRenderFns:[]};e.a=s}});