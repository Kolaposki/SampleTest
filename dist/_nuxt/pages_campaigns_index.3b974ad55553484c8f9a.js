webpackJsonp([32],{DvKD:function(t,a,e){var o=e("Hk/v");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("49c5dff1",o,!1,{sourceMap:!1})},"Hk/v":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,".btn--primary[data-v-4d6a5ebd]{background-color:#089628!important;color:#fff;min-width:10px!important}.btn--edit[data-v-4d6a5ebd]{background-color:blue!important;color:#fff;min-width:10px!important;margin-left:5px}.btn--danger[data-v-4d6a5ebd]{background-color:#dc3545!important;color:#fff;min-width:10px!important;left:5px;position:relative}.btn[data-v-4d6a5ebd]{padding:9.6px 19.2px;padding:.6rem 1.2rem}.tab[data-v-4d6a5ebd]{overflow:hidden;border:.5px solid #eee;background-color:#fff;margin-left:0}button.tab[data-v-4d6a5ebd]{background-color:inherit;float:left;border:1px solid #228b22;outline:none;cursor:pointer;padding:18px 32px;font-weight:600;margin-left:0}button.tab[data-v-4d6a5ebd]:hover{background-color:#f8f8f8;color:#228b22;font-weight:600}.tab button.click[data-v-4d6a5ebd]{min-width:10px!important;height:50px;margin-top:10px}.tab button.click[data-v-4d6a5ebd]:hover{background:#228b22;color:#fff}button.tab.active[data-v-4d6a5ebd]{color:#fff;background-color:#228b22}",""])},SKca:function(t,a,e){"use strict";(function(t){var o,s=e("woOf"),i=e.n(s),r=e("bOdI"),n=e.n(r);a.a={layout:"main",computed:{filteredList:function(){var t=this;return""==this.search?this.rules:this.rules.filter(function(a){return null!==a.loyaltyrule&&a.loyaltyrule.toLowerCase().includes(t.search.toLowerCase())})},promoList:function(){var t=this;return""==this.search?this.promocodes:this.promocodes.filter(function(a){return a.code.toLowerCase().includes(t.search.toLowerCase())||a.title.toLowerCase().includes(t.search.toLowerCase())})}},data:function(){var t;return t={status:"",promoData:{merchID:"",code:"",amount:"",title:"",active:1},promocode:{},options:[{id:1,text:"Activate"},{id:0,text:"Deactivate"}],promoErrorData:{title:"",amount:""},editPromoData:{merchID:"",code:"",amount:"",title:"",active:""},promocodes:[],showLoyaltyRule:!0,showPromoCode:!1,tabs:["Loyalty Points","Promocode"],selectedTab:"Loyalty Points",loading:!0,search:""},n()(t,"status",""),n()(t,"customers",[]),n()(t,"customersList",[]),n()(t,"customerDetails",{}),n()(t,"notifyoptions",[{id:"",text:"Select Customers"},{id:"all",text:"All Customers"}]),n()(t,"settings",{width:"100%"}),n()(t,"notificationData",{id:[],title:"",body:"",type:""}),n()(t,"formData",{merchID:"",loyaltyrule:"",rewardpoint:"",amountspent:"",startdate:"",mininumamount:"",endate:"",status:"True"}),n()(t,"options",[{id:"True",text:"Activate"},{id:"False",text:"Deactivate"}]),n()(t,"errorData",{loyaltyrule:"",rewardpoint:"",amountspent:"",startdate:"",mininumamount:"",endate:""}),n()(t,"errorNotifyData",{id:!1,title:!1,body:!1,type:!1}),n()(t,"editData",{merchID:"",loyaltyrule:"",rewardpoint:"",amountspent:"",mininumamount:"",startdate:"",endate:"",status:"True",id:""}),n()(t,"rules",[]),n()(t,"getData",{id:0,page:1}),n()(t,"deleteRule",{id:""}),t},methods:(o={formatInput:function(){if(""!=this.formData.amountspent){var t=this.formData.amountspent.replace(/,/g,"");"."==t.substr(t.length-1)?this.formData.amountspent=t:isNaN(t)?this.formData.amountspent="":this.formData.amountspent=parseFloat(this.formData.amountspent.replace(/,/g,"")).toLocaleString()}else"NaN"==this.formData.amountspent&&(this.formData.amountspent=0)},formatMinLoyalty:function(){if(""!=this.formData.mininumamount){var t=this.formData.mininumamount.replace(/,/g,"");"."==t.substr(t.length-1)?this.formData.mininumamount=t:isNaN(t)?this.formData.mininumamount="":this.formData.mininumamount=parseFloat(this.formData.mininumamount.replace(/,/g,"")).toLocaleString()}else"NaN"==this.formData.mininumamount&&(this.formData.mininumamount=0)},formatPromoInput:function(){if(""!=this.promoData.amount){var t=this.promoData.amount.replace(/,/g,"");"."==t.substr(t.length-1)?this.promoData.amount=t:isNaN(t)?this.promoData.amount="":this.promoData.amount=parseFloat(this.promoData.amount.replace(/,/g,"")).toLocaleString()}else"NaN"==this.promoData.amount&&(this.promoData.amount=0)},cancelDelete:function(){this.deleteRule.id="",UIkit.modal("#delete-loyalty").toggle("hide")},setupDeleteLoyalty:function(t){this.deleteRule.id=t},displayNotifyModal:function(){UIkit.modal("#send-push-notification").toggle()},closeNotifyModal:function(){this.clearNotifyData(),UIkit.modal("#send-push-notification").toggle()},clearNotifyData:function(){this.notificationData={id:[],title:"",body:"",type:"push"}},getCustomersUnpaginated:function(){var t=this;this.$store.dispatch("customer/getCustomersAll",this.getData).then(function(a){a.data.status&&t.setCustomers(a.data.data)})},setCustomers:function(t){var a=this;t.forEach(function(t){var e={id:t.id,text:t.firstname+" "+t.lastname};a.customersList.push(e),a.notifyoptions.push(e)})},copyLink:function(t){var a=this;this.$copyText(t).then(function(t){a.$toast.success("Code copied to clipboard")},function(t){a.$toast.error("An error occurred.Cannot copy.")})},savePromoCode:function(){var a=this,e=parseFloat(this.promoData.amount.replace(/,/g,""));this.promoData.amount=e;var o={url:"/promocode",method:"post",params:{merchID:this.user.role?this.user.merchID:this.user.id},data:this.promoData};t("#submitBtn").attr("disabled",!0).html("Creating...please wait"),this.$store.dispatch("api/makeAPICall",o).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("+ Create Promocode"),"True"===e.data.status)return a.$toast.success(e.data.message),a.closeAddPromoModal(),void a.listPromocodes();a.$toast.error(e.data.message)}).catch(function(e){t("#submitBtn").attr("disabled",!1).html("+ Create Promocode"),a.$toast.error("An error occurred")})},updatePromocode:function(){var a=this;t("#updateBtn").attr("disabled",!0).html("Updating...please wait"),this.editPromoData.active=1==Number(this.editPromoData.active)?1:0;var e={url:"/promocode",method:"put",params:{merchID:this.user.role?this.user.merchID:this.user.id},data:this.editPromoData};this.$store.dispatch("api/makeAPICall",e).then(function(e){if(t("#updateBtn").attr("disabled",!1).html("+ Update Promocode"),e.data.status)return a.$toast.success(e.data.message),a.closeEditPromoModal(),void a.listPromocodes();a.$toast.error(e.data.message)}).catch(function(e){t("#updateBtn").attr("disabled",!1).html("+ Update Promocode"),a.$toast.error("An error occurred")})},closeAddPromoModal:function(){this.clearErrorpromoData(),this.promoData.title="",this.promoData.amount="",this.promoData.code="",this.promoData.merchID=this.user.id,this.promoData.status="",UIkit.modal("#add-promocode").toggle("hide")},closeEditPromoModal:function(){this.editPromoData={merchID:this.user.id,code:"",title:"",amount:"",status:""},UIkit.modal("#edit-promocode").toggle("hide")},clearErrorpromoData:function(){this.promoErrorData={loyaltyrule:"",rewardpoint:"",amountspent:"",startdate:"",endate:"",status:"True"}},validatePromoAddRule:function(){return this.clearpromoErrorData(),""===this.promoData.title?(this.promoErrorData.title=!0,!0):""===this.promoData.amount&&(this.promoErrorData.amount=!0,!0)},validateNotifyData:function(){return this.clearError(),this.notificationData.id.length<1?(this.errorNotifyData.id=!0,!0):""===this.notificationData.title?(this.errorNotifyData.title=!0,!0):""===this.notificationData.body?(this.errorNotifyData.body=!0,!0):""===this.notificationData.type&&(this.errorNotifyData.type=!0,!0)},clearError:function(){this.errorNotifyData={id:!1,title:!1,body:!1,type:!1}},listPromocodes:function(){var t=this,a={url:"/promocode",method:"get",params:{merchID:this.user.role?this.user.merchID:this.user.id}};this.$store.dispatch("api/makeAPICall",a).then(function(a){t.loading=!1,t.promocodes=a.data.data})},displayCreatePromoModal:function(){this.promoData.code=this.generateRefNumber(6).toUpperCase(),UIkit.modal("#add-promocode").toggle()},checkDate:function(t){return this.$moment().isAfter(t)},editPromocode:function(t){this.promocode=t,this.editPromoData={merchID:this.user.id,amount:t.amount,code:t.code,title:t.title,startdate:t.startdate,endate:t.endate,active:1==t.active?1:0,id:t.id},UIkit.modal("#edit-promocode").toggle()},setTab:function(t){this.selectedTab=t,"Loyalty Points"==t?(this.showPromoCode=!1,this.showLoyaltyRule=!0):(this.showPromoCode=!0,this.showLoyaltyRule=!1)},saveLoyaltyRule:function(){var a=this;if(!this.validateAddRule()){var e=parseFloat(this.formData.amountspent.replace(/,/g,""));this.formData.amountspent=e;var o=parseFloat(this.formData.mininumamount.replace(/,/g,""));this.formData.mininumamount=o,t("#submitBtn").attr("disabled",!0).html("Creating...please wait"),this.$store.dispatch("loyalty-rule/createRule",this.formData).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("Create loyalty rule"),"True"===e.data.status)return a.$toast.success(e.data.message),a.closeAddModal(),void a.listLoyaltyRule();a.$toast.error(e.data.message)}).catch(function(e){t("#submitBtn").attr("disabled",!1).html("Create loyalty rule"),a.$toast.error("An error occurred")})}},deleteLoyaltyRule:function(){var a=this;t("#deleteBtn").attr("disabled",!0).html("Deleting..."),this.$store.dispatch("loyalty-rule/deleteRule",this.deleteRule).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("Delete"),e.data.status)return a.$toast.success(e.data.message),a.cancelDelete(),void a.listLoyaltyRule();a.$toast.error(e.data.message)}).catch(function(e){t("#deleteBtn").attr("disabled",!1).html("Delete"),a.$toast.error("An error occurred")})},updateLoyaltyRule:function(){var a=this;this.validateUpdateRule()||(t("#updateBtn").attr("disabled",!0).html("Updating...please wait"),this.$store.dispatch("loyalty-rule/updateRule",this.editData).then(function(e){if(t("#updateBtn").attr("disabled",!1).html("+ Update loyalty rule"),e.data.status)return a.$toast.success(e.data.message),a.closeEditModal(),void a.listLoyaltyRule();a.$toast.error(e.data.message)}).catch(function(e){t("#updateBtn").attr("disabled",!1).html("+ Update loyalty rule"),a.$toast.error("An error occurred")}))},closeAddModal:function(){this.clearErrorData(),this.formData.loyaltyrule="",this.formData.rewardpoint="",this.formData.amountspent="",this.formData.startdate="",this.formData.endate="",this.formData.mininumamount="",this.formData.status="True",UIkit.modal("#add-loyalty-rule").toggle("hide")},closeEditModal:function(){this.editData={merchID:"",loyaltyrule:"",rewardpoint:"",amountspent:"",startdate:"",mininumamount:"",endate:"",status:"True"},UIkit.modal("#edit-loyalty-rule").toggle("hide")},clearErrorData:function(){this.errorData={loyaltyrule:"",rewardpoint:"",amountspent:"",startdate:"",endate:"",mininumamount:"",status:"True"}},validateAddRule:function(){return this.clearErrorData(),""===this.formData.loyaltyrule?(this.errorData.loyaltyrule=!0,!0):""===this.formData.mininumamount?(this.errorData.mininumamount=!0,!0):""===this.formData.rewardpoint?(this.errorData.rewardpoint=!0,!0):""===this.formData.amountspent?(this.errorData.amountspent=!0,!0):""===this.formData.startdate?(this.errorData.startdate=!0,!0):""===this.formData.endate&&(this.errorData.endate=!0,!0)},validateUpdateRule:function(){return this.clearErrorData(),""===this.editData.loyaltyrule?(this.errorData.loyaltyrule=!0,!0):""===this.editData.mininumamount?(this.errorData.mininumamount=!0,!0):""===this.editData.rewardpoint?(this.errorData.rewardpoint=!0,!0):""===this.editData.amountspent?(this.errorData.amountspent=!0,!0):""===this.editData.startdate?(this.errorData.startdate=!0,!0):""===this.editData.endate&&(this.errorData.endate=!0,!0)},listLoyaltyRule:function(){var t=this;this.$store.dispatch("loyalty-rule/listRules",this.formData.merchID).then(function(a){t.loading=!1,t.rules=a.data.data})},displayCreateModal:function(){UIkit.modal("#add-loyalty-rule").toggle()}},n()(o,"checkDate",function(t){return this.$moment().isAfter(t)}),n()(o,"editLoyalty",function(t){this.editData={merchID:this.formData.merchID,loyaltyrule:t.loyaltyrule,rewardpoint:t.rewardpoint,amountspent:t.amountspent,startdate:t.startdate,mininumamount:t.mininumamount,endate:t.endate,status:!0===t.status?"True":"False",id:t.id},this.status=!0===t.status?"True":"False",UIkit.modal("#edit-loyalty-rule").toggle()}),n()(o,"submitNotification",function(){var a=this;if(!this.validateNotifyData()){var e=this.notificationData.id;e.includes("all")&&(e=[],this.customersList.forEach(function(t){e.push(t.id)}));var o=e.map(function(t){return parseInt(t,10)}),s=i()({},this.notificationData);s.id=o,t("#submitBtn").attr("disabled",!0).html("Sending...Please wait"),"push"===s.type&&(s.url="/API/pushnotification/"),this.$store.dispatch("customer/sendPushNotification",s).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("Send Notification"),e.data.status)return a.$toast.success("notification sent"),void a.closeNotifyModal();a.$toast.error(e.data.message)}).catch(function(e){t("#submitBtn").attr("disabled",!1).html("Send Notification"),a.$toast.error("An error occurred")})}}),o),mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.promoData.merchID=this.user.role?this.user.merchID:this.user.id,this.getData.id=this.user.role?this.user.merchID:this.user.id,this.listLoyaltyRule(),this.listPromocodes(),this.getCustomersUnpaginated()},beforeRouteEnter:function(t,a,e){var o=JSON.parse(localStorage.getItem("user"));void 0==o.role||o.rolepermission&&o.rolepermission[0].campaigns.viewcampaign?e():(alert("You have not been permitted to view this page"),e({path:"/dashboard"}))}}}).call(a,e("7t+N"))},bOdI:function(t,a,e){"use strict";a.__esModule=!0;var o=function(t){return t&&t.__esModule?t:{default:t}}(e("C4MV"));a.default=function(t,a,e){return a in t?(0,o.default)(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},udpq:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("SKca"),s=e("xb1h"),i=!1;var r=function(t){i||e("DvKD")},n=e("VU/8")(o.a,s.a,!1,r,"data-v-4d6a5ebd",null);n.options.__file="pages/campaigns/index.vue",a.default=n.exports},xb1h:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("div",{staticClass:"d-flx-alc-jsb page-extras py-0"},[t._l(t.tabs,function(a,o){return e("button",{key:o,staticClass:"tab",class:t.selectedTab==a?"active":"",on:{click:function(e){return t.setTab(a)}}},[t._v(" "+t._s(a))])}),e("div",{staticClass:"search-filter d-flx-alc-jfe"},[t.user.rolepermission&&t.user.rolepermission[0].notifications.sendnotifications||t.isMerchant?e("button",{staticClass:"btn btn--primary click mr-2",on:{click:t.displayNotifyModal}},[e("svg",[e("use",{attrs:{"xlink:href":"/uploads/icons.svg#bell-btn"}})]),e("span",{staticClass:"ml-1"},[t._v("Send Notifications")])]):t._e()])],2),e("div",{attrs:{id:"parent-component"}},[e("div",{attrs:{id:"send-push-notification","uk-modal":"","data-uk-modal":"{target:'#send-push-notification',bgclose:false}",container:"#parent-component"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.closeNotifyModal}},[t._v("X")]),e("div",{staticClass:"modal-header"},[e("h2",[t._v(" Notification message")]),e("p",[t._v("Create notifications to be sent to customers.")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.submitNotification.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body"},[e("div",{staticClass:"form-input"},[e("label",{staticClass:"form-input__label"},[t._v("Notification Medium")]),e("div",{staticClass:"form-input__input"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.notificationData.type,expression:"notificationData.type"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.notificationData,"type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("Select a notification type")]),e("option",{attrs:{value:"push"}},[t._v("Push Notifications")])])]),t.errorNotifyData.type?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a medium")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Notification Subject")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.notificationData.title,expression:"notificationData.title"}],attrs:{type:"text",placeholder:"Buy 2 and get one free!"},domProps:{value:t.notificationData.title},on:{input:function(a){a.target.composing||t.$set(t.notificationData,"title",a.target.value)}}})]),t.errorNotifyData.title?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a title")]):t._e()]),e("div",{staticClass:"form-input"},[e("label",{staticClass:"form-input__label"},[t._v("Notification body")]),e("div",{staticClass:"form-input__input"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notificationData.body,expression:"notificationData.body"}],attrs:{rows:"5",placeholder:"Enter"},domProps:{value:t.notificationData.body},on:{input:function(a){a.target.composing||t.$set(t.notificationData,"body",a.target.value)}}})]),t.errorNotifyData.body?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a message body")]):t._e()]),e("div",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Select customers")]),e("div",{staticClass:"form-input__input"},[e("select2-multiple-control",{attrs:{placeholder:"Select as least one customer",options:t.notifyoptions,settings:t.settings},model:{value:t.notificationData.id,callback:function(a){t.$set(t.notificationData,"id",a)},expression:"notificationData.id"}})],1),t.errorNotifyData.id?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select a customer")]):t._e()])]),e("div",{staticClass:"d-flx-alc-jfe mt-3"},[e("button",{staticClass:"btn btn-no-fill uk-modal-close",attrs:{type:"button"},on:{click:t.closeNotifyModal}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                Send Notification\n              ")])])],1)])]),e("div",{attrs:{container:"#parent-component",id:"add-loyalty-rule","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeAddModal}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Create Loyalty Points")]),e("p",[t._v("Create milestones your customers should reach and give them a reward for reaching the milestone. ")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.saveLoyaltyRule.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-1 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Loyalty Rule name")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.loyaltyrule,expression:"formData.loyaltyrule"}],attrs:{type:"text"},domProps:{value:t.formData.loyaltyrule},on:{input:function(a){a.target.composing||t.$set(t.formData,"loyaltyrule",a.target.value)}}})]),t.errorData.loyaltyrule?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a rule")]):t._e()])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Amount to be spent (₦)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.amountspent,expression:"formData.amountspent"}],attrs:{type:"text"},domProps:{value:t.formData.amountspent},on:{keyup:t.formatInput,input:function(a){a.target.composing||t.$set(t.formData,"amountspent",a.target.value)}}})]),t.errorData.amountspent?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter an amount")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Reward")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.rewardpoint,expression:"formData.rewardpoint"}],attrs:{type:"text"},domProps:{value:t.formData.rewardpoint},on:{input:function(a){a.target.composing||t.$set(t.formData,"rewardpoint",a.target.value)}}})]),t.errorData.rewardpoint?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a reward point")]):t._e()])]),e("div",{staticClass:"flex-width-1-1 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Minimum Loyalty point (₦)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.mininumamount,expression:"formData.mininumamount"}],attrs:{type:"text"},domProps:{value:t.formData.mininumamount},on:{keyup:t.formatMinLoyalty,input:function(a){a.target.composing||t.$set(t.formData,"mininumamount",a.target.value)}}})]),t.errorData.mininumamount?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select a minimum point")]):t._e()])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Start Date")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.startdate,expression:"formData.startdate"}],attrs:{type:"date"},domProps:{value:t.formData.startdate},on:{input:function(a){a.target.composing||t.$set(t.formData,"startdate",a.target.value)}}})]),t.errorData.startdate?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select a start date")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("End Date")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.endate,expression:"formData.endate"}],attrs:{type:"date"},domProps:{value:t.formData.endate},on:{input:function(a){a.target.composing||t.$set(t.formData,"endate",a.target.value)}}})]),t.errorData.endate?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select an end date")]):t._e()])])]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:t.closeAddModal}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                Create loyalty points\n              ")])])],1)])]),e("div",{attrs:{container:"#parent-component",id:"add-promocode","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeAddPromoModal}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Create Promocode")]),e("p",[t._v("Promo Codes to be used on the POS")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.savePromoCode.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Promocode Title")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.promoData.title,expression:"promoData.title"}],attrs:{type:"text",required:""},domProps:{value:t.promoData.title},on:{input:function(a){a.target.composing||t.$set(t.promoData,"title",a.target.value)}}})]),t.promoErrorData.title?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a title")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Code")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.promoData.code,expression:"promoData.code"}],attrs:{type:"text",required:"",disabled:""},domProps:{value:t.promoData.code},on:{input:function(a){a.target.composing||t.$set(t.promoData,"code",a.target.value)}}})])])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Reward Amount")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.promoData.amount,expression:"promoData.amount"}],attrs:{type:"text",required:""},domProps:{value:t.promoData.amount},on:{keyup:t.formatPromoInput,input:function(a){a.target.composing||t.$set(t.promoData,"amount",a.target.value)}}})]),t.promoErrorData.amount?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter an amount")]):t._e()])])]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:t.closeAddPromoModal}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                + Create Promocode\n              ")])])],1)])]),e("div",{attrs:{container:"#parent-component",id:"edit-promocode","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeEditPromoModal}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Update Promocode")]),e("p",[t._v("Update Promocode details.")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.updatePromocode.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Promocode Title")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPromoData.title,expression:"editPromoData.title"}],attrs:{type:"text",required:""},domProps:{value:t.editPromoData.title},on:{input:function(a){a.target.composing||t.$set(t.editPromoData,"title",a.target.value)}}})]),t.errorData.title?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a title")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Code")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPromoData.code,expression:"editPromoData.code"}],attrs:{type:"text",required:"",disabled:""},domProps:{value:t.editPromoData.code},on:{input:function(a){a.target.composing||t.$set(t.editPromoData,"code",a.target.value)}}})])])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Amount")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPromoData.amount,expression:"editPromoData.amount"}],attrs:{min:"0",onkeypress:"return event.charCode >= 48",type:"text",required:""},domProps:{value:t.editPromoData.amount},on:{input:function(a){a.target.composing||t.$set(t.editPromoData,"amount",a.target.value)}}})])])]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Status")]),e("div",{staticClass:"form-input__input"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editPromoData.active,expression:"editPromoData.active"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editPromoData,"active",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("Deactivate")]),e("option",{attrs:{value:"1"}},[t._v("Activate")])])])])]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeEditPromoModal}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"updateBtn",type:"submit"}},[t._v("\n                + Update Promocode\n              ")])])],1)])]),e("div",{attrs:{id:"delete-loyalty","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#delete-loyalty',bgclose:false}"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"}},[t._v("\n            X\n          ")]),e("div",{staticClass:"modal-header d-flx"},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#co-delete"}})]),e("div",{staticClass:"ml-1"},[e("h2",[t._v("Delete Loyalty ?")]),e("p",[t._v("\n                Please confirm you really want to delete this loyalty rule?\n              ")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"d-flx-alc-jc mt-3"},[e("button",{staticClass:"btn btn-no-fill",on:{click:function(a){return t.cancelDelete()}}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn-error ml-2",attrs:{id:"deleteBtn"},on:{click:function(a){return t.deleteLoyaltyRule()}}},[t._v("\n                Delete\n              ")])])])])]),e("div",{attrs:{container:"#parent-component",id:"edit-loyalty-rule","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeEditModal}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Update Loyalty")]),e("p",[t._v("Update Loyalty Points details.")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.updateLoyaltyRule.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-1 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Loyalty rule name")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.loyaltyrule,expression:"editData.loyaltyrule"}],attrs:{type:"text"},domProps:{value:t.editData.loyaltyrule},on:{input:function(a){a.target.composing||t.$set(t.editData,"loyaltyrule",a.target.value)}}})]),t.errorData.loyaltyrule?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a rule")]):t._e()])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Amount to be spent (₦)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.amountspent,expression:"editData.amountspent"}],attrs:{type:"text"},domProps:{value:t.editData.amountspent},on:{input:function(a){a.target.composing||t.$set(t.editData,"amountspent",a.target.value)}}})]),t.errorData.amountspent?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter an amount")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Reward")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.rewardpoint,expression:"editData.rewardpoint"}],attrs:{type:"text"},domProps:{value:t.editData.rewardpoint},on:{input:function(a){a.target.composing||t.$set(t.editData,"rewardpoint",a.target.value)}}})]),t.errorData.rewardpoint?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a reward point")]):t._e()])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Minimum Loyalty Point (₦)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.mininumamount,expression:"editData.mininumamount"}],attrs:{type:"text"},domProps:{value:t.editData.mininumamount},on:{input:function(a){a.target.composing||t.$set(t.editData,"mininumamount",a.target.value)}}})]),t.errorData.mininumamount?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select a minimum point")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Status")]),e("div",{staticClass:"form-input__input"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editData.status,expression:"editData.status"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editData,"status",a.target.multiple?e:e[0])}}},["True"==t.status?e("option",{attrs:{value:"True"}},[t._v("Reactivate")]):t._e(),t._l(t.options,function(a,o){return t.status!==a.id?e("option",{key:o,domProps:{value:a.id}},[t._v(t._s(a.text))]):t._e()})],2)])])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Start Date")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.startdate,expression:"editData.startdate"}],attrs:{type:"date"},domProps:{value:t.editData.startdate},on:{input:function(a){a.target.composing||t.$set(t.editData,"startdate",a.target.value)}}})]),t.errorData.startdate?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select a start date")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("End Date")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.endate,expression:"editData.endate"}],attrs:{type:"date"},domProps:{value:t.editData.endate},on:{input:function(a){a.target.composing||t.$set(t.editData,"endate",a.target.value)}}})]),t.errorData.endate?e("span",{staticClass:"form-input__error-msg"},[t._v("Please select an end date")]):t._e()])])]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeEditModal}},[t._v("\n                Cancel\n              ")]),t.user.rolepermission&&t.user.rolepermission[0].campaigns.updateloyaltyrule||t.isMerchant?e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"updateBtn",type:"submit"}},[t._v("\n                Update loyalty rule\n              ")]):t._e()])],1)])])]),t.showLoyaltyRule?e("div",{staticClass:"inner-main-wrapper"},[e("div",{staticClass:"page-extras"},[e("div",{staticClass:"search-filter d-flx-alc-jfe"},[t.user.rolepermission&&t.user.rolepermission[0].campaigns.createloyalty||t.isMerchant?e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.displayCreateModal}},[t._v("\n\t\t\t\t Create loyalty points\n\t\t\t\t")]):t._e()])]),e("overlay-scrollbars",{staticClass:"table-wrapper"},[e("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),e("table",{staticClass:"table-content"},[e("thead",{},[e("tr",[e("th",{staticClass:"column-name"},[t._v("Loyalty Rule Name")]),e("th",{staticClass:"column-name"},[t._v("Amount To Be Spent (₦)")]),e("th",{staticClass:"column-name",staticStyle:{width:"10%"}},[t._v("Reward")]),e("th",{staticClass:"column-name"},[t._v("Minimum Loyalty Point (₦)")]),e("th",{staticClass:"column-name"},[t._v("Start Date")]),e("th",{staticClass:"column-name"},[t._v("End Date")]),(t.user.rolepermission&&t.user.rolepermission[0].campaigns.updateloyaltyrule||t.user.rolepermission?t.user.rolepermission[0].campaigns.deleteloyaltyrule:t.isMerchant)?e("th",[t._v("Action")]):t._e()])]),e("tbody",{staticClass:"tablebody"},[t.loading?e("tr",[e("td",{attrs:{colspan:"8"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?e("tr",[e("td",{attrs:{colspan:"8"}},[t._v("No loyalty point rule have been created")])]):t._e(),t._l(t.filteredList,function(a,o){return!t.loading&&t.filteredList.length>0?e("tr",{key:o},[e("td",{staticClass:"column-name"},[t._v(t._s(a.loyaltyrule))]),e("td",{staticClass:"column-name"},[t._v(t._s(t.formatPrice(a.amountspent)))]),e("td",{staticClass:"column-name"},[t._v(t._s(a.rewardpoint))]),e("td",{staticClass:"column-name"},[t._v(t._s(t.formatPrice(a.mininumamount)))]),e("td",{staticClass:"column-name"},[t._v(t._s(t.$moment(a.startdate).format("Do MMM YYYY")))]),e("td",{staticClass:"column-name"},[t._v(t._s(t.$moment(a.endate).format("Do MMM YYYY")))]),(t.user.rolepermission&&t.user.rolepermission[0].campaigns.updateloyaltyrule||t.user.rolepermission?t.user.rolepermission[0].campaigns.deleteloyaltyrule:t.isMerchant)?e("td",{staticClass:"d-flx-alc"},[t.user.rolepermission&&t.user.rolepermission[0].campaigns.updateloyaltyrule||t.isMerchant?e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:function(e){return t.editLoyalty(a)}}},[t._v("\n                Edit \n              ")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].campaigns.deleteloyaltyrule||t.isMerchant?e("button",{staticClass:"btn btn--danger",attrs:{title:"Delete",type:"button","uk-toggle":"target: #delete-loyalty"},on:{click:function(e){return t.setupDeleteLoyalty(a.id)}}},[t._v("\n                Delete \n              ")]):t._e()]):t._e()]):t._e()})],2)])])],1):t._e(),t.showPromoCode?e("div",{staticClass:"inner-main-wrapper"},[e("div",{staticClass:"page-extras"},[e("div",{staticClass:"search-filter d-flx-alc-jfe"},[t.user.rolepermission&&t.user.rolepermission[0].campaigns.createpromocode||t.isMerchant?e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.displayCreatePromoModal}},[t._v("\n\t\t\t\t \tCreate Promocode\n\t\t\t\t")]):t._e()])]),e("overlay-scrollbars",{staticClass:"table-wrapper"},[e("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),e("table",{staticClass:"table-content"},[e("thead",{},[e("tr",[e("th",{staticClass:"column-name"},[t._v("Title")]),e("th",{staticClass:"column-name"},[t._v("Code")]),e("th",[t._v("Reward Amount (₦)")]),(t.user.rolepermission&&t.user.rolepermission[0].campaigns.editpromocode||t.user.rolepermission?t.user.rolepermission[0].campaigns.sharepromocode:t.isMerchant)?e("th",[t._v("Action")]):t._e()])]),e("tbody",{staticClass:"tablebody"},[t.loading?e("tr",[e("td",{attrs:{colspan:"8"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.promoList.length<1?e("tr",[e("td",{attrs:{colspan:"8"}},[t._v("No promocode have been created")])]):t._e(),t._l(t.promoList,function(a,o){return!t.loading&&t.promoList.length>0?e("tr",{key:o},[e("td",{staticClass:"column-name"},[t._v(t._s(a.title))]),e("td",{staticClass:"column-name",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.preventDefault(),t.copyLink(a.code)}}},[t._v(t._s(a.code))]),e("td",[t._v(t._s(t.formatPrice(a.amount)))]),(t.user.rolepermission&&t.user.rolepermission[0].campaigns.editpromocode||t.user.rolepermission?t.user.rolepermission[0].campaigns.sharepromocode:t.isMerchant)?e("td",{staticClass:"d-flx-alc"},[t.user.rolepermission&&t.user.rolepermission[0].campaigns.editpromocode||t.isMerchant?e("button",{staticClass:"btn btn--danger mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editPromocode(a)}}},[t._v("\n\t\t\t\t\tEdit \n\t\t\t\t")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].campaigns.sharepromocode||t.isMerchant?e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.copyLink(a.code)}}},[t._v("\n\t\t\t\t\tShare \n\t\t\t\t")]):t._e()]):t._e()]):t._e()})],2)])])],1):t._e()])};o._withStripped=!0;var s={render:o,staticRenderFns:[]};a.a=s}});