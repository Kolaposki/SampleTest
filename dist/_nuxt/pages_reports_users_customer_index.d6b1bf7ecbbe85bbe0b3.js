webpackJsonp([67],{GM7c:function(t,a,s){"use strict";a.a={layout:"main",computed:{filteredList:function(){var t=this;return this.reports.filter(function(a){return a.firstname.toLowerCase().includes(t.search.toLowerCase())?a.firstname.toLowerCase().includes(t.search.toLowerCase()):a.lastname.toLowerCase().includes(t.search.toLowerCase())?a.lastname.toLowerCase().includes(t.search.toLowerCase()):a.emailaddress.toLowerCase().includes(t.search.toLowerCase())})}},data:function(){return{loading:!0,reports:[],search:"",date:"",formData:{merchID:"",page:1,startdate:"",enddate:""},headers:{Next:"",Prev:"",count:0},json_fields:{"CUSTOMER NAME":"customername",CONTACT:"contact",EMAIL:"email",RATING:"rating","FIRST ORDER DATE":"firstorderdate","LAST ORDER DATE":"lastorderdate"},json_data:[]}},methods:{nextData:function(){if(""!==this.headers.Next){var t=+this.formData.page+1;this.formData.page=t,this.getCustomerReport()}},previousData:function(){if(""!==this.headers.Prev){var t=+this.formData.page-1;t<0?this.formData.page=1:(this.formData.page=t,this.getCustomerReport())}},getCustomerReport:function(){var t=this;this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate=""),this.$store.dispatch("usersreport/getCustomerReport",this.formData).then(function(a){if(a.data.status){t.reports=a.data.data.data,t.headers={Next:a.data.data.Next,Prev:a.data.data.Prev,count:a.data.data.Count};var s=[],e=t.$moment;return a.data.data.length>0&&(t.reports.forEach(function(t){var a={customername:t.firstname+" "+t.lastname,contact:t.phonenumber,email:t.emailaddress,rating:t.userrate,firstorderdate:e(t.firstorderdate).format("Do MMMM, YYYY"),lastorderdate:e(t.lastorderdate).format("Do MMMM, YYYY")};s.push(a)}),t.json_data=s),void(t.loading=!1)}t.loading=!1,t.$toast.error("An error occurred! Please try again")}).catch(function(a){t.loading=!1,t.$toast.error("An error occurred "+a)})},sortCustomerReport:function(){var t=this;this.loading=!0,""!==this.date&&null!=this.date[0]?(this.formData.startdate=this.$moment(this.date[0]).format("YYYY-MM-DD"),this.formData.enddate=this.$moment(this.date[1]).format("YYYY-MM-DD")):(this.formData.startdate="",this.formData.enddate=""),this.formData.page=1,this.$store.dispatch("usersreport/getCustomerReport",this.formData).then(function(a){if(a.data.status){t.reports=a.data.data.data,t.headers={Next:a.data.data.Next,Prev:a.data.data.Prev,count:a.data.data.Count};var s=[],e=t.$moment;return a.data.data.length>0&&(t.reports.forEach(function(t){var a={customername:t.firstname+" "+t.lastname,contact:t.phonenumber,email:t.emailaddress,rating:t.userrate,firstorderdate:e(t.firstorderdate).format("Do MMMM, YYYY"),lastorderdate:e(t.lastorderdate).format("Do MMMM, YYYY")};s.push(a)}),t.json_data=s),void(t.loading=!1)}t.loading=!1,t.$toast.error("An error occurred! Please try again")}).catch(function(a){t.loading=!1,t.$toast.error("An error occurred "+a)})},viewCustomerDetails:function(t){localStorage.removeItem("customer"),this.$store.dispatch("customers/setCustomer",t),this.$router.push("/customers/details/"+t.id)}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getCustomerReport()}}},PTZn:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("overlay-scrollbars",{staticClass:"main-content-wrap"},[s("div",{staticClass:"d-flx-alc-jsb page-extras"},[s("nuxt-link",{staticClass:"text-link",attrs:{to:"/reports"}},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#back"}})]),s("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),s("div",{staticClass:"search-filter d-flx-alc-jfe"},[s("label",{staticClass:"search-w-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),s("div",{staticClass:"drop-down page-drop"},[s("date-picker",{attrs:{range:"",placeholder:"Date Range",type:"datetime"},on:{change:t.getCustomerReport},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),s("download-excel",{staticClass:"btn btn--primary",attrs:{data:t.json_data,fields:t.json_fields,worksheet:"My Worksheet",name:"customer-list-report.xls"}},[t._v("\n          Export\n        ")])],1)],1),s("div",{staticClass:"d-flx-alc-jsb page-extras"},[s("div",{staticClass:"drop-down page-drop"},[s("button",{staticClass:"btn-text ",attrs:{type:"button"}},[t._v("\n          Showing "),s("span",[t._v(" 1-20 ")]),t._v(" of "),s("span",[t._v(" "+t._s(this.headers.count)+" ")])])]),s("div",{staticClass:"d-flx-alc"},[s("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.previousData}},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#arrow-right"}})])]),s("button",{staticClass:"btn btn-icon smallsvg",on:{click:t.nextData}},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#arrow-left"}})])])])]),s("div",{staticClass:"inner-main-wrapper"},[s("overlay-scrollbars",{staticClass:"table-wrapper"},[s("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),s("table",{staticClass:"table-content"},[s("thead",{},[s("tr",[s("th",{staticClass:" small-space "},[t._v("Image")]),s("th",{staticClass:" large-space "},[t._v("Name")]),s("th",{staticClass:"large-space"},[t._v("Mobile")]),s("th",{staticClass:"larger-space"},[t._v("Email")]),s("th",{staticClass:"large-space"},[t._v("Ist order")]),s("th",{staticClass:"small-space"},[t._v("Total order")]),s("th",{staticClass:"large-space"},[t._v("Last order")])])]),s("tbody",{staticClass:"tablebody"},[t.loading?s("tr",[s("td",{attrs:{colspan:"8"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?s("tr",[s("td",{attrs:{colspan:"8"}},[t._v("No customer record have been added")])]):t._e(),t._l(t.filteredList,function(a,e){return!t.loading&&t.filteredList.length>0?s("tr",{key:e,on:{click:function(s){return t.viewCustomerDetails(a)}}},[s("td",[s("a",{staticClass:"avatar-wtext",attrs:{href:"javascript:;"}},[""===a.profilelink||null===a.profilelink||"http://68.65.121.57:8080/"===a.profilelink?s("img",{attrs:{src:"/default_image.png",alt:""}}):a.profilelink.includes("http://")&&a.profilelink.includes("https://")?s("img",{attrs:{src:a.profilelink.replace("http://68.65.121.57:8080/",""),alt:""}}):s("img",{attrs:{src:a.profilelink,alt:""}})])]),s("td",[t._v(t._s(a.firstname)+" "+t._s(a.lastname))]),s("td",[t._v(t._s(a.phonenumber))]),s("td",{staticClass:"email"},[t._v(t._s(a.emailaddress))]),s("td",[t._v(t._s(t.$moment(a.firstorderdate).format("Do, MMM YYYY")))]),s("td",{staticClass:"text-center"},[t._v(t._s(a.customeorderhistory.length))]),s("td",[t._v(t._s(t.$moment(a.lastorderdate).format("Do, MMM YYYY")))])]):t._e()})],2)])]),s("div",{attrs:{id:"order-details","uk-modal":""}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("\n              Order Details\n              "),s("span",{staticClass:"status ready"},[t._v("Ready")])]),s("p",{staticClass:"d-flx"},[s("span",{staticClass:"review"},[t._v("NT2838")])])]),s("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[s("div",{staticClass:"d-flx-jsb"},[s("div",{staticClass:"text-img order-modal"},[s("img",{staticClass:"text-img__img",attrs:{src:"/uploads/user.png",alt:""}}),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"uppercase co-grey fw-medium font-14"},[t._v("\n                    Customer info\n                  ")]),s("p",{staticClass:"fw-medium font-16 co-rich-black"},[t._v("Grace Cole")]),s("p",{staticClass:"font-16 co-rich-black"},[t._v("08178293784")])])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-medium font-14"},[t._v("\n                  Delivery address\n                ")]),s("p",{staticClass:"width-80-pc co-rich-black"},[t._v("\n                  Muritala Mohammed Airport Terminal 2, Airport Road, Ikeja, Lagos.\n                ")])])]),s("table",{staticClass:"table-content order-list"},[s("tbody",{staticClass:"tablebody"},[s("tr",[s("td",[s("div",{staticClass:"text-img alt"},[s("img",{staticClass:"text-img__img",attrs:{src:"/uploads/food.png",alt:""}}),s("div",{staticClass:"text-img__content"},[s("h3",{staticClass:"fw-medium"},[t._v("\n                        Chocolate Chip Cookies\n                      ")]),s("p",[t._v("₦ 500.00")])])])]),s("td",[s("span",{staticClass:"quantity"},[t._v("6")])]),s("td",[t._v(" ₦ 3000.00")])]),s("tr",[s("td",[s("div",{staticClass:"text-img alt"},[s("img",{staticClass:"text-img__img",attrs:{src:"/uploads/food.png",alt:""}}),s("div",{staticClass:"text-img__content"},[s("h3",{staticClass:"fw-medium"},[t._v("\n                        Chocolate Chip Cookies\n                      ")]),s("p",[t._v("₦ 500.00")])])])]),s("td",[s("span",{staticClass:"quantity"},[t._v("6")])]),s("td",[t._v(" ₦ 3000.00")])]),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"co-lgray tx-r font-16",attrs:{colspan:"2"}},[t._v("Sub total")]),s("td",{staticClass:"fw-medium co-lgray"},[t._v("₦ 8500.00")])]),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"co-lgray tx-r font-16",attrs:{colspan:"2"}},[t._v("Tax")]),s("td",{staticClass:"fw-medium co-lgray"},[t._v("₦ 8500.00")])]),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"font-20 fw-bold tx-r",attrs:{colspan:"2"}},[t._v("Total")]),s("td",{staticClass:"font-20 fw-bold"},[t._v("₦ 8500.00")])])])]),s("div",{staticClass:"flex-width-1-2-nr mt-1"},[s("div",[s("h3",{staticClass:"mb-2 big-text"},[t._v("Assigned Rider")]),s("div",{staticClass:"text-img order-modal"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"text-img__img round",attrs:{src:"/uploads/user.png",alt:""}}),s("p",{staticClass:"rating"},[s("span",[t._v("4.7")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#star"}})])])]),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("\n                      Kola Kamsiyonna\n                    ")]),s("p",[t._v("08178293784")]),s("p",[t._v("AX 398 ENU")])])])]),s("div",[s("h3",{staticClass:"mb-2 big-text"},[t._v("Responding Staff")]),s("div",{staticClass:"text-img order-modal"},[s("img",{staticClass:"text-img__img round",attrs:{src:"/uploads/user.png",alt:""}}),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("\n                      Customer info\n                    ")]),s("p",[t._v("08178293784")]),s("p",[t._v("Grace Cole")])])])])])])])])],1)])};e._withStripped=!0;var r={render:e,staticRenderFns:[]};a.a=r},gM2J:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("GM7c"),r=s("PTZn"),o=s("VU/8")(e.a,r.a,!1,null,null,null);o.options.__file="pages/reports/users/customer/index.vue",a.default=o.exports}});