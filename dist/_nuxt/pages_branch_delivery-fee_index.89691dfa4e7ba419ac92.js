webpackJsonp([55],{IspC:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"button{font-size:medium}.btn--danger{background-color:#dc3545;color:#fff}",""])},Pf0t:function(e,t,a){"use strict";(function(e){t.a={layout:"main",computed:{isCourierService:function(){return null!==this.userData.businessdescription&&this.userData.businessdescription.toLowerCase().includes("delivery")},userData:function(){return this.$store.getters["authenticate/getUserData"]}},data:function(){return{formData:{merchID:"",branchID:"",deliveryfee:[]},deliveryFeeData:[{startdistance:"",enddistance:"",minweight:"",maxweight:"",amount:0,flatfee:0,deliverymethod:"",merchID:"",branchID:"",deliverytype:"",isdistancebased:!1,isweightbased:!1,isflatbased:!1,amountDiv:!0,flatFeeDiv:!1}],deliveryFee:[],courierOptions:[{id:"pool",text:"Pool"},{id:"express",text:"Express"}],options:[{id:"isdistancebased",text:"Distance based"},{id:"isflatbased",text:"Flat rate based"}],branch:""}},methods:{creatDeliveryFee:function(){var t=this;this.formData.deliveryfee=this.deliveryFeeData,this.isCourierService||(this.formData.deliveryfee.deliverymethod=""),e("#submitBtn").attr("disabled",!0).html("Creating...please wait"),this.$store.dispatch("branches/saveDeliveryFee",this.formData).then(function(a){if(e("#submitBtn").attr("disabled",!1).html("+ Create delivery fee(s)"),a.data.status)return t.$toast.success(a.data.message),t.clearForm(),void t.$router.push("/branch");t.$toast.error("An error occurred")}).catch(function(t){e("#submitBtn").attr("disabled",!1).html("+ Create delivery fee(s)"),console.log(t)})},mySelectEvent:function(e,t){var a=e.id;e.text;this.deliveryFeeData[t].merchID=this.formData.merchID,this.deliveryFeeData[t].branchID=this.formData.branchID,"isdistancebased"===a?(this.deliveryFeeData[t].isdistancebased=!0,this.deliveryFeeData[t].isweightbased=!1,this.deliveryFeeData[t].isflatbased=!1,this.deliveryFeeData[t].amountDiv=!0,this.deliveryFeeData[t].flatFeeDiv=!1):"isweightbased"===a?(this.deliveryFeeData[t].isdistancebased=!1,this.deliveryFeeData[t].isweightbased=!0,this.deliveryFeeData[t].isflatbased=!1,this.deliveryFeeData[t].amountDiv=!0,this.deliveryFeeData[t].flatFeeDiv=!1):(this.deliveryFeeData[t].isdistancebased=!1,this.deliveryFeeData[t].isweightbased=!1,this.deliveryFeeData[t].isflatbased=!0,this.deliveryFeeData[t].amountDiv=!1,this.deliveryFeeData[t].flatFeeDiv=!0)},removeChild:function(e){this.deliveryFeeData.splice(e,1)},addChild:function(){this.deliveryFeeData.push({startdistance:"",enddistance:"",minweight:"",maxweight:"",amount:0,flatfee:0,deliverymethod:"",merchID:"",branchID:"",isdistancebased:!1,isweightbased:!1,isflatbased:!1,amountDiv:!0,flatFeeDiv:!1})},cancelDelivery:function(){this.$router.push("/branch")},clearForm:function(){this.deliveryFeeData=[{startdistance:"",enddistance:"",minweight:"",maxweight:"",amount:0,flatfee:0,merchID:"",deliverymethod:"",branchID:"",deliverytype:"",isdistancebased:!1,isweightbased:!1,isflatbased:!1,amountDiv:!0,flatFeeDiv:!1}],this.deliveryFee=[]},setData:function(){this.branch=JSON.parse(localStorage.getItem("branch")),this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.formData.branchID=this.branch.id}},mounted:function(){this.setData()}}}).call(t,a("7t+N"))},We6w:function(e,t,a){var i=a("IspC");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("2a3cc241",i,!1,{sourceMap:!1})},WjxU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Pf0t"),s=a("jmYC"),n=!1;var r=function(e){n||a("We6w")},l=a("VU/8")(i.a,s.a,!1,r,null,null);l.options.__file="pages/branch/delivery-fee/index.vue",t.default=l.exports},jmYC:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("p",{staticClass:"fw-medium font-16"},[a("nuxt-link",{staticClass:"text-link",attrs:{to:"/branch"}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#back"}})]),a("span",{staticClass:"ml-1 fw-bold co-grey"},[e._v("Back")])])],1),a("div",{staticClass:"search-filter d-flx-alc-jfe"})]),a("div",{staticClass:"inner-main-wrapper mx-1 my-2"},[a("div",{staticClass:"d-flx-alc-jsb"},[a("h3",{staticClass:"section-title"},[e._v("Add delivery fee for "+e._s(e.branch.branchname))])]),a("overlay-scrollbar",{staticClass:"table-wrapper no-deco"},[a("form",{staticClass:"mt-1",on:{submit:function(t){return t.preventDefault(),e.creatDeliveryFee.apply(null,arguments)}}},[e._l(e.deliveryFeeData,function(t,i){return a("div",{key:i},[a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("Deliver Fee type")]),a("div",{staticClass:"form-input__input"},[a("Select2",{attrs:{options:e.options},on:{select:function(t){return e.mySelectEvent(t,i)}},model:{value:t.deliverytype,callback:function(a){e.$set(t,"deliverytype",a)},expression:"input.deliverytype"}})],1)]),e.isCourierService?a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("Delivery type")]),a("div",{staticClass:"form-input__input"},[a("Select2",{attrs:{required:!0,options:e.courierOptions},model:{value:t.deliverymethod,callback:function(a){e.$set(t,"deliverymethod",a)},expression:"input.deliverymethod"}})],1)]):e._e()]),a("div",{staticClass:"flex-width-1-2 less-gp"},[t.amountDiv?a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("Amount")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"input.amount"}],attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(a){a.target.composing||e.$set(t,"amount",a.target.value)}}})])]):e._e(),t.flatFeeDiv?a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("Flat fee")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.flatfee,expression:"input.flatfee"}],attrs:{type:"number"},domProps:{value:t.flatfee},on:{input:function(a){a.target.composing||e.$set(t,"flatfee",a.target.value)}}})])]):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deliveryFeeData[i].isdistancebased,expression:"deliveryFeeData[k].isdistancebased"}],staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("Start distance (km)")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.startdistance,expression:"input.startdistance"}],attrs:{type:"number"},domProps:{value:t.startdistance},on:{input:function(a){a.target.composing||e.$set(t,"startdistance",a.target.value)}}})])]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[e._v("End distance (km)")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.enddistance,expression:"input.enddistance"}],attrs:{type:"number"},domProps:{value:t.enddistance},on:{input:function(a){a.target.composing||e.$set(t,"enddistance",a.target.value)}}})])])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{directives:[{name:"show",rawName:"v-show",value:i==e.deliveryFeeData.length-1,expression:"k == deliveryFeeData.length-1"}],staticClass:"form-input"},[a("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:function(t){return e.addChild(i)}}},[e._v("\n\t\t\t\t\t\tAdd\n\t\t\t\t\t\t")])]),a("label",{directives:[{name:"show",rawName:"v-show",value:i||!i&&e.deliveryFeeData.length>1,expression:"k || ( !k && deliveryFeeData.length > 1)"}],staticClass:"form-input"},[a("button",{staticClass:"btn btn--danger",attrs:{type:"button"},on:{click:function(t){return e.removeChild(i)}}},[e._v("\n\t\t\t\t\t\tRemove\n\t\t\t\t\t\t")])])])])}),a("div",{staticClass:"d-flx-alc-jfe mt-5"},[a("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:e.cancelDelivery}},[e._v("\n              Cancel\n            ")]),a("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[e._v("\n              Create delivery fee(s)\n            ")])])],2)])],1)])};i._withStripped=!0;var s={render:i,staticRenderFns:[]};t.a=s}});