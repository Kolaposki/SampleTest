webpackJsonp([52],{AkJy:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("CL0f"),n=s("Ya8u"),i=!1;var r=function(t){i||s("hoC7")},o=s("VU/8")(e.a,n.a,!1,r,"data-v-d7271914",null);o.options.__file="pages/inventory/index.vue",a.default=o.exports},CL0f:function(t,a,s){"use strict";(function(t){a.a={layout:"main",computed:{filteredList:function(){var t=this;return this.inventory.filter(function(a){return null!=a.productname&&"null"!=a.productname&&a.productname.toLowerCase().includes(t.search.toLowerCase())?a.productname.toLowerCase().includes(t.search.toLowerCase()):null!=a.productcode&&"null"!=a.productcode&&a.productcode.toLowerCase().includes(t.search.toLowerCase())?a.productcode.toLowerCase().includes(t.search.toLowerCase()):void 0})},source_products:function(){var t=this;return this.inventory_list.filter(function(a){return a.branchID==t.stock_branch.source_id}).map(function(t){return{id:t.id,text:t.productname}})},destination_products:function(){var t=this;return this.inventory_list.filter(function(a){return a.branchID==t.stock_branch.destination_id}).map(function(t){return{id:t.id,text:t.productname}})},stock_branches:function(){return this.branches.map(function(t){return{id:t.id,text:t.branchname}})},getTotalPrice:function(){return this.inventory.map(function(t){return t.costprice}).reduce(function(t,a){return t+=Number(a)},0)}},data:function(){return{search:"",totalprice:"",productcode:"",branches:[],inventory_list:[],branchID:"",inventory:[],stock_data:{source_id:"",destination_id:"",qty:""},stock_branch:{source_id:"",destination_id:""},formData:{merchID:"",branchID:"",quantity:"",productID:""},editData:{merchID:"",branchID:"",costprice:"",productID:""},setWaste:{merchID:"",branchID:"",waste:"",productID:""},loading:!0,vendors:[],purchaseorders:[],deleteData:{id:""}}},methods:{trfQty:function(){var a=this;t("#trfQty").attr("disabled",!0).html("Transferring quantity..please wait"),this.stock_data.merchID=this.formData.merchID,console.log(this.stock_data),this.$store.dispatch("inventory/trfQty",this.stock_data).then(function(s){if(t("#trfQty").attr("disabled",!1).html("Transfer Quantity"),s.data.status)return a.$toast.success(s.data.message),a.closeTrfQty(),void a.listInventory();a.$toast.error(s.data.message)}).catch(function(s){a.$toast.error("An error occured"),t("#trfQty").attr("disabled",!1).html("Set Cost Price"),console.log(s)})},openTransferStock:function(){console.log("hey"),UIkit.modal("#transfer-quantity").show()},editQuantity:function(t){this.productcode=t.productname,""!=t.productcode&&null!=t.productcode&&"null"!=t.productcode&&(this.productcode+=" ("+t.productcode+")"),this.formData={productID:t.id,branchID:t.branchID,merchID:t.merchID,quantity:""},UIkit.modal("#set-quantity").toggle()},listBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(a){t.branches=a.data.data}).catch(function(t){})},filterByBranch:function(){var t=this;this.inventory=this.inventory_list.filter(function(a){return console.log("branchID"),console.log(t.branchID),""!=t.branchID&&void 0!=t.branchID&&null!=a.branchID&&"null"!=a.branchID&&a.branchID==t.branchID?a.branchID==t.branchID:""==t.branchID?""==a.branchID:void 0})},setQuantity:function(){var a=this;t("#submitBtn").attr("disabled",!0).html("Updating quantity...Please wait"),this.$store.dispatch("inventory/setQuantity",this.formData).then(function(s){if(t("#submitBtn").attr("disabled",!1).html("Update Quantity"),s.data.status)return a.$toast.success(s.data.message),a.listInventory(),void a.closeSetQuantity();a.$toast.error("An error occurred")}).catch(function(s){t("#submitBtn").attr("disabled",!1).html("Update Quantity"),a.$toast.error(s)})},closeTrfQty:function(){this.stock_data={source_id:"",destination_id:"",qty:""},this.stock_branch={source_id:"",destination_id:""},UIkit.modal("#transfer-quantity").toggle()},cancelSetQuantity:function(){this.formData={merchID:"",branchID:"",quantity:"",productID:"",id:""},this.formData.merchID=this.user.id},closeSetQuantity:function(){this.cancelSetQuantity(),UIkit.modal("#set-quantity").toggle("hide")},editPrice:function(t){this.productcode=t.productname,""!=t.productcode&&null!=t.productcode&&"null"!=t.productcode&&(this.productcode+=" ("+t.productcode+")"),this.editData={productID:t.id,branchID:t.branchID,merchID:t.merchID,costprice:""},UIkit.modal("#set-price").toggle()},setWast:function(t){this.productcode=t.productname,""!=t.productcode&&null!=t.productcode&&"null"!=t.productcode&&(this.productcode+=" ("+t.productcode+")"),this.setWaste={productID:t.id,branchID:t.branchID,merchID:t.merchID,waste:""},UIkit.modal("#set-waste").toggle()},setPrice:function(){var a=this;t("#updateBtn").attr("disabled",!0).html("Setting Waste..please wait"),this.$store.dispatch("inventory/setCostPrice",this.editData).then(function(s){if(t("#updateBtn").attr("disabled",!1).html("Set Cost Price"),s.data.status)return a.$toast.success(s.data.message),a.cancelPrice(),void a.listInventory();a.$toast.error("An error occurred")}).catch(function(a){t("#updateBtn").attr("disabled",!1).html("Set Cost Price"),console.log(a)})},setWasteQty:function(){var a=this;t("#wasteBtn").attr("disabled",!0).html("Setting  DAMAGE ..please wait"),this.$store.dispatch("inventory/setWaste",this.setWaste).then(function(s){if(t("#wasteBtn").attr("disabled",!1).html("Set DAMAGE  Quantity"),s.data.status)return a.$toast.success(s.data.message),a.cancelWaste(),void a.listInventory();a.$toast.error("An error occurred")}).catch(function(a){t("#wasteBtn").attr("disabled",!1).html("Set Waste Quantity"),console.log(a)})},cancelPrice:function(){this.editData={merchID:"",branchID:"",costprice:"",productID:"",id:""},UIkit.modal("#set-price").toggle("hide")},cancelWaste:function(){this.editData={merchID:"",branchID:"",waste:"",productID:"",id:""},UIkit.modal("#set-waste").toggle("hide")},listVendors:function(){var t=this;this.$store.dispatch("vendor/listVendors",this.formData.merchID).then(function(a){if(a.data.status)return t.vendors=a.data.data,void(t.loading=!1);t.$toast.error("An error occurred")}).catch(function(a){t.$toast.error(a),t.loading=!1})},listInventory:function(){var t=this;this.$store.dispatch("inventory/getInventory",this.formData.merchID).then(function(a){if(console.log(a.data),a.data.status)return t.inventory=a.data.data,t.inventory_list=a.data.data,t.totalprice=a.data.totalinventoryvalue,void(t.loading=!1);t.$toast.error("An error occurred")}).catch(function(a){t.$toast.error(a),t.loading=!1})},listPurchaseOrders:function(){var t=this;this.$store.dispatch("purchaseorders/listPurchaseOrder",this.formData.merchID).then(function(a){a.data.status&&(t.purchaseorders=a.data.data)}).catch(function(t){})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.listVendors(),this.listInventory(),this.listPurchaseOrders(),this.listBranches()}}}).call(a,s("7t+N"))},Ya8u:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("overlay-scrollbars",{staticClass:"main-content-wrap"},[s("div",{staticClass:"page-extras"},[s("p",{staticClass:"fw-medium font-16"}),s("div",{staticClass:"search-filter d-flx-alc-jfe"},[s("div",{staticClass:"drop-down filter-drop"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.branchID,expression:"branchID"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.branchID=a.target.multiple?s:s[0]},function(a){return t.filterByBranch()}]}},[s("option",{attrs:{value:""}},[t._v("All Branches")]),t._l(t.branches,function(a){return s("option",{key:a.id,domProps:{value:a.id}},[t._v("\n              "+t._s(a.branchname)+"\n            ")])})],2)]),s("label",{staticClass:"search-w-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#search"}})])])])]),s("div",{attrs:{id:"parent-component"}},[s("div",{attrs:{id:"transfer-quantity","uk-modal":"",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("Transfer Quantity")]),s("p",[t._v("Amount will be added to the existing quantity")])]),s("form",{on:{submit:function(a){return a.preventDefault(),t.trfQty.apply(null,arguments)}}},[s("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-modal-auto":""}},[s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Source Branch")]),s("div",{staticClass:"form-input__input"},[t._v("\n\n\n\t\t\t\t\t\t"+t._s(t.stock_branch.source_id)+"\n\t\t\t\t\t\t"),s("Select2",{attrs:{required:"",options:t.stock_branches},model:{value:t.stock_branch.source_id,callback:function(a){t.$set(t.stock_branch,"source_id",a)},expression:"stock_branch.source_id"}})],1)])]),s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Source Product")]),s("div",{staticClass:"form-input__input"},[s("Select2",{attrs:{required:"",options:t.source_products},model:{value:t.stock_data.source_id,callback:function(a){t.$set(t.stock_data,"source_id",a)},expression:"stock_data.source_id"}})],1)])]),s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Destination Branch")]),s("div",{staticClass:"form-input__input"},[s("Select2",{attrs:{options:t.stock_branches},model:{value:t.stock_branch.destination_id,callback:function(a){t.$set(t.stock_branch,"destination_id",a)},expression:"stock_branch.destination_id"}})],1)])]),s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Destination Product")]),s("div",{staticClass:"form-input__input"},[s("Select2",{attrs:{required:"",options:t.destination_products},model:{value:t.stock_data.destination_id,callback:function(a){t.$set(t.stock_data,"destination_id",a)},expression:"stock_data.destination_id"}})],1)])]),s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Quantity")]),s("div",{staticClass:"form-input__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.stock_data.qty,expression:"stock_data.qty"}],attrs:{type:"number",required:""},domProps:{value:t.stock_data.qty},on:{input:function(a){a.target.composing||t.$set(t.stock_data,"qty",a.target.value)}}})])])])]),s("div",{staticClass:"d-flx-alc-jfe mt-5"},[s("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeTrfQty}},[t._v("\n\t\t\t\t\tCancel\n\t\t\t\t")]),s("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"trfQty",type:"submit"}},[t._v("\n\t\t\t\t\tTransfer Quantity\n\t\t\t\t")])])],1)])]),s("div",{attrs:{id:"set-quantity","uk-modal":"",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeSetQuantity}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("Update Quantity for : "+t._s(t.productcode))]),s("p",[t._v("Amount will be added to the existing quantity, for subtraction add a minus sign before the amount")])]),s("form",{on:{submit:function(a){return a.preventDefault(),t.setQuantity.apply(null,arguments)}}},[s("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-modal-auto":""}},[s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Quantity")]),s("div",{staticClass:"form-input__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.quantity,expression:"formData.quantity"}],attrs:{type:"number",required:""},domProps:{value:t.formData.quantity},on:{input:function(a){a.target.composing||t.$set(t.formData,"quantity",a.target.value)}}})])])])]),s("div",{staticClass:"d-flx-alc-jfe mt-5"},[s("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeSetQuantity}},[t._v("\n                Cancel\n              ")]),s("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                Update Quantity\n              ")])])],1)])]),s("div",{attrs:{id:"set-price","uk-modal":"",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.cancelPrice}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("Set Cost Price for: "+t._s(t.productcode))])]),s("form",{on:{submit:function(a){return a.preventDefault(),t.setPrice.apply(null,arguments)}}},[s("overlay-scrollbars",{class:"modal-body",attrs:{"uk-overflow-auto":""}},[s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Cost Price")]),s("div",{staticClass:"form-input__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.costprice,expression:"editData.costprice"}],attrs:{type:"number",required:""},domProps:{value:t.editData.costprice},on:{input:function(a){a.target.composing||t.$set(t.editData,"costprice",a.target.value)}}})])])]),s("div",{staticClass:"d-flx-alc-jfe mt-5"},[s("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.cancelPrice}},[t._v("\n                  Cancel\n                ")]),s("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"updateBtn",type:"submit"}},[t._v("\n                  Set Cost Price\n                ")])])])],1)])]),s("div",{attrs:{id:"set-waste","uk-modal":"",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.cancelWaste}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("Set Damage Qty For: "+t._s(t.productcode))])]),s("form",{on:{submit:function(a){return a.preventDefault(),t.setWasteQty.apply(null,arguments)}}},[s("overlay-scrollbars",{class:"modal-body",attrs:{"uk-overflow-auto":""}},[s("div",{staticClass:"flex-width-1-1 less-gp"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Quantity")]),s("div",{staticClass:"form-input__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setWaste.waste,expression:"setWaste.waste"}],attrs:{type:"number",required:""},domProps:{value:t.setWaste.waste},on:{input:function(a){a.target.composing||t.$set(t.setWaste,"waste",a.target.value)}}})])])]),s("div",{staticClass:"d-flx-alc-jfe mt-5"},[s("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.cancelWaste}},[t._v("\n                  Cancel\n                ")]),s("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"wasteBtn",type:"submit"}},[t._v("\n                  Set Damage\n                ")])])])],1)])])]),s("div",{staticClass:"inner-main-wrapper"},[s("ul",{staticClass:"card-list none flex-width-1-3 less-gp"},[s("li",{staticClass:"card-item box-deco-bg",staticStyle:{"background-color":"forestgreen"}},[s("nuxt-link",{attrs:{to:"/inventory"}},[s("div",{staticClass:"card-item__header"},[s("h3",[t._v("\n                Inventory\n              ")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#toq-file"}})])]),s("div",{staticClass:"card-item__body"},[s("p",{staticClass:"card-item__body--count"},[t._v(" ₦"+t._s(t.formatPrice(t.getTotalPrice)))])])])],1),s("li",{staticClass:"card-item box-deco-bg"},[s("nuxt-link",{staticClass:"active",attrs:{to:"/inventory/vendor"}},[s("div",{staticClass:"card-item__header"},[s("h3",[t._v("\n                Vendors\n              ")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#toq-file"}})])]),s("div",{staticClass:"card-item__body"},[s("p",{staticClass:"card-item__body--count"},[t._v(t._s(t.vendors.length))])])])],1),s("li",{staticClass:"card-item box-deco-bg"},[s("nuxt-link",{attrs:{to:"/inventory/purchase-order"}},[s("div",{staticClass:"card-item__header"},[s("h3",[t._v("\n                Purchase Orders\n              ")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#money-bag"}})])]),s("div",{staticClass:"card-item__body"},[s("p",{staticClass:"card-item__body--count"},[t._v(t._s(t.purchaseorders.length))])])])],1)]),s("div",{staticClass:"d-flx-alc-jsb table-title"},[s("h3",{staticClass:"section-title"},[t._v("Inventory")]),t.loading?s("div",{staticClass:"btn btn--primary",attrs:{href:"javascript:;",type:"button"}},[t._v("\n            Loading ...\n          ")]):s("div",{staticClass:"btn btn--primary",attrs:{href:"javascript:;",type:"button"},on:{click:t.openTransferStock}},[t._v("\n            Transfer Stock\n          ")])]),s("overlay-scrollbars",{staticClass:"table-wrapper no-deco"},[s("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),s("table",{staticClass:"table-content"},[s("thead",{},[s("tr",[s("th",{staticClass:"column-name"},[t._v("S/N")]),s("th",{staticClass:"column-name"},[t._v("Product Code")]),s("th",{staticClass:"column-name"},[t._v("Product Name")]),t.branches.length>0?s("th",{staticClass:"column-name"},[t._v("Branch")]):t._e(),s("th",{},[t._v("Stock Quantity")]),s("th",{},[t._v("Cost Price(₦)")]),s("th",{},[t._v("Damage Qty")]),s("th",{},[t._v("Action")])])]),s("tbody",{staticClass:"tablebody"},[t.loading?s("tr",[s("td",{attrs:{colspan:"6"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?s("tr",[s("td",{attrs:{colspan:"6"}},[t._v("No inventory record")])]):t._e(),t._l(t.filteredList,function(a,e){return!t.loading&&t.filteredList.length>0?s("tr",{key:e},[s("td",{staticClass:"column-name",staticStyle:{color:"#353190"}},[t._v("\n                #"+t._s(e+1)+".\n              ")]),s("td",{staticClass:"column-name"},[t._v(t._s(null!=a.productcode&&"null"!=a.productcode?a.productcode:""))]),s("td",{staticClass:"column-name"},[t._v(t._s(a.productname))]),t.branches.find(function(t){return t.id==a.branchID})?s("td",{staticClass:"column-name"},[t._v(t._s(t.branches.find(function(t){return t.id==a.branchID}).branchname))]):s("td"),s("td",[t._v(t._s(t.formNumber(a.stockqty)))]),s("td",[t._v(t._s(t.formatPrice(a.costprice)))]),s("td",[t._v(t._s(t.formNumber(a.waste)))]),s("div",{staticClass:"drop-down org-drop drop-set"},[s("button",{staticClass:"btn btn-icon drop-set",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),t.toggleDropdown(a)}}},[s("svg",{staticClass:" drop-set"},[s("use",{attrs:{"xlink:href":"/uploads/icons.svg#more"}})])]),s("div",{staticClass:"drop-wrapper",attrs:{"data-drop-down":""}},[s("ul",{staticClass:"drop-lists"},[s("li",{staticClass:"drop-list-item"},[s("button",{staticClass:"btn btn-text",attrs:{title:"Edit Quantity",type:"button"},on:{click:function(s){return t.editQuantity(a)}}},[t._v("\n                        Update Quantity\n                      ")])]),s("li",{staticClass:"drop-list-item"},[s("button",{staticClass:"btn btn-text",attrs:{title:"Receive note",type:"button"},on:{click:function(s){return t.editPrice(a)}}},[t._v("\n                        Set Cost Price\n                      ")])]),s("li",{staticClass:"drop-list-item"},[s("button",{staticClass:"btn btn-text",attrs:{title:"Receive note",type:"button"},on:{click:function(s){return t.setWast(a)}}},[t._v("\n                        Add Damage Qty\n                      ")])])])])])]):t._e()})],2)])])],1)])};e._withStripped=!0;var n={render:e,staticRenderFns:[]};a.a=n},hoC7:function(t,a,s){var e=s("x/zw");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s("rjj0")("e7241bc0",e,!1,{sourceMap:!1})},"x/zw":function(t,a,s){(t.exports=s("FZ+f")(!1)).push([t.i,".table-wrapper.no-deco[data-v-d7271914]{padding-right:unset!important}",""])}});