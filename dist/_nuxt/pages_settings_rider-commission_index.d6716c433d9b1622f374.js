webpackJsonp([58],{ejvt:function(t,s,a){"use strict";(function(t){s.a={layout:"main",data:function(){return{loading:!0,formData:{merchID:"",commissionpoint:"",amountearned:"",commissionrule:""},commissions:[],errorData:{commissionpoint:!1,amountearned:!1,commissionrule:!1},editData:{commissionpoint:"",amountearned:"",commissionrule:"",id:""}}},methods:{saveCommission:function(){var s=this;this.clearErrorData(),""!==this.formData.commissionpoint?""!==this.formData.commissionrule?""!==this.formData.amountearned?(t("#submitBtn").attr("disabled",!0).html("Saving....please wait"),this.$store.dispatch("riders/saveCommission",this.formData).then(function(a){if(t("#submitBtn").attr("disabled",!1).html("+ Save"),a.data.status)return s.$toast.success(a.data.message),s.getCommissions(),void s.closeModal();s.$toast.error("An error occurred")}).catch(function(s){t("#submitBtn").attr("disabled",!1).html("+ Save"),console.log(s)})):this.errorData.amountearned=!0:this.errorData.commissionrule=!0:this.errorData.commissionpoint=!0},updateCommission:function(){var s=this;this.clearErrorData(),""!==this.editData.commissionpoint?""!==this.editData.commissionrule?""!==this.editData.amountearned?(t("#updateBtn").attr("disabled",!0).html("Updating..please wait"),this.$store.dispatch("riders/updateCommission",this.editData).then(function(a){if(t("#updateBtn").attr("disabled",!1).html("+ Update"),a.data.status)return s.$toast.success(a.data.message),s.getCommissions(),void s.closeEdit();s.$toast.error("An error occurred")}).catch(function(s){t("#updateBtn").attr("disabled",!1).html("+ Update"),console.log(s)})):this.errorData.amountearned=!0:this.errorData.commissionrule=!0:this.errorData.commissionpoint=!0},getCommissions:function(){var t=this;this.$store.dispatch("riders/listCommissions",this.formData.merchID).then(function(s){t.loading=!1,t.commissions=void 0!=s.data.data?s.data.data:[]}).catch(function(s){t.loading=!1,console.log(s)})},editCommission:function(t){this.editData={commissionpoint:t.commissionpoint,amountearned:t.amountearned,commissionrule:t.commissionrule,id:t.id},UIkit.modal("#edit-commission").toggle()},openModal:function(){UIkit.modal("#add-commission").toggle()},closeModal:function(){this.formData.commissionpoint="",this.formData.amountearned="",this.formData.commissionrule="",UIkit.modal("#add-commission").toggle("hide")},clearErrorData:function(){this.errorData={commissionpoint:!1,amountearned:!1,commissionrule:!1}},closeEdit:function(){this.editData={commissionpoint:"",amountearned:"",commissionrule:"",id:""},UIkit.modal("#edit-commission").toggle("hide")}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getCommissions()}}}).call(s,a("7t+N"))},gYOO:function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("overlay-scrollbars",{staticClass:"page-extras d-flx-alc-jsb settings-extra"},[a("div",{staticClass:"links-wrap"},[t.isMerchant?a("nuxt-link",{attrs:{to:"/settings"}},[t._v("Basic details")]):t._e(),a("nuxt-link",{attrs:{to:"/settings/contact-details"}},[t._v("Contact Details")]),t.isMerchant?a("nuxt-link",{attrs:{to:"/settings/change-password"}},[t._v("Change Password")]):t._e(),t.isMerchant&&!t.isCourierService?a("nuxt-link",{attrs:{to:"/settings/integration"}},[t._v("Integration")]):t._e(),t.isMerchant?a("nuxt-link",{staticClass:"active",attrs:{to:"/settings/tax"}},[t._v("Tax")]):t._e(),t.isMerchant?a("nuxt-link",{attrs:{to:"/settings/discount"}},[t._v("Discount")]):t._e()],1)]),a("div",{staticClass:"inner-main-wrapper"},[a("div",{staticClass:"box-deco-bg p-3"},[a("section",{staticClass:"setting-section"},[a("div",{staticClass:"d-flx-alc-jsb table-title"},[a("h3",{staticClass:"section-title"},[t._v("RIDER COMMISSIONS")]),a("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.openModal}},[t._v("\n              + Add Commissions\n            ")])]),a("overlay-scrollbars",{staticClass:"table-wrapper no-deco"},[a("table",{staticClass:"table-content"},[a("thead",{},[a("tr",[a("th",{},[t._v("Commission Rule")]),a("th",{},[t._v("Commission Amount")]),a("th",{},[t._v("Based On Every")]),a("th",{},[t._v("Action")])])]),a("tbody",{staticClass:"tablebody"},[t.loading?a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.commissions.length<1?a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("No commisions at the moment. Please create a commission")])]):t._e(),t._l(t.commissions,function(s){return!t.loading&&t.commissions.length>0?a("tr",{key:s.id},[a("td",[t._v(t._s(s.commissionrule))]),a("td",[t._v(t._s(s.commissionpoint))]),a("td",[t._v(t._s(s.amountearned))]),a("td",[a("button",{staticClass:"btn btn-icon",attrs:{title:"Edit",type:"button"},on:{click:function(a){return t.editCommission(s)}}},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#edit"}})])])])]):t._e()})],2)])])],1)])]),a("div",{attrs:{id:"parent-component"}},[a("div",{attrs:{id:"add-commission",container:"#parent-component","uk-modal":""}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeModal}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Add Commission")]),a("p",[t._v("Enter the details to create a new commission.")])]),a("form",{on:{submit:function(s){return s.preventDefault(),t.saveCommission.apply(null,arguments)}}},[a("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission Rule")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.commissionrule,expression:"formData.commissionrule"}],attrs:{type:"text"},domProps:{value:t.formData.commissionrule},on:{input:function(s){s.target.composing||t.$set(t.formData,"commissionrule",s.target.value)}}})]),t.errorData.commissionrule?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a the Rule Name")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission Amount")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.commissionpoint,expression:"formData.commissionpoint"}],attrs:{type:"text"},domProps:{value:t.formData.commissionpoint},on:{input:function(s){s.target.composing||t.$set(t.formData,"commissionpoint",s.target.value)}}})]),t.errorData.commissionpoint?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a Commission")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission Based On Every")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.amountearned,expression:"formData.amountearned"}],attrs:{type:"text"},domProps:{value:t.formData.amountearned},on:{input:function(s){s.target.composing||t.$set(t.formData,"amountearned",s.target.value)}}})]),t.errorData.amountearned?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter the rule for the commission")]):t._e()]),a("div",{staticClass:"d-flx-alc-jfe mt-5"},[a("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:t.closeModal}},[t._v("\n                  Cancel\n                ")]),a("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                  + Save\n                ")])])])])])]),a("div",{attrs:{id:"edit-commission",container:"#parent-component","uk-modal":""}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeEdit}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Edit Commission")]),a("p",[t._v("Enter the details to update the commission.")])]),a("form",{on:{submit:function(s){return s.preventDefault(),t.updateCommission.apply(null,arguments)}}},[a("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission Rule")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.commissionrule,expression:"editData.commissionrule"}],attrs:{type:"text"},domProps:{value:t.editData.commissionrule},on:{input:function(s){s.target.composing||t.$set(t.editData,"commissionrule",s.target.value)}}})]),t.errorData.commissionrule?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a the Rule Name")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission Amount")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.commissionpoint,expression:"editData.commissionpoint"}],attrs:{type:"text"},domProps:{value:t.editData.commissionpoint},on:{input:function(s){s.target.composing||t.$set(t.editData,"commissionpoint",s.target.value)}}})]),t.errorData.commissionpoint?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a Commission")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Commission is Earned Based On Every")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.amountearned,expression:"editData.amountearned"}],attrs:{type:"text"},domProps:{value:t.editData.amountearned},on:{input:function(s){s.target.composing||t.$set(t.editData,"amountearned",s.target.value)}}})]),t.errorData.amountearned?a("span",{staticClass:"form-input__error-msg"},[t._v("Please enter the rule for the commission")]):t._e()]),a("div",{staticClass:"d-flx-alc-jfe mt-5"},[a("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeEdit}},[t._v("\n                  Cancel\n                ")]),a("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"updateBtn",type:"submit"}},[t._v("\n                  + Update\n                ")])])])])])])])],1)};i._withStripped=!0;var o={render:i,staticRenderFns:[]};s.a=o},q3nm:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("ejvt"),o=a("gYOO"),e=a("VU/8")(i.a,o.a,!1,null,null,null);e.options.__file="pages/settings/rider-commission/index.vue",s.default=e.exports}});