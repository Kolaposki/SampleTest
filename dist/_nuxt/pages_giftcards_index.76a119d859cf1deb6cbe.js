webpackJsonp([77],{PXB2:function(a,t,e){"use strict";var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("div",{staticClass:"d-flx-alc-jsb page-extras"},[e("p",{staticClass:"fw-medium font-16"}),e("div",{staticClass:"search-filter d-flx-alc-jfe"},[e("label",{staticClass:"search-w-icon"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:a.search},on:{input:function(t){t.target.composing||(a.search=t.target.value)}}}),e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:a.displayModal}},[a._v("\n          + Create gift card\n        ")]),e("div",{attrs:{id:"add-gift-card","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:a.cancelModal}}),e("div",{staticClass:"modal-header"},[e("h2",[a._v("Create Gift card")]),e("p",[a._v("Create gift cards your customers can purchase and use on the Ntisa ")])]),e("form",{on:{submit:function(t){return t.preventDefault(),a.createCard.apply(null,arguments)}}},[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[a._v("Name")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.name,expression:"formData.name"}],attrs:{type:"text",placeholder:""},domProps:{value:a.formData.name},on:{input:function(t){t.target.composing||a.$set(a.formData,"name",t.target.value)}}})]),a.errorData.name?e("span",{staticClass:"form-input__error-msg"},[a._v("Please enter a name")]):a._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[a._v("Amount")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.amount,expression:"formData.amount"}],attrs:{type:"text",placeholder:""},domProps:{value:a.formData.amount},on:{input:function(t){t.target.composing||a.$set(a.formData,"amount",t.target.value)}}})]),a.errorData.amount?e("span",{staticClass:"form-input__error-msg"},[a._v("Please enter an amount")]):a._e()]),e("div",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[a._v("Giftcard availability")]),e("span",{staticClass:"font-14 co-lgray"},[a._v("Can this Gift card be bought by anyone?")]),e("label",{staticClass:"form-input-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.isavaliabletoall,expression:"formData.isavaliabletoall"}],attrs:{type:"radio",value:"1",name:"availability"},domProps:{checked:a._q(a.formData.isavaliabletoall,"1")},on:{change:function(t){return a.$set(a.formData,"isavaliabletoall","1")}}}),e("span",{staticClass:"design"}),e("span",{staticClass:"text"},[a._v("Yes")])]),e("label",{staticClass:"form-input-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.isavaliabletoall,expression:"formData.isavaliabletoall"}],attrs:{type:"radio",value:"0",name:"availability"},domProps:{checked:a._q(a.formData.isavaliabletoall,"0")},on:{change:function(t){return a.$set(a.formData,"isavaliabletoall","0")}}}),e("span",{staticClass:"design"}),e("span",{staticClass:"text"},[a._v("No")])]),a.errorData.isavaliabletoall?e("span",{staticClass:"form-input__error-msg"},[a._v("Please select an option")]):a._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[a._v("Expiring date")]),e("div",{staticClass:"form-input__input wsvg"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.voucher_date,expression:"formData.voucher_date"}],attrs:{type:"date",placeholder:""},domProps:{value:a.formData.voucher_date},on:{input:function(t){t.target.composing||a.$set(a.formData,"voucher_date",t.target.value)}}}),e("svg",{},[e("use",{attrs:{"xlink:href":"/uploads/icons.svg/#calendar"}})])]),a.errorData.voucher_date?e("span",{staticClass:"form-input__error-msg"},[a._v("Please select an expiry date")]):a._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[a._v("Count")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.formData.count,expression:"formData.count"}],attrs:{type:"text",placeholder:""},domProps:{value:a.formData.count},on:{input:function(t){t.target.composing||a.$set(a.formData,"count",t.target.value)}}})]),a.errorData.count?e("span",{staticClass:"form-input__error-msg"},[a._v("Please enter a count")]):a._e()])]),e("div",{staticClass:"d-flx-alc-jfe mt-3"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:a.cancelModal}},[a._v("\n                  Cancel\n                ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"createBtn"}},[a._v("\n                  + Create gift card\n                ")])])],1)])]),e("div",{staticClass:"drop-down page-drop"}),e("div",{staticClass:"d-flx-alc"})])]),e("div",{staticClass:"inner-main-wrapper"},[e("ul",{staticClass:"gifts-list grid mostly-4"},[a.loading?e("li",[e("div",{staticClass:"gifts-card"},[e("div",{staticClass:"gifts-card__extra"}),e("div",{staticClass:"gifts-card__title"},[a._v("\n              Loading...please wait\n            ")])])]):a._e(),!a.loading&&a.filteredList.length<1?e("li",[e("div",{staticClass:"gifts-card"},[e("div",{staticClass:"gifts-card__extra"}),e("div",{staticClass:"gifts-card__title"},[a._v("\n              No gift cards have been created\n            ")])])]):a._e(),a._l(a.filteredList,function(t,s){return!a.loading&&a.filteredList.length>0?e("li",{key:s},[e("div",{staticClass:"gifts-card"},[e("div",{staticClass:"gifts-card__extra"},[e("p",[a._v("0 sold")])]),e("div",{staticClass:"gifts-card__title"},[e("svg",[e("use",{attrs:{"xlink:href":"/uploads/icons.svg#overlap"}})])]),e("nuxt-link",{staticClass:"gifts-card__foot",attrs:{to:"/giftcards/details/"+t.id}},[e("div",{staticClass:"gcard-title"},[e("h4",[a._v(a._s(t.cardname))]),e("p",{staticClass:"co-primary"},[a._v("â‚¦ "+a._s(a.formatPrice(t.amount)))])]),e("svg",[e("use",{attrs:{"xlink:href":"/uploads/icons.svg#lock"}})]),e("p",{staticClass:"expire"},[e("span",[a._v("Expires")]),e("span",[a._v(a._s(a.$moment(t.expiration_date).format("MMM Do YY")))])])])],1)]):a._e()})],2),e("div",{attrs:{id:"delete","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),e("div",{staticClass:"modal-header d-flx"},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#co-delete"}})]),e("div",{staticClass:"ml-1"},[e("h2",[a._v("Delete Category ?")]),e("p",[a._v("Please confirm you really want to delete this category, this action cannot be undone.")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"d-flx-alc-jc mt-3"},[e("button",{staticClass:"btn btn-no-fill"},[a._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn-error ml-2"},[a._v("\n                Delete\n              ")])])])])])])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};t.a=r},eYml:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("yyrE"),r=e("PXB2"),i=e("VU/8")(s.a,r.a,!1,null,null,null);i.options.__file="pages/giftcards/index.vue",t.default=i.exports},yyrE:function(a,t,e){"use strict";(function(a){t.a={layout:"main",computed:{filteredList:function(){var a=this;return this.cards.filter(function(t){return t.cardname.toLowerCase().includes(a.search.toLowerCase())?t.cardname.toLowerCase().includes(a.search.toLowerCase()):t.serialnumber.toLowerCase().includes(a.search.toLowerCase())})}},data:function(){return{search:"",loading:!0,formData:{merchID:"",createdby:"",name:"",voucher_date:"",amount:"",count:"",isavaliabletoall:""},errorData:{merchID:!1,name:!1,voucher_date:!1,amount:!1,count:!1,isavaliabletoall:!1},cards:[]}},methods:{createCard:function(){var t=this;this.validateData()||(a("#createBtn").attr("disabled",!0).html("Creating card(s)....please wait"),this.formData.createdby=this.user.id,"1"===this.formData.isavaliabletoall?this.formData.isavaliabletoall=!0:this.formData.isavaliabletoall=!1,this.formData.count=parseInt(this.formData.count),this.$store.dispatch("giftcards/createGiftCards",this.formData).then(function(e){if(a("#createBtn").attr("disabled",!0).html("+ Create gift card"),e.data.status)return t.$toast.success(e.data.message),t.getGiftCards(),void t.cancelModal();t.$toast.error(e.data.message)}).catch(function(t){a("#createBtn").attr("disabled",!0).html("+ Create gift card"),console.log(t)}))},cancelModal:function(){this.resetValidatorError(),this.formData={createdby:"",name:"",voucher_date:"",amount:"",count:"",isavaliabletoall:""},UIkit.modal("#add-gift-card").toggle("hide")},displayModal:function(){UIkit.modal("#add-gift-card").toggle()},validateData:function(){return this.resetValidatorError(),""===this.formData.name?(this.errorData.name=!0,!0):""===this.formData.amount?(this.errorData.amount=!0,!0):this.formData.isavaliabletoall?""===this.formData.voucher_date?(this.errorData.voucher_date=!0,!0):""===this.formData.count&&(this.errorData.count=!0,!0):(this.errorData.isavaliabletoall=!0,!0)},resetValidatorError:function(){this.errorData={merchID:!1,name:!1,voucher_date:!1,amount:!1,count:!1,isavaliabletoall:!1}},getGiftCards:function(){var a=this;this.$store.dispatch("giftcards/listGiftCards",this.formData.merchID).then(function(t){if(t.data.status)return a.cards=t.data.data,void(a.loading=!1);a.loading=!1,a.$toast.error("An error occurred while retrieving data. Please try again")}).catch(function(a){console.log(a)})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getGiftCards()}}}).call(t,e("7t+N"))}});