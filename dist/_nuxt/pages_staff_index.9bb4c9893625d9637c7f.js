webpackJsonp([34],{"/MM0":function(t,s,a){"use strict";(function(t){var e=a("Xxa5"),r=a.n(e),i=a("woOf"),o=a.n(i),n=a("exGp"),l=a.n(n),d=a("BDgP");s.a={components:{Permission:d.a},layout:"main",computed:{},data:function(){return{filteredList:[],roleFilter:"",search:"",token:"",loading:!0,settings:{width:"100%"},options:[{id:"all",text:"All Branches"}],errorData:{email:!1,firstname:!1,lastname:!1,phone:!1,password:!1,branch:!1,role:!1,invalidEmail:!1,dob:!1,gender:!1},changePasswordData:{id:0},changePasswordStatus:!1,formData:{merchID:"",emailaddress:"",firstname:"",lastname:"",phonenumber:"",userpassword:"",branchID:["all"],role:"",title:"",dob:"",gender:"",userlogo:""},roleData:{merchID:"",userID:"",id:""},updateRoleData:{userID:"",roleID:""},confirmPass:{passwordError:!1,message:"",password:"",confirmPassword:"",confirmPasswordError:!1},editDataCheck:{role:""},editData:{id:"",merchID:"",emailaddress:"",firstname:"",lastname:"",phonenumber:"",dob:"",branchID:[],gender:"",role:"",profilelink:"",title:"",username:"",branchname:""},users:[],branches:[],deleteData:{id:""},sortData:{merchID:"",role:""},staff_role:[]}},methods:{allRoles:function(){var t=this;this.filteredList=this.users.filter(function(s){return""==t.roleFilter?t.users:null!=s.rolename&&s.rolename.toLowerCase().includes(t.roleFilter.toLowerCase())?s.rolename.toLowerCase().includes(t.roleFilter.toLowerCase()):void 0})},filterRole:function(){var t=this;this.filteredList=this.users.filter(function(s){return null!=s.firstname&&s.firstname.toLowerCase().includes(t.search.toLowerCase())?s.firstname.toLowerCase().includes(t.search.toLowerCase()):null!=s.lastname&&s.lastname.toLowerCase().includes(t.search.toLowerCase())?s.lastname.toLowerCase().includes(t.search.toLowerCase()):null!=s.emailaddress&&s.emailaddress.toLowerCase().includes(t.search.toLowerCase())?s.emailaddress.toLowerCase().includes(t.search.toLowerCase()):void 0})},getRoles:function(){var t=this;this.$store.dispatch("role/getPermissions",this.roleData).then(function(s){t.loading=!1,t.staff_role=s.data.data}).catch(function(s){t.loading=!1,console.log(s)})},handleChange:function(t){var s=t.target.value;this.updateRoleData.roleID=s},updateRole:function(){var s=this;t("#assignRole").attr("disabled",!0).html("Assigning role....please wait"),this.$store.dispatch("users/updateRole",this.updateRoleData).then(function(a){if(t("#assignRole").attr("disabled",!1).html("Assign Role"),a.data.status)return s.$toast.success("Role assigned successfully"),s.cancelRole(),void s.getAllUser();s.$toast.error(a.data.message)}).catch(function(t){console.log(t)})},setChangePasswordStatus:function(){["administrator","business_owner"].includes(this.editDataCheck.role)||"administrator"!=this.editData.role&&"business_owner"!=this.editData.role||(this.changePasswordStatus=!0)},changeToken:function(s){var a=this;t("#changeToken").attr("disabled",!0).html("Reseting token....please wait");var e={id:s.id,usertoken:s.usertoken};this.$store.dispatch("users/changeToken",e).then(function(s){if(s.data.status)return t("#changeToken").attr("disabled",!1).html("Reset token"),a.token=s.data.data.usertoken,UIkit.modal("#token").toggle(),void a.getAllUser();a.$toast.error("An error occurred")}).catch(function(s){t("#changeToken").attr("disabled",!1).html("Reset token"),console.log(s)})},deleteUser:function(t){this.deleteData.id=t.id,UIkit.modal("#delete-text").toggle()},cancelDelete:function(){this.deleteData={id:""},UIkit.modal("#delete-text").toggle()},cancelAssign:function(){},cancelToken:function(){this.token="",UIkit.modal("#token").toggle()},doDeleteUser:function(){var s=this;t("#deleteBtn").attr("disabled",!0).html("Deleting..please wait"),this.$store.dispatch("users/deleteUser",this.deleteData).then(function(a){if(t("#deleteBtn").attr("disabled",!1).html("Delete"),a.data.status)return s.$toast.success(a.data.message),s.getAllUser(),void s.cancelDelete();s.$toast.error("An error occurred and the operation was terminated")}).catch(function(a){s.$toast.error("An error occurred and the operation was terminated"),t("#deleteBtn").attr("disabled",!1).html("Delete"),console.log(a)})},createStaff:function(){var s=l()(r.a.mark(function s(){var a,e,i,n=this;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.resetErrorData(),!this.validateUserData()){s.next=3;break}return s.abrupt("return");case 3:a=o()({},this.formData),this.formData.branchID&&((e=this.formData.branchID).includes("all")&&(e=[],this.branches.forEach(function(t){e.push(t.id)})),i=e.map(function(t){return parseInt(t,10)}),a.branchID=i,a.role="Logistics"),a.phonenumber="0"+a.phonenumber,this.formData.lastname,t("#submitBtn").attr("disabled",!0).html("Creating User....please wait"),this.$store.dispatch("users/createUser",a).then(function(){var s=l()(r.a.mark(function s(a){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t("#submitBtn").attr("disabled",!1).html("+ Create User"),!a.data.status){s.next=7;break}return n.closeModal(),s.next=5,n.getAllUser();case 5:return n.$toast.success("User created successfully"),s.abrupt("return");case 7:n.$toast.error(a.data.message);case 8:case"end":return s.stop()}},s,n)}));return function(t){return s.apply(this,arguments)}}()).catch(function(s){t("#submitBtn").attr("disabled",!1).html("+ Create User"),console.log(s)});case 9:case"end":return s.stop()}},s,this)}));return function(){return s.apply(this,arguments)}}(),viewStaffDetails:function(t){localStorage.removeItem("user_data"),this.$store.dispatch("users/setStaff",t),this.$router.push("/staff/details/"+t.id)},updateStaff:function(){var s=this;if(this.resetErrorData(),!this.validateUpdateData()){var a=o()({},this.editData);if(this.editData.branchID){var e=this.editData.branchID;e.includes("all")&&(e=[],this.branches.forEach(function(t){e.push(t.id)}));var r=e.map(function(t){return parseInt(t,10)});a.branchID=r}a.phonenumber="0"+a.phonenumber,null!=a.profilelink&&a.profilelink.includes("http")&&delete a.profilelink,"business_owner"==this.editData.role&&(a.branchID=this.branches[0].id),t("#updateBtn").attr("readonly",!0).html("Updating user....please wait"),this.$store.dispatch("users/updateUser",a).then(function(a){if(t("#updateBtn").attr("readonly",!1).html("+ Update User"),"False"!==a.data.status)return s.getAllUser(),s.$toast.success("User details updated sucessfully!"),void s.resetEditData();s.$toast.error("An error occurred")}).catch(function(s){t("#updateBtn").attr("readonly",!1).html("+ Update User"),console.log(s)})}},updatePassword:function(){var s=this;if(this.resetErrorData(),!this.validateUpdatePassword()){var a=o()({},this.changePasswordData);a.password=this.confirmPass.password,t("#updatePasswordBtn").attr("readonly",!0).html("Updating password....please wait"),this.$store.dispatch("users/changePassword",a).then(function(a){if(t("#updatePasswordBtn").attr("readonly",!1).html("+ Update Password"),"False"!==a.data.status)return s.$toast.success(a.data.message),void s.resetPasswordData();s.$toast.error("An error occurred")}).catch(function(s){t("#updatePasswordBtn").attr("readonly",!1).html("+ Update Password"),console.log(s)})}},handleImage:function(t){var s=t.target.files;s.length&&(["image/png","image/jpg","image/jpeg"].includes(s[0].type)?this.createBase64Image(s[0]):this.$toast.error("Only Images of Type jpg, jpeg and png allowed"))},createBase64Image:function(t){var s=this,a=new FileReader;a.onload=function(t){s.formData.userlogo=t.target.result.split(",")[1]},a.readAsDataURL(t)},handleUpdateImage:function(t){var s=t.target.files;s.length&&(["image/png","image/jpg","image/jpeg"].includes(s[0].type)?this.createBase64ImageEdit(s[0]):this.$toast.error("Only Images of Type jpg, jpeg and png allowed"))},createBase64ImageEdit:function(t){var s=this,a=new FileReader;a.onload=function(t){s.editData.profilelink=t.target.result.split(",")[1]},a.readAsDataURL(t)},editStaff:function(t){this.editDataCheck.role="";var s={id:t.id,merchID:t.merchID,emailaddress:t.emailaddress,firstname:t.firstname,lastname:t.lastname,phonenumber:t.phonenumber.substring(1),branchID:t.branchID,role:"",title:"",profilelink:t.profilelink,gender:t.gender,usertoken:t.usertoken,username:t.username};o()(this.editData,s),this.editData.branchID=t.branchID,UIkit.modal("#edit-staff").toggle()},changePassword:function(t){this.changePasswordData={id:t.id},UIkit.modal("#change-password").toggle()},validateUserData:function(){return""===this.formData.firstname?(this.errorData.firstname=!0,!0):""===this.formData.lastname?(this.errorData.lastname=!0,!0):""===this.formData.phonenumber?(this.errorData.phone=!0,!0):(0==this.formData.branchID||this.formData.branchID.length<=0||""==this.formData.branchID[0])&&"business_owner"!=this.formData.role?(this.errorData.branch=!0,!0):""!==this.formData.emailaddress||"business_owner"!=this.formData.role&&"administrator"!=this.formData.role?""===this.confirmPass.password?(this.confirmPass.passwordError=!0,!0):(this.formData.userpassword=this.confirmPass.password,""===this.confirmPass.confirmPassword?(this.confirmPass.confirmPasswordError=!0,!0):this.confirmPass.password!==this.confirmPass.confirmPassword&&(this.confirmPass.confirmPasswordError=!0,!0)):(this.errorData.email=!0,!0)},validateUpdatePassword:function(){if(""!==this.confirmPass.password){if(""===this.confirmPass.confirmPassword)return this.confirmPass.confirmPasswordError=!0,this.confirmPass.message="Please enter a password confirmation",!0;if(this.confirmPass.password!==this.confirmPass.confirmPassword)return this.confirmPass.confirmPasswordError=!0,this.confirmPass.message="Password confirmation does not match",!0}return!1},validateUpdateData:function(){if(""===this.editData.firstname)return this.errorData.firstname=!0,!0;if(""===this.editData.lastname)return this.errorData.lastname=!0,!0;if(""===this.editData.phonenumber)return this.errorData.phone=!0,!0;if(""===this.editData.branchID)return this.errorData.branch=!0,!0;if(""===this.editData.emailaddress)return this.errorData.email=!0,!0;if(1==this.changePasswordStatus&&""!==this.confirmPass.password){if(""===this.confirmPass.confirmPassword)return this.confirmPass.confirmPasswordError=!0,this.confirmPass.message="Please enter a password confirmation",!0;if(this.confirmPass.password!==this.confirmPass.confirmPassword)return this.confirmPass.confirmPasswordError=!0,this.confirmPass.message="Password confirmation does not match",!0}return!1},getAllUser:function(){var t=l()(r.a.mark(function t(){var s=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$store.dispatch("users/getAllUsers",this.sortData).then(function(t){s.loading=!1,s.users=t.data.data,s.filteredList=t.data.data}).catch(function(t){s.loading=!1,console.log(t)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showModal:function(){this.resetFormData(),UIkit.modal("#add-staff").toggle()},closeModal:function(){this.resetFormData()},closePermissions:function(){this.$refs.permissions.reset(),UIkit.modal("#set-permissions").toggle()},showPermissions:function(t){this.$refs.permissions.reset(),this.$refs.permissions.listPermissions(t),UIkit.modal("#set-permissions").toggle()},setRole:function(t){this.updateRoleData.userID=t.id,UIkit.modal("#set-role").toggle()},cancelRole:function(){this.updateRoleData.userID="",UIkit.modal("#set-role").toggle()},closePasswordModal:function(){this.resetPasswordData()},resetFormData:function(){this.resetErrorData(),this.formData={merchID:this.user.id,emailaddress:"",firstname:"",lastname:"",phonenumber:"",userpassword:"",branchID:0,userlogo:"",profilelink:"",role:""},this.confirmPass={password:""},UIkit.modal("#add-staff").toggle()},resetEditData:function(){this.resetErrorData(),this.changePasswordStatus=!1,this.editData={merchID:this.user.id,emailaddress:"",firstname:"",lastname:"",phonenumber:"",userpassword:"",branchID:0,role:"",title:"",profilelink:""},this.editData.dob="2001-01-01",this.confirmPass={password:""},UIkit.modal("#edit-staff").toggle()},resetPasswordData:function(){this.resetErrorData(),this.changePasswordData={id:""},this.confirmPass={password:""},UIkit.modal("#change-password").toggle()},resetErrorData:function(){this.errorData={email:!1,firstname:!1,lastname:!1,phone:!1,password:!1,branch:!1,role:!1,invalidEmail:!1},this.confirmPass.passwordError=!1},getAllBranches:function(){var t=this;this.$store.dispatch("branches/listBranches",this.formData.merchID).then(function(s){var a=t;s.data.data.forEach(function(t){var s={id:t.id,text:t.branchname};a.branches.push(s),a.options.push(s)})}).catch(function(t){console.log(t)})}},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.roleData.merchID=this.user.role?this.user.merchID:this.user.id,this.roleData.userID="",this.roleData.id="",this.sortData.merchID=this.user.role?this.user.merchID:this.user.id,this.getRoles(),this.formData.dob="2001-01-01",this.editData.dob="2001-01-01",this.getAllUser(),this.getAllBranches(),this.filterRole()}}}).call(s,a("7t+N"))},"4fkm":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("/MM0"),r=a("pGLd"),i=a("VU/8")(e.a,r.a,!1,null,null,null);i.options.__file="pages/staff/index.vue",s.default=i.exports},BDgP:function(t,s,a){"use strict";var e=a("XwxT"),r=a("yhXh"),i=a("VU/8")(e.a,r.a,!1,null,null,null);i.options.__file="components/Permission.vue",s.a=i.exports},XwxT:function(t,s,a){"use strict";(function(t){var e=a("mvHQ"),r=a.n(e);s.a={layout:"main",data:function(){return{permissions:[],permission_data:[],user_id:"",loading:!0}},methods:{listPermissions:function(t){var s=this;this.user_id=t;var a={url:"/user_permissions",method:"get",params:{id:this.user_id}};this.$store.dispatch("api/makeAPICall",a).then(function(t){s.loading=!1,s.permissions=t.data.data})},reset:function(){this.permissions=[],this.permission_data=[],this.user_id=""},savePermissions:function(){var s=this;this.permissions.forEach(function(t){t.active&&s.permission_data.push(t.id)});var a={url:"/user_permissions",method:"post",params:{id:this.user_id},data:{permissions:r()(this.permission_data)}};t("#savePermissions").attr("disabled",!0).html("Saving...please wait"),this.$store.dispatch("api/makeAPICall",a).then(function(a){if(t("#savePermissions").attr("disabled",!1).html("Save Permissions"),"True"===a.data.status)return s.$toast.success(a.data.message),s.listPermissions(s.user_id),void s.$emit("saved");s.$toast.error(a.data.message)}).catch(function(a){t("#savePermissions").attr("disabled",!1).html("Save Permissions"),s.$toast.error("An error occurred")})}}}}).call(s,a("7t+N"))},pGLd:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("div",{staticClass:"d-flx-alc-jsb page-extras"},[a("p",{staticClass:"fw-medium font-16"}),a("div",{staticClass:"search-filter d-flx-alc-jfe"},[a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{keyup:t.filterRole,input:function(s){s.target.composing||(t.search=s.target.value)}}}),a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),a("div",{staticClass:"drop-down filter-drop"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.roleFilter,expression:"roleFilter"}],staticClass:"filter-btn box-deco-smallr",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.roleFilter=s.target.multiple?a:a[0]},t.allRoles]}},[a("option",{attrs:{value:""}},[t._v("All Roles")]),t._l(t.staff_role,function(s,e){return a("option",{key:e},[t._v("\n\t\t\t\t"+t._s(s.rolename)+"\n\t\t\t")])})],2)]),t.user.rolepermission&&t.user.rolepermission[0].staff.addstaff||t.isMerchant?a("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.showModal}},[t._v("\n          + Add new user\n        ")]):t._e()])]),a("div",{attrs:{id:"parent-component"}},[a("div",{attrs:{id:"add-staff","uk-modal":"",container:"#parent-component","data-uk-modal":"{bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeModal}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Add User ")]),a("p",[t._v("\n              Add user name, description and necessary information from here\n            ")])]),a("form",{on:{submit:function(s){return s.preventDefault(),t.createStaff.apply(null,arguments)}}},[a("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Avatar")]),a("div",{staticClass:"form-input__input"},[a("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.handleImage}})])])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("First name")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstname,expression:"formData.firstname"}],attrs:{type:"text",placeholder:""},domProps:{value:t.formData.firstname},on:{input:function(s){s.target.composing||t.$set(t.formData,"firstname",s.target.value)}}})]),t.errorData.firstname?a("span",{staticClass:"form-input__error-msg"},[t._v("First name is mandatory")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Last name")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastname,expression:"formData.lastname"}],attrs:{type:"text",placeholder:""},domProps:{value:t.formData.lastname},on:{input:function(s){s.target.composing||t.$set(t.formData,"lastname",s.target.value)}}})]),t.errorData.lastname?a("span",{staticClass:"form-input__error-msg"},[t._v("Last name is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Phone number")]),a("div",{staticClass:"flex-width-uneven input-phone-flag"},[a("div",{staticClass:"d-flx-alc flag-drop"},[a("img",{attrs:{src:"/uploads/flag.svg",alt:""}}),a("p",[t._v("+234")])]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phonenumber,expression:"formData.phonenumber"}],attrs:{placeholder:"",type:"tel",pattern:"^\\d{10}$",required:""},domProps:{value:t.formData.phonenumber},on:{input:function(s){s.target.composing||t.$set(t.formData,"phonenumber",s.target.value)}}})])]),t.errorData.phone?a("span",{staticClass:"form-input__error-msg"},[t._v("Phone number is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("div",{staticClass:"form-input"},[a("label",{staticClass:"form-input__label"},[t._v("Branch")]),a("div",{staticClass:"form-input__input"},[a("select2-multiple-control",{attrs:{placeholder:"Select as least one branch",options:t.options,settings:t.settings},model:{value:t.formData.branchID,callback:function(s){t.$set(t.formData,"branchID",s)},expression:"formData.branchID"}})],1),t.errorData.branch?a("span",{staticClass:"form-input__error-msg"},[t._v("Branch is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Email address")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.emailaddress,expression:"formData.emailaddress"}],attrs:{type:"email",placeholder:""},domProps:{value:t.formData.emailaddress},on:{input:function(s){s.target.composing||t.$set(t.formData,"emailaddress",s.target.value)}}})]),t.errorData.email?a("span",{staticClass:"form-input__error-msg"},[t._v("Enter a valid email address")]):t._e()])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Password")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.password,expression:"confirmPass.password"}],attrs:{type:"password",placeholder:""},domProps:{value:t.confirmPass.password},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"password",s.target.value)}}})]),t.confirmPass.passwordError?a("span",{staticClass:"form-input__error-msg"},[t._v("Enter a password")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Confirm password")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.confirmPassword,expression:"confirmPass.confirmPassword"}],attrs:{type:"password"},domProps:{value:t.confirmPass.confirmPassword},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"confirmPassword",s.target.value)}}})]),t.confirmPass.confirmPasswordError?a("span",{staticClass:"form-input__error-msg"},[t._v(t._s(t.confirmPass.message))]):t._e()])])]),a("div",{staticClass:"d-flx-alc-jfe mt-3"},[a("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                + Create User\n              ")])])],1)])]),a("div",{attrs:{id:"edit-staff","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#edit-staff',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.resetEditData}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Edit User")]),a("p",[t._v("\n              Edit/update user name, description and necessary information from\n              here\n            ")])]),a("form",{on:{submit:function(s){return s.preventDefault(),t.updateStaff.apply(null,arguments)}}},[a("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("div",{staticClass:"flex-width-1-1 less-gp"},[""===t.editData.profilelink||null===t.editData.profilelink||"http://68.65.121.57:8080/"===t.editData.profilelink?a("img",{attrs:{src:""}}):t.editData.profilelink.includes("http://")&&t.editData.profilelink.includes("https://")?a("img",{attrs:{src:t.editData.profilelink.replace("http://68.65.121.57:8080/",""),alt:""}}):a("img",{staticStyle:{"margin-right":"auto","margin-left":"auto",width:"120px",height:"120px","border-radius":"50%"},attrs:{src:t.editData.profilelink,alt:""}})]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Avatar")]),a("div",{staticClass:"form-input__input"},[a("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.handleUpdateImage}})])])]),a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("First name")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.firstname,expression:"editData.firstname"}],attrs:{type:"text",placeholder:""},domProps:{value:t.editData.firstname},on:{input:function(s){s.target.composing||t.$set(t.editData,"firstname",s.target.value)}}})]),t.errorData.firstname?a("span",{staticClass:"form-input__error-msg"},[t._v("First name is mandatory")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Last name")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.lastname,expression:"editData.lastname"}],attrs:{type:"text",placeholder:""},domProps:{value:t.editData.lastname},on:{input:function(s){s.target.composing||t.$set(t.editData,"lastname",s.target.value)}}})]),t.errorData.lastname?a("span",{staticClass:"form-input__error-msg"},[t._v("Last name is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Phone number")]),a("div",{staticClass:"flex-width-uneven input-phone-flag"},[a("div",{staticClass:"d-flx-alc flag-drop"},[a("img",{attrs:{src:"/uploads/flag.svg",alt:""}}),a("p",[t._v("+234")])]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.phonenumber,expression:"editData.phonenumber"}],attrs:{type:"tel",pattern:"^\\d{10}$",required:""},domProps:{value:t.editData.phonenumber},on:{input:function(s){s.target.composing||t.$set(t.editData,"phonenumber",s.target.value)}}})])]),t.errorData.phone?a("span",{staticClass:"form-input__error-msg"},[t._v("Phone number is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("div",{staticClass:"form-input"},[a("label",{staticClass:"form-input__label"},[t._v("Branch")]),a("div",{staticClass:"form-input__input"},[a("select2-multiple-control",{attrs:{placeholder:"Select as least one branch",options:t.options,settings:t.settings},model:{value:t.editData.branchID,callback:function(s){t.$set(t.editData,"branchID",s)},expression:"editData.branchID"}})],1),t.errorData.branch?a("span",{staticClass:"form-input__error-msg"},[t._v("Branch is mandatory")]):t._e()])]),a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Email address")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.emailaddress,expression:"editData.emailaddress"}],attrs:{type:"email",placeholder:""},domProps:{value:t.editData.emailaddress},on:{input:function(s){s.target.composing||t.$set(t.editData,"emailaddress",s.target.value)}}})]),t.errorData.email?a("span",{staticClass:"form-input__error-msg"},[t._v("Enter a valid email address")]):t._e()])]),t.changePasswordStatus?a("div",{staticClass:"flex-width-1-2 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Password")]),a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.password,expression:"confirmPass.password"}],attrs:{id:"password",type:"password"},domProps:{value:t.confirmPass.password},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"password",s.target.value)}}}),a("svg",{attrs:{id:"edit-pass"},on:{click:function(s){return t.togglePassword("password","edit-pass","edit-pass-off")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see"}})]),a("svg",{staticStyle:{display:"none"},attrs:{id:"edit-pass-off"},on:{click:function(s){return t.togglePassword("password","edit-pass-off","edit-pass")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see-off"}})])]),t.confirmPass.passwordError?a("span",{staticClass:"form-input__error-msg"},[t._v("Password is mandatory")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Confirm password")]),a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.confirmPassword,expression:"confirmPass.confirmPassword"}],attrs:{id:"confirm_password",type:"password"},domProps:{value:t.confirmPass.confirmPassword},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"confirmPassword",s.target.value)}}}),a("svg",{attrs:{id:"edit-see"},on:{click:function(s){return t.togglePassword("confirm_password","edit-see","edit-see-off")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see"}})]),a("svg",{staticStyle:{display:"none"},attrs:{id:"edit-see-off"},on:{click:function(s){return t.togglePassword("confirm_password","edit-see-off","edit-see")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see-off"}})])]),t.confirmPass.confirmPasswordError||t.confirmPass.password!=t.confirmPass.confirmPassword?a("span",{staticClass:"form-input__error-msg"},[t._v(t._s(""!=t.confirmPass.message?"Password confirmation Does not Match":t.confirmPass.message))]):t._e()])]):t._e()]),a("div",{staticClass:"d-flx-alc-jfe mt-3"},[a("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"updateBtn"}},[t._v("\n                + Update User\n              ")])])],1)])]),a("div",{attrs:{id:"delete-text","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#delete-text',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.cancelDelete}},[t._v("\n            X\n          ")]),a("div",{staticClass:"modal-header d-flx"},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#co-delete"}})]),a("div",{staticClass:"ml-1"},[a("h2",[t._v("Delete User ?")]),a("p",[t._v("\n                Please confirm you really want to delete this staff, this action\n                cannot be undone.\n              ")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"d-flx-alc-jc mt-3"},[a("button",{staticClass:"btn btn-no-fill",on:{click:t.cancelDelete}},[t._v("\n                Cancel\n              ")]),a("button",{staticClass:"btn btn-error ml-2",attrs:{id:"deleteBtn"},on:{click:t.doDeleteUser}},[t._v("\n                Delete\n              ")])])])])]),a("div",{attrs:{id:"token","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#token',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.cancelToken}},[t._v("\n            X\n          ")]),a("div",{staticClass:"modal-header d-flx"},[a("svg",[a("use",{attrs:{href:"/uploads/icons.svg#auth-checked"}})]),a("div",{staticClass:"ml-1"},[a("h2",{staticStyle:{color:"green"}},[t._v("Token Generated Successfully")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{"font-size":"medium",color:"black"}},[a("span",[t._v("New Token : ")]),a("span",[t._v(t._s(t.token))])])])])]),a("div",{attrs:{id:"change-password","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#change-password',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closePasswordModal}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Change User Password")])]),a("form",{on:{submit:function(s){return s.preventDefault(),t.updatePassword.apply(null,arguments)}}},[a("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("div",{staticClass:"flex-width-1-1 less-gp"},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Password")]),a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.password,expression:"confirmPass.password"}],attrs:{id:"password",type:"password"},domProps:{value:t.confirmPass.password},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"password",s.target.value)}}}),a("svg",{attrs:{id:"pass"},on:{click:function(s){return t.togglePassword("password","pass","pass-off")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see"}})]),a("svg",{staticStyle:{display:"none"},attrs:{id:"pass-off"},on:{click:function(s){return t.togglePassword("password","pass-off","pass")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see-off"}})])]),t.confirmPass.passwordError?a("span",{staticClass:"form-input__error-msg"},[t._v("Password is mandatory")]):t._e()]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Confirm password")]),a("label",{staticClass:"search-w-icon"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass.confirmPassword,expression:"confirmPass.confirmPassword"}],attrs:{id:"confirm_password",type:"password"},domProps:{value:t.confirmPass.confirmPassword},on:{input:function(s){s.target.composing||t.$set(t.confirmPass,"confirmPassword",s.target.value)}}}),a("svg",{attrs:{id:"see"},on:{click:function(s){return t.togglePassword("confirm_password","see","see-off")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see"}})]),a("svg",{staticStyle:{display:"none"},attrs:{id:"see-off"},on:{click:function(s){return t.togglePassword("confirm_password","see-off","see")}}},[a("use",{attrs:{href:"/uploads/icons.svg#see-off"}})])]),t.confirmPass.confirmPasswordError||t.confirmPass.password!=t.confirmPass.confirmPassword?a("span",{staticClass:"form-input__error-msg"},[t._v(t._s(""!=t.confirmPass.message?"Password confirmation Does not Match":t.confirmPass.message))]):t._e()])])]),a("div",{staticClass:"d-flx-alc-jfe mt-3"},[a("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"updatePasswordBtn"}},[t._v("\n                + Update password\n              ")])])],1)])]),a("div",{attrs:{id:"set-permissions","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#set-permissions',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closePermissions}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Set Permissions")])]),a("permission",{ref:"permissions",on:{saved:t.closePermissions}})],1)]),a("div",{attrs:{id:"set-role","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#set-role',bgclose:false}"}},[a("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[a("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.cancelRole}}),a("div",{staticClass:"modal-header"},[a("h2",[t._v("Set Role")]),a("div",{staticClass:"form-input"},[a("div",{staticClass:"form-input__input"},[a("select",{staticClass:"filter-btn box-deco-smallr",on:{change:t.handleChange}},[a("option",{attrs:{value:""}},[t._v("-Select User Role-")]),t._l(t.staff_role,function(s,e){return a("option",{key:e,domProps:{value:s.id}},[t._v("\n                    "+t._s(s.rolename)+"\n\t\t\t\t\t\n                  ")])})],2)])]),a("div",{staticClass:"d-flx-alc-jfe mt-3"},[a("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"assignRole"},on:{click:t.updateRole}},[t._v("\n                Assign Role\n              ")])])])])])]),a("div",{staticClass:"inner-main-wrapper"},[t.loading?a("ul",[a("li",[a("div",{staticClass:"gifts-card"},[a("div",{staticClass:"gifts-card__extra"}),a("div",{staticClass:"gifts-card__title"},[t._v("Loading...please wait")])])])]):t._e(),!t.loading&&t.filteredList.length<1?a("ul",[a("li",[a("div",{staticClass:"gifts-card"},[a("div",{staticClass:"gifts-card__extra"}),a("div",{staticClass:"gifts-card__title"},[t._v("No record at the moment")])])])]):t._e(),!t.loading&&t.filteredList.length>0?a("ul",{staticClass:"grid mostly-3"},t._l(t.filteredList,function(s,e){return a("li",{key:e},[a("div",{staticClass:"card staff-card box-deco-bg"},[a("div",{staticClass:"drop-down org-drop drop-set"},[a("button",{staticClass:"btn btn-icon drop-set",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.toggleDropdown(s)}}},[a("svg",{staticClass:"drop-set"},[a("use",{attrs:{"xlink:href":"/uploads/icons.svg#more"}})])]),a("div",{staticClass:"drop-wrapper",attrs:{"data-drop-down":""}},[a("ul",{staticClass:"drop-lists"},[t.user.rolepermission&&t.user.rolepermission[0].staff.changepassword||t.isMerchant?a("li",{staticClass:"drop-list-item"},[a("button",{staticClass:"btn btn-text",attrs:{type:"button"},on:{click:function(a){return t.changePassword(s)}}},[t._v("\n                      Change Password\n                    ")])]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].staff.editstaff||t.isMerchant?a("li",{staticClass:"drop-list-item"},[a("button",{staticClass:"btn btn-text",attrs:{type:"button"},on:{click:function(a){return t.editStaff(s)}}},[t._v("\n                      Edit User\n                    ")])]):t._e(),a("li",{staticClass:"drop-list-item"},[a("button",{staticClass:"btn btn-text",attrs:{type:"button"},on:{click:function(a){return t.setRole(s)}}},[t._v("\n                      Assign Role\n                    ")])]),t.user.rolepermission&&t.user.rolepermission[0].staff.deletestaff||t.isMerchant?a("li",{staticClass:"drop-list-item"},[a("button",{staticClass:"btn btn-text",attrs:{type:"button"},on:{click:function(a){return t.deleteUser(s)}}},[t._v("\n                      Delete User\n                    ")])]):t._e()])])]),a("div",{staticClass:"card__body"},[a("a",{attrs:{href:"javascript:;"}},[s.profilelink.includes("None")&&s.profilelink.includes("https://")?a("img",{attrs:{src:"/default_image.png",alt:""}}):""==s.profilelink||null==s.profilelink||"http://68.65.121.57:8080/"==s.profilelink?a("img",{attrs:{src:"/default_image.png",alt:""}}):a("img",{attrs:{src:s.profilelink,alt:""}})]),a("div",{staticClass:"card__body--content"},[a("h3",[t._v(t._s(s.firstname)+", "+t._s(s.lastname))]),a("p",{staticClass:"email"},[t._v("\n                  "+t._s(s.username)+"\n                ")]),a("p",[a("span",{staticClass:"attendant"},[t._v("\n                    "+t._s(s.rolename)+"\n                  ")])]),a("p",{staticClass:"number"},[t._v("\n                  "+t._s(s.phonenumber)+"\n                ")]),a("p",{staticClass:"branch"},[t._v("\n                  "+t._s(""==s.branchname?"Not Appplicable":s.branchname)+"\n                ")])])])])])}),0):t._e()])])};e._withStripped=!0;var r={render:e,staticRenderFns:[]};s.a=r},yhXh:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.loading?a("ul",[t._m(0)]):t._e(),!t.loading&&t.permissions.length<1?a("ul",[t._m(1)]):t._e(),!t.loading&&t.permissions.length>0?a("ul",[a("form",{on:{submit:function(s){return s.preventDefault(),t.savePermissions.apply(null,arguments)}}},[a("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[a("div",{staticClass:"flex-width-1-1 less-gp"},t._l(t.permissions,function(s,e){return a("label",{key:e,staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v(t._s(s.description))]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.active,expression:"permission.active"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.active)?t._i(s.active,null)>-1:s.active},on:{change:function(a){var e=s.active,r=a.target,i=!!r.checked;if(Array.isArray(e)){var o=t._i(e,null);r.checked?o<0&&t.$set(s,"active",e.concat([null])):o>-1&&t.$set(s,"active",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(s,"active",i)}}})])])}),0)]),t._m(2)],1)]):t._e()])};e._withStripped=!0;var r={render:e,staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("div",{staticClass:"gifts-card"},[s("div",{staticClass:"gifts-card__extra"}),s("div",{staticClass:"gifts-card__title"},[this._v("\r\n                Loading...please wait\r\n            ")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("div",{staticClass:"gifts-card"},[s("div",{staticClass:"gifts-card__extra"}),s("div",{staticClass:"gifts-card__title"},[this._v("\r\n                No record at the moment\r\n            ")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"d-flx-alc-jfe mt-3"},[s("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"savePermissions"}},[this._v("\r\n                + Save Permissions\r\n                ")])])}]};s.a=r}});