webpackJsonp([83],{NzBv:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("overlay-scrollbars",{staticClass:"main-content-wrap"},[s("div",{staticClass:"d-flx-alc-jsb page-extras"},[s("p",{staticClass:"fw-medium font-16"}),s("div",{staticClass:"search-filter d-flx-alc-jfe"},[s("label",{staticClass:"search-w-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),s("div",{staticClass:"drop-down auth-drop"}),s("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.displayModal}},[s("svg",[s("use",{attrs:{"xlink:href":"/uploads/icons.svg#bell-btn"}})]),s("span",{staticClass:"ml-1"},[t._v("Send Notifications")])])])]),s("div",{attrs:{id:"parent-component"}},[s("div",{attrs:{id:"send-push-notification","uk-modal":"","data-uk-modal":"{target:'#send-push-notification',bgclose:false}",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.closeModal}},[t._v("X")]),s("div",{staticClass:"modal-header"},[s("h2",[t._v(" Notification message")]),s("p",[t._v("Create notifications to be sent to your customers.")])]),s("form",{on:{submit:function(a){return a.preventDefault(),t.submitNotification.apply(null,arguments)}}},[s("overlay-scrollbars",{staticClass:"modal-body"},[s("div",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Select customers")]),s("div",{staticClass:"form-input__input"},[s("select2-multiple-control",{attrs:{placeholder:"Select as least one customer",options:t.options,settings:t.settings},model:{value:t.formData.id,callback:function(a){t.$set(t.formData,"id",a)},expression:"formData.id"}})],1),t.errorData.id?s("span",{staticClass:"form-input__error-msg"},[t._v("Please select a customer")]):t._e()]),s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Notification Subject")]),s("div",{staticClass:"form-input__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.title,expression:"formData.title"}],attrs:{type:"text",placeholder:"Buy 2 and get one free!"},domProps:{value:t.formData.title},on:{input:function(a){a.target.composing||t.$set(t.formData,"title",a.target.value)}}})]),t.errorData.title?s("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a title")]):t._e()]),s("div",{staticClass:"form-input"},[s("label",{staticClass:"form-input__label"},[t._v("Notification Medium")]),s("div",{staticClass:"form-input__input"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.type,expression:"formData.type"}],on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"type",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Select a notification type")]),s("option",{attrs:{value:"social"}},[t._v("WhatsApp")]),s("option",{attrs:{value:"push"}},[t._v("Push Notifications")])])]),t.errorData.type?s("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a medium")]):t._e()]),s("div",{staticClass:"form-input"},[s("label",{staticClass:"form-input__label"},[t._v("Notification body")]),s("div",{staticClass:"form-input__input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.body,expression:"formData.body"}],attrs:{rows:"5",placeholder:"Enter"},domProps:{value:t.formData.body},on:{input:function(a){a.target.composing||t.$set(t.formData,"body",a.target.value)}}})]),t.errorData.body?s("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a message body")]):t._e()])]),s("div",{staticClass:"d-flx-alc-jfe mt-3"},[s("button",{staticClass:"btn btn-no-fill uk-modal-close",attrs:{type:"button"},on:{click:t.closeModal}},[t._v("\n              Cancel\n            ")]),s("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submit",type:"submit"}},[t._v("\n              Send Notification\n            ")])])],1)])]),s("div",{attrs:{id:"customer-details","uk-modal":"","data-uk-modal":"{target:'#customer-details',bgclose:false}",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal review-modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),s("div",{staticClass:"modal-header"},[s("h2",[t._v("\n            Customer Details\n            "),s("span",{staticClass:"status delivered"},[t._v("Active")])])]),s("div",{staticClass:"modal-body p-3",attrs:{"uk-overflow-auto":""}},[s("h3",{staticClass:"uppercase co-grey fw-medium font-16 mb-2"},[t._v("Business information")]),s("div",{staticClass:"box-deco d-flx-alc-jc-fwp p-3"},[s("div",{staticClass:"avatar avatar-80"},[s("img",{attrs:{src:"/default_image.png",alt:""}})]),s("div",{staticClass:"flex-width-1-2 small-gap mt-5"},[s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  Customer’s Name\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v(t._s(t.customerDetails.firstname)+" "+t._s(t.customerDetails.lastname))])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  Phone number\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v(t._s(t.customerDetails.phonenumber))])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  Email Address\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v("\n                  "+t._s(t.customerDetails.emailaddress)+"\n                ")])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  Home Address\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v("\n                  N/A\n                ")])])])]),s("div",{staticClass:"mt-5"},[s("h3",{staticClass:"uppercase co-grey fw-medium font-16 mb-2"},[t._v("Purchase information")]),s("div",{staticClass:"flex-width-1-2 small-gap  p-3 box-deco"},[s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  No of Orders made\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v(t._s(t.formNumber(t.customerDetails.totalordermade)))])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-normal font-16"},[t._v("\n                  Total amount Spent\n                ")]),s("p",{staticClass:"fw-normal font-18 co-rich-black"},[t._v("₦ "+t._s(t.formatPrice(t.customerDetails.totalamountspent)))])])])])]),s("div",{staticClass:"modal-footer d-flx-alc-jfe"},[s("button",{staticClass:"btn btn-no-fill uk-modal-close"},[t._v("Cancel")]),s("button",{staticClass:"btn btn-error ml-1",attrs:{"uk-toggle":"target: #suspend-customer"}},[s("svg",[s("use",{attrs:{"xlink:href":"/uploads/icons.svg#warning"}})]),s("span",{staticClass:"ml-h"},[t._v("suspend")])]),s("a",{staticClass:"btn btn--primary ml-1",attrs:{href:"javascript:;"},on:{click:function(a){return t.transactionHistory(t.customerDetails)}}},[t._v("View Transaction History")])])])]),s("div",{attrs:{id:"suspend-customer","uk-modal":"","data-uk-modal":"{target:'#suspend-customer',bgclose:false}",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),s("div",{staticClass:"modal-header d-flx"},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#suspend"}})]),s("div",{staticClass:"ml-1"},[s("h2",[t._v("Suspend Customer ?")]),s("p",{staticClass:"mt-1"},[t._v("You’re about to suspend"),s("span",{staticClass:"fw-medium"},[t._v(" Kehinde Ademola")]),t._v(". If suspended, this customer will not be able to make any purchases on Ntisa.")]),s("div",{staticClass:"my-1"},[s("label",{staticClass:"form-input"},[s("span",{staticClass:"form-input__label"},[t._v("Suspension Reason")]),s("div",{staticClass:"form-input__input"},[s("input",{attrs:{type:"text",placeholder:"State your suspension reason here"}})])])])])]),s("div",{staticClass:"d-flx-alc-jfe mt-3"},[s("button",{staticClass:"btn btn-no-fill uk-modal-close"},[t._v("\n            Cancel\n          ")]),s("button",{staticClass:"btn btn-error ml-2"},[t._v("\n            Suspend Customer\n          ")])])])]),s("div",{attrs:{id:"activate-customer","uk-modal":"","data-uk-modal":"{target:'#activate-customer',bgclose:false}",container:"#parent-component"}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),s("div",{staticClass:"modal-header d-flx"},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#confirm"}})]),s("div",{staticClass:"ml-1"},[s("h2",[t._v("Activate Customer?")]),s("p",{staticClass:"mt-2"},[t._v("You’re about to activate "),s("span",{staticClass:"fw-medium"},[t._v(" Kehinde Ademola")]),t._v(".  This gives the customer access to Ntisa again")])])]),s("div",{staticClass:"d-flx-alc-jfe mt-3"},[s("button",{staticClass:"btn btn-no-fill uk-modal-close"},[t._v("\n            Cancel\n          ")]),s("button",{staticClass:"btn btn--primary ml-2"},[t._v("\n            Activate Customer\n          ")])])])])]),s("div",{staticClass:"inner-main-wrapper"},[s("overlay-scrollbars",{staticClass:"table-wrapper"},[s("figcaption",{staticClass:"sr"},[t._v("\n        A table showing information of customers\n      ")]),s("table",{staticClass:"table-content "},[s("thead",{},[s("tr",[s("th",[t._v("Customer Name")]),s("th",[t._v("Email address")]),s("th",[t._v("Phone Number")]),s("th",[t._v("Total Spent(₦)")]),s("th",[t._v("Signup Date")]),s("th")])]),s("tbody",{staticClass:"tablebody"},[t.loading?s("tr",[s("td",{attrs:{colspan:"8"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?s("tr",[s("td",{attrs:{colspan:"8"}},[t._v("No customer details")])]):t._e(),t._l(t.filteredList,function(a,e){return!t.loading&&t.filteredList.length>0?s("tr",{key:e},[s("td",[s("div",{staticClass:"avatar-wtext"},[s("img",{attrs:{src:"/default_image.png",alt:""}}),s("span",[t._v(t._s(a.firstname)+" "+t._s(a.lastname))])])]),s("td",{staticClass:"email"},[t._v(t._s(a.emailaddress))]),s("td",[t._v(t._s(a.phonenumber))]),s("td",[t._v(" "+t._s(t.formatPrice(a.totalamountspent)))]),s("td",[t._v(t._s(t.$moment(a.created_at).format("Do MMMM, YYYY")))]),s("td",{staticClass:"d-flx-alc"},[s("button",{staticClass:"btn btn-icon",on:{click:function(s){return t.viewDetails(a)}}},[s("svg",[s("use",{attrs:{"xlink:href":"/uploads/icons.svg#page"}})])]),s("button",{staticClass:"btn btn-icon",attrs:{"uk-toggle":"target: #suspend-customer"},on:{click:function(s){return t.suspendAccount(a)}}},[s("svg",[s("use",{attrs:{"xlink:href":"/uploads/icons.svg#warning"}})])])])]):t._e()})],2)])])],1)])};e._withStripped=!0;var o={render:e,staticRenderFns:[]};a.a=o},RixM:function(t,a,s){"use strict";(function(t){a.a={layout:"main",computed:{filteredList:function(){var t=this;if(void 0!==this.customers)return this.customers.filter(function(a){return a.firstname.toLowerCase().includes(t.search.toLowerCase())?a.firstname.toLowerCase().includes(t.search.toLowerCase()):a.lastname.toLowerCase().includes(t.search.toLowerCase())})}},data:function(){return{search:"",loading:!0,customers:[],customerDetails:{},formData:{id:[],title:"",body:"",type:""},errorData:{id:!1,title:!1,body:!1},options:[{id:"",text:"Select Customers"}],settings:{width:"100%"}}},methods:{formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getAllCustomers:function(){var t=this;this.$store.dispatch("customer/getCustomers",this.user.id).then(function(a){if(a.data.status)return void 0!=a.data.data.data&&a.data.data.data.length>0&&(t.customers=a.data.data.data,t.setCustomers(t.customers)),void(t.loading=!1);t.loading=!1,t.$toast.error("An error occurred")}).catch(function(a){t.loading=!1,t.$toast.error("An error occurred while retrieving data")})},setCustomers:function(t){var a=this;t.forEach(function(t){var s={id:t.id,text:t.firstname+" "+t.lastname};a.options.push(s)})},submitNotification:function(){var a=this;if(!this.validateData()){var s=this.formData.id.map(function(t){return parseInt(t,10)});this.formData.id=s,t("#submitBtn").attr("disabled",!0).html("Sending...Please wait"),"push"===this.formData.type&&(this.formData.url="/API/pushnotification/"),this.$store.dispatch("customer/sendPushNotification",this.formData).then(function(s){if(console.log(s),t("#submitBtn").attr("disabled",!1).html("Send Notification"),s.data.status)return a.$toast.success("notification sent"),void a.closeModal();a.$toast.error(s.data.message)}).catch(function(s){t("#submitBtn").attr("disabled",!1).html("Send Notification"),a.$toast.error("An error occurred")})}},transactionHistory:function(t){localStorage.removeItem("setDetails"),UIkit.modal("#customer-details").toggle(),this.$store.dispatch("customer/clearDetails"),this.$store.dispatch("customer/setDetails",t),this.$router.push("/customers/transaction")},viewDetails:function(t){this.customerDetails=t,UIkit.modal("#customer-details").toggle()},displayModal:function(){UIkit.modal("#send-push-notification").toggle()},closeModal:function(){this.clearData(),UIkit.modal("#send-push-notification").toggle()},clearData:function(){this.formData={id:[],title:"",body:"",type:""}},clearError:function(){this.errorData={id:!1,title:!1,body:!1,type:!1}},validateData:function(){return this.clearError(),this.formData.id.length<1?(this.errorData.id=!0,!0):""===this.formData.title?(this.errorData.title=!0,!0):""===this.formData.body?(this.errorData.body=!0,!0):""===this.formData.type&&(this.errorData.type=!0,!0)},suspendAccount:function(t){UIkit.modal("#suspend-customer").toggle()}},mounted:function(){this.getAllCustomers()}}}).call(a,s("7t+N"))},"cy++":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("RixM"),o=s("NzBv"),i=s("VU/8")(e.a,o.a,!1,null,null,null);i.options.__file="pages/campaigns/push.vue",a.default=i.exports}});