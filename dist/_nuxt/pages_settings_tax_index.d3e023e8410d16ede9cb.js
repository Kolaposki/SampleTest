webpackJsonp([40],{F0MG:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("overlay-scrollbars",{staticClass:"page-extras d-flx-alc-jsb settings-extra"},[e("div",{staticClass:"links-wrap"},[e("nuxt-link",{attrs:{to:"/settings"}},[t._v("Business Rules")]),t.user.rolepermission&&t.user.rolepermission[0].tax.viewtax||t.isMerchant?e("nuxt-link",{staticClass:"active",attrs:{to:"/settings/tax"}},[t._v("Tax")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].discounts.viewdiscount||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/discount"}},[t._v("Discount")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewroles||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/roles"}},[t._v("Roles & Permissions")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewlease||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/lease"}},[t._v("Lease")]):t._e()],1)]),e("div",{attrs:{id:"parent-component"}},[e("div",{attrs:{id:"delete-text","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#delete-text',bgclose:false}"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical small-modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.cancelDelete}},[t._v("X")]),e("div",{staticClass:"modal-header d-flx"},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#co-delete"}})]),e("div",{staticClass:"ml-1"},[e("h2",[t._v("Remove Tax ?")]),e("p",[t._v("Please confirm you really want to delete this Tax, this action cannot be undone.")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"d-flx-alc-jc mt-3"},[e("button",{staticClass:"btn btn-no-fill",on:{click:t.cancelDelete}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn-error ml-2",attrs:{id:"deleteTax"},on:{click:t.doDelete}},[t._v("\n                Delete\n              ")])])])])])]),e("div",{staticClass:"inner-main-wrapper"},[e("div",{staticClass:"py-3 px-0"},[e("section",{staticClass:"setting-section"},[e("div",{staticClass:"setting-section-title d-flx-alc-jsb"},[e("h2",{},[t._v("Tax")]),t.user.rolepermission&&t.user.rolepermission[0].tax.addtax||t.isMerchant?e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:t.openModal}},[t._v("\n              Add tax\n            ")]):t._e()]),e("overlay-scrollbars",{staticClass:"table-wrapper"},[e("table",{staticClass:"table-content"},[e("thead",{},[e("tr",[e("th",{staticClass:"small-space  column-name"},[t._v("Name")]),e("th",{staticClass:"small-space  column-name"},[t._v("Value(%)")]),e("th",{staticClass:"small-space"},[t._v("Action")])])]),e("tbody",{staticClass:"table-content large-content"},[t.loading?e("tr",[e("td",{attrs:{colspan:"2"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.taxes.length<1?e("tr",[e("td",{attrs:{colspan:"2"}},[t._v("No tax set at the moment. You could apply tax to your orders or product")])]):t._e(),t._l(t.taxes,function(a){return!t.loading&&t.taxes.length>0?e("tr",{key:a.id},[e("td",{staticClass:"column-name"},[t._v(t._s(a.name))]),e("td",{staticClass:"column-name"},[t._v(t._s(a.value))]),e("td",{staticClass:"d-flx-alc"},[t.user.rolepermission&&t.user.rolepermission[0].tax.edittax||t.isMerchant?e("button",{staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:function(e){return t.editTax(a)}}},[t._v("\n                      Edit\n                    ")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].tax.deletetax||t.isMerchant?e("button",{staticClass:"btn btn--danger ml-1",attrs:{type:"button"},on:{click:function(e){return t.deleteTax(a)}}},[t._v("\n                      Delete\n                    ")]):t._e()])]):t._e()})],2)])])],1)])]),e("div",{attrs:{id:"add-tax","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeModal}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Add tax")]),e("p",[t._v("Enter the details to create a new tax.")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.saveTax.apply(null,arguments)}}},[e("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Name")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],attrs:{type:"text"},domProps:{value:t.formData.name},on:{input:function(a){a.target.composing||t.$set(t.formData,"name",a.target.value)}}})]),t.errorData.name?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a name")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Value (%)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.value,expression:"formData.value"}],attrs:{id:"add_value_tax",type:"number",onblur:"document.getElementById('add_value_tax').value= parseFloat(document.getElementById('add_value_tax').value).toFixed(2);",min:"0",max:"100",step:"0.01"},domProps:{value:t.formData.value},on:{input:function(a){a.target.composing||t.$set(t.formData,"value",a.target.value)}}})]),t.errorData.value?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a value")]):t._e()]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:t.closeModal}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"}},[t._v("\n                + Save\n              ")])])])])])]),e("div",{attrs:{id:"edit-tax","uk-modal":""}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""},on:{click:t.closeEdit}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Edit tax")]),e("p",[t._v("Enter the details to update a new tax.")])]),e("form",{on:{submit:function(a){return a.preventDefault(),t.updateTax.apply(null,arguments)}}},[e("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Name")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.name,expression:"editData.name"}],attrs:{type:"text"},domProps:{value:t.editData.name},on:{input:function(a){a.target.composing||t.$set(t.editData,"name",a.target.value)}}})]),t.errorData.name?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a name")]):t._e()]),e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Value (%)")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editData.value,expression:"editData.value"}],attrs:{id:"edit_value_tax",onkeypress:"return (document.getElementById('edit_value_tax').value.indexOf('.') > 0 ? (document.getElementById('edit_value_tax').value.substr(document.getElementById('edit_value_tax').value.indexOf('.'), 3).length > 2 ? false : true) : false",type:"text"},domProps:{value:t.editData.value},on:{input:function(a){a.target.composing||t.$set(t.editData,"value",a.target.value)}}})]),t.errorData.value?e("span",{staticClass:"form-input__error-msg"},[t._v("Please enter a value")]):t._e()]),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"},on:{click:t.closeEdit}},[t._v("\n                Cancel\n              ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"updateBtn",type:"submit"}},[t._v("\n                Edit\n              ")])])])])])])],1)};s._withStripped=!0;var i={render:s,staticRenderFns:[]};a.a=i},Q77u:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("j9e3"),i=e("F0MG"),n=!1;var o=function(t){n||e("URRl")},r=e("VU/8")(s.a,i.a,!1,o,"data-v-25e1e9bb",null);r.options.__file="pages/settings/tax/index.vue",a.default=r.exports},URRl:function(t,a,e){var s=e("fSxv");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("1e9427aa",s,!1,{sourceMap:!1})},fSxv:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,".btn--primary[data-v-25e1e9bb]{background-color:#089628;color:#fff;min-width:10px!important}.btn--danger[data-v-25e1e9bb]{background-color:#dc3545;color:#fff;min-width:10px!important}.btn[data-v-25e1e9bb]{padding:9.6px 19.2px;padding:.6rem 1.2rem}",""])},j9e3:function(t,a,e){"use strict";(function(t){a.a={layout:"main",data:function(){return{loading:!0,formData:{merchID:"",tax:""},tax_classifications:[],taxes:[],deleteData:{},errorData:{tax:!1},editData:{tax:"",id:""}}},computed:{isCourierService:function(){return this.user.businessdescription.toLowerCase().includes("delivery")}},methods:{doDelete:function(){var t=this;this.$store.dispatch("tax/deleteTax",this.deleteData).then(function(a){if(a.data.status)return t.$toast.success(a.data.message),t.formData.merchID=t.user.id,t.getTaxs(),void t.cancelDelete();t.formData.merchID=t.user.id,t.$toast.error("An error occurred")}).catch(function(a){t.formData.merchID=t.user.id,console.log(a),t.$toast.error("An error occurred")})},cancelDelete:function(){this.deleteData={id:""},t("#delete-text").removeClass("uk-open").hide()},saveTax:function(){var a=this;this.clearErrorData(),""!==this.formData.name?""!==this.formData.value?""!==this.formData.tax_classification?(t("#submitBtn").attr("disabled",!0).html("Saving....please wait"),this.formData.tax_classification=this.tax_classifications[0].id,this.$store.dispatch("tax/saveTax",this.formData).then(function(e){if(t("#submitBtn").attr("disabled",!1).html("+ Save"),e.data.status)return a.$toast.success(e.data.message),a.formData.merchID=a.user.id,a.getTaxs(),void a.closeModal();a.formData.merchID=a.user.id,a.$toast.error(e.data.message)}).catch(function(e){a.formData.merchID=a.user.id,t("#submitBtn").attr("disabled",!1).html("+ Save"),console.log(e)})):this.errorData.tax_classification=!0:this.errorData.value=!0:this.errorData.name=!0},deleteTax:function(a){this.deleteData=a,t("#delete-text").addClass("uk-open").show()},updateTax:function(){var a=this;this.clearErrorData(),""!==this.editData.name?""!==this.editData.value?(this.editData.tax_classification=this.tax_classifications[0].id,t("#updateBtn").attr("disabled",!0).html("Updating..please wait"),this.$store.dispatch("tax/updateTax",this.editData).then(function(e){if(t("#updateBtn").attr("disabled",!1).html("+ Update"),e.data.status)return a.$toast.success(e.data.message),a.formData.merchID=a.user.id,a.getTaxs(),void a.closeEdit();a.editData.merchID=a.user.id,a.$toast.error(e.data.message)}).catch(function(e){a.editData.merchID=a.user.id,t("#updateBtn").attr("disabled",!1).html("+ Update"),console.log(e)})):this.errorData.value=!0:this.errorData.name=!0},getTaxs:function(){var t=this;this.$store.dispatch("tax/listTaxs",this.formData).then(function(a){t.loading=!1,t.taxes=a.data.data}).catch(function(a){t.loading=!1,console.log(a)})},getTaxClassification:function(){var t=this;this.$store.dispatch("tax/listTaxClassification",this.formData).then(function(a){t.loading=!1,t.tax_classifications=a.data.data}).catch(function(a){t.loading=!1,console.log(a)})},editTax:function(t){this.editData=t,UIkit.modal("#edit-tax").toggle()},openModal:function(){UIkit.modal("#add-tax").toggle()},closeModal:function(){this.formData={},this.formData.merchID=this.user.id,this.formData.tax_classification=this.tax_classifications[0].id,UIkit.modal("#add-tax").toggle("hide")},clearErrorData:function(){this.errorData={tax:!1}},closeEdit:function(){this.editData={},this.formData.merchID=this.user.id,this.editData.tax_classification=this.tax_classifications[0].id,UIkit.modal("#edit-tax").toggle("hide")}},beforeRouteEnter:function(t,a,e){var s=JSON.parse(localStorage.getItem("user"));void 0==s.role||s.rolepermission&&s.rolepermission[0].tax.viewtax?e():(alert("You have not been permitted to view this page"),e({path:"/dashboard"}))},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.getTaxs(),this.getTaxClassification()}}}).call(a,e("7t+N"))}});