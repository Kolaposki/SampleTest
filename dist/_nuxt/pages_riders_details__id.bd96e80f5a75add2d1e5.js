webpackJsonp([10],{"1Kzm":function(t,a,e){"use strict";var s=function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{ref:"map",staticClass:"map",attrs:{id:"map"}},[Boolean(this.map)?[this._t("default",null,{map:this.map})]:this._e()],2)])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};a.a=r},"4adl":function(t,a,e){"use strict";a.a={props:{map:{type:Object,required:!0},position:{type:Object,required:!0}},data:function(){return{marker:null}},mounted:function(){this.marker=new google.maps.Marker({map:this.map,position:this.position})},beforeDestroy:function(){},render:function(){return null}}},"6+Rh":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("div",{staticClass:"d-flx-alc-jsb page-extras"},[e("nuxt-link",{staticClass:"text-link",attrs:{to:"/riders"}},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#back"}})]),e("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])])],1),e("div",{attrs:{id:"parent-component"}},[e("div",{attrs:{id:"rider-cash","uk-modal":"","data-uk-modal":"{target:'#rider-cash',bgclose:false}",container:"#parent-component"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Rider's Cash Remittance")])]),e("form",[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-1 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Rider's cash remittance amount")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"text",placeholder:"Enter amount"},domProps:{value:t.amount},on:{keyup:t.formatInput,focus:function(a){t.errorData=!1},input:function(a){a.target.composing||(t.amount=a.target.value)}}})]),t.errorData?e("span",{staticClass:"form-input__error-msg"},[t._v("Amount field is required")]):t._e()])])]),e("div",{staticClass:"d-flx-alc-jfe mt-3"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeRiderCash}},[t._v("\n              Cancel\n            ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"createBtn"},on:{click:function(a){return a.preventDefault(),t.makeRiderPayment("ridercashremittance")}}},[t._v("\n              Submit\n            ")])])],1)])]),e("div",{attrs:{id:"rider-amount","uk-modal":"","data-uk-modal":"{target:'#rider-amount',bgclose:false}",container:"#parent-component"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Amount Due to Rider")])]),e("form",[e("overlay-scrollbars",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[e("div",{staticClass:"flex-width-1-1 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"}),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"text",placeholder:"Enter amount"},domProps:{value:t.amount},on:{keyup:t.formatInput,focus:function(a){t.errorData=!1},input:function(a){a.target.composing||(t.amount=a.target.value)}}})]),t.errorData?e("span",{staticClass:"form-input__error-msg"},[t._v("Amount field is required")]):t._e()])])]),e("div",{staticClass:"d-flx-alc-jfe mt-3"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button"},on:{click:t.closeRiderAmount}},[t._v("\n              Cancel\n            ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{type:"submit",id:"amountBtn"},on:{click:function(a){return a.preventDefault(),t.makeRiderPayment("ntisapayment")}}},[t._v("\n              Submit\n            ")])])],1)])])]),e("div",{staticClass:"inner-main-wrapper"},[t.loading?e("div",{staticClass:"flex-width-4 j-c-sb"},[t._v("\n      Loading....please wait\n    ")]):t._e(),t.loading?t._e():e("div",{staticClass:"flex-width-4 j-c-sb"},[e("div",{staticClass:"width-1-4"},[e("div",{staticClass:"box-deco-bg"},[e("div",{staticClass:"d-flx-r-md"},[e("div",{staticClass:"user"},[e("div",[""===t.photo||null===t.photo?e("img",{attrs:{src:"/default_image.png",alt:""}}):e("img",{attrs:{src:t.photo,alt:""}})]),e("h2",{staticClass:"user__name"},[t._v(t._s(t.riderData.riderfirstname)+" "+t._s(t.riderData.riderlastname))]),e("div",{staticClass:"user__rating"},[e("div",{class:"user__rating--level level"+t.removeFloat(t.riderData.rate__avg)},[e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#star"}})]),e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#star"}})]),e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#star"}})]),e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#star"}})]),e("svg",[e("use",{attrs:{href:"/uploads/icons.svg#star"}})])]),e("span",{staticClass:"user__rating--score"},[t._v(t._s(t.removeFloat(t.riderData.rate__avg)))])]),"online"==t.riderData.riderstatus?e("div",{staticClass:"user__status status engaged",staticStyle:{"margin-bottom":"10px"}},[t._v("\n\n                Online\n              ")]):"offline"==t.riderData.riderstatus?e("div",{staticClass:"user__status status offline",staticStyle:{"margin-bottom":"10px"}},[t._v("\n\n                Offline\n              ")]):e("div",{staticClass:"user__status status offline"},[t._v("\n                Unavailable\n              ")])]),e("div",{staticClass:"user-details"},[e("p",[e("span",{staticStyle:{"font-weight":"600"}},[t._v("Reg. Number")]),e("span",{staticClass:"co-rich-black"},[t._v(t._s(t.riderData.registrationnumber))])]),e("p",[e("span",{staticStyle:{"font-weight":"600"}},[t._v("Phone")]),e("span",{staticClass:"co-rich-black"},[t._v(t._s(t.riderData.riderphonenumber))])]),e("p",[e("span",{staticStyle:{"font-weight":"600"}},[t._v("Branch")]),e("span",{staticClass:"co-rich-black"},[t._v(t._s(t.riderData.branchname))])])])])]),e("div",{staticStyle:{"margin-top":"20px"}},[e("Map",{attrs:{center:t.track,zoom:t.zoom},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.map;return[e("map-marker",{attrs:{map:s,position:t.track}})]}}],null,!1,1185741162)})],1)]),e("div",{staticClass:"width-3-4"},[e("ul",{staticClass:"card-list none ml-mt-1 flex-width-1-4wgr"},[e("li",{staticClass:"card-item box-deco-bg",staticStyle:{"border-top":"3px solid forestgreen"}},[e("div",{staticClass:"card-item__header"},[e("div",[e("h3",[t._v("\n                  Total Earnings from Inception\n                ")])]),e("img",{attrs:{src:"/uploads/revenue-icon.png",width:"40px",alt:""}})]),e("div",{staticClass:"card-item__body"},[e("p",{staticClass:"card-item__body--count"},[t._v("₦"+t._s(t.formatPrice(t.riderData.ridertotalearning)))])])]),e("li",{staticClass:"card-item box-deco-bg",staticStyle:{"border-top":"3px solid forestgreen"}},[e("div",{staticClass:"card-item__header"},[e("h3",[t._v("\n                Earnings from Month to Date\n              ")]),e("img",{attrs:{src:"/uploads/revenue-icon.png",width:"40px",alt:""}})]),e("div",{staticClass:"card-item__body"},[e("p",{staticClass:"card-item__body--count"},[t._v("₦"+t._s(t.formatPrice(t.riderData.ridercurrentmonthearning)))])])]),e("li",{staticClass:"card-item box-deco-bg",staticStyle:{"border-top":"3px solid forestgreen",cursor:"pointer"},attrs:{title:"click here to update rider's cash remittance"},on:{click:t.riderCash}},[e("div",{staticClass:"card-item__header"},[e("div",[e("h3",[t._v("\n                  Amount Due to Ntisa\n                ")])]),e("img",{attrs:{src:"/uploads/revenue-icon.png",width:"40px",alt:""}})]),e("div",{staticClass:"card-item__body"},[e("p",{staticClass:"card-item__body--count"},[t._v("₦"+t._s(t.formatPrice(t.riderData.amountduetonitsa)))])])]),e("li",{staticClass:"card-item box-deco-bg",staticStyle:{"border-top":"3px solid forestgreen",cursor:"pointer"},attrs:{title:"click here to clear amount due to rider"},on:{click:t.riderAmount}},[e("div",{staticClass:"card-item__header"},[e("h3",[t._v("\n                Amount Due to Rider\n              ")]),e("img",{attrs:{src:"/uploads/revenue-icon.png",width:"40px",alt:""}})]),e("div",{staticClass:"card-item__body"},[e("p",{staticClass:"card-item__body--count"},[t._v("₦"+t._s(t.formatPrice(t.riderData.totalridercashcommission)))])])])]),e("div",[e("div",{staticClass:"d-flx-alc-jsb table-title"},[e("h3",{staticClass:"section-title"},[t._v("Deliveries")]),e("nuxt-link",{staticClass:"co-rich-black",attrs:{to:"/orders/"}},[t._v("View all")])],1),e("overlay-scrollbars",{staticClass:"table-wrapper no-deco"},[e("figcaption",{staticClass:"sr"},[t._v("\n              A table showing information of categories\n            ")]),e("table",{staticClass:"table-content large-content"},[e("thead",{},[e("tr",[e("th",{staticClass:"large-space column-name"},[t._v("Customer Name")]),e("th",{staticClass:"column-name"},[t._v("Contact")]),e("th",{staticClass:"column-name"},[t._v("Order ID")]),e("th",{staticClass:"column-name"},[t._v("Amount (N)")]),e("th",{staticClass:"column-name"},[t._v("Branch")]),e("th",{staticClass:"column-name"},[t._v("Status")]),e("th",{staticClass:"column-name"},[t._v("Order Time")])])]),e("tbody",{staticClass:"tablebody"},[t.riderData.orderdetails.length<1?e("tr",[e("td",{attrs:{colspan:"10"}},[t._v("No order details for this rider")])]):t._e(),t._l(t.riderData.orderdetails,function(a){return t.riderData.orderdetails.length>0?e("tr",{key:a.id},[e("td",{staticClass:"column-name"},[a.firstname&&a.lastname?e("span",[t._v(t._s(a.firstname)+" "+t._s(a.lastname))]):e("span",[t._v("N/A")])]),e("td",{staticClass:"column-name"},[t._v(t._s(a.phonenumber?a.phonenumber:"N/A"))]),e("td",{staticClass:"column-name",staticStyle:{color:"#28A745"}},[t._v(t._s(a.ordercode))]),e("td",{staticClass:"column-name"},[t._v(t._s(t.formatPrice(a.ordertotal)))]),e("td",{staticClass:"column-name"},[t._v(t._s(a.branchname))]),e("td",{staticClass:"tx-c column-name"},[e("span",{class:"status "+(void 0!==a.orderstatus?a.orderstatus.toLowerCase():"")},[t._v(t._s(a.orderstatus.includes("cancel")?"CANCELLED":a.orderstatus.replace("_"," ").toUpperCase()))])]),e("td",{staticClass:"column-name"},[t._v(t._s(t.$moment(a.created_at).format("Do, MMM YY")))])]):t._e()})],2)])])],1)])])])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};a.a=r},"72Ua":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mmfg"),r=e("6+Rh"),i=!1;var n=function(t){i||e("XXnI")},o=e("VU/8")(s.a,r.a,!1,n,"data-v-f897c560",null);o.options.__file="pages/riders/details/_id.vue",a.default=o.exports},AENo:function(t,a,e){"use strict";var s=e("KGrq"),r=e("1Kzm"),i=e("VU/8")(s.a,r.a,!1,null,null,null);i.options.__file="components/Map.vue",a.a=i.exports},KGrq:function(t,a,e){"use strict";a.a={props:["center","zoom"],data:function(){return{map:null}},mounted:function(){this.map=new window.google.maps.Map(this.$refs.map,{center:this.center,zoom:this.zoom})}}},Tv5t:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"@media only screen and (min-width:1366px){li.box-deco-bg[data-v-f897c560]:hover{background:#228b22}li.box-deco-bg:hover h3[data-v-f897c560],li.box-deco-bg:hover p[data-v-f897c560],li.box-deco-bg:hover p span[data-v-f897c560]{color:#fff!important}.flex-width-1-2wgr>[data-v-f897c560]{width:48%;margin-left:0}.flex-width-1-2wgr>[data-v-f897c560] :nth-child(2){width:48%;margin-right:0}.user-details[data-v-f897c560],.user[data-v-f897c560]{padding:.75rem 2rem!important}img[data-v-f897c560]{margin:0 auto}.user-details span[data-v-f897c560]{font-size:14px}}",""])},XXnI:function(t,a,e){var s=e("Tv5t");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("d1af135e",s,!1,{sourceMap:!1})},mmfg:function(t,a,e){"use strict";(function(t){e("2we2");var s=e("AENo"),r=e("tXAD");a.a={components:{MapMarker:r.a,Map:s.a},layout:"main",computed:{track:{set:function(t){null==t&&(this.position=branchLocation),this.position=t},get:function(){return null==this.position?this.branchLocation:this.position}},engaged:function(){var t=this.riderData.orderdetails.length;if(t>0){var a=this.riderData.orderdetails[t-1].orderstatus;return"completed"!=a&&"canceled"!=a}return!1},status:function(){var t=this.riderData.orderdetails.length;return t>0?this.riderData.orderdetails[t-1].orderstatus:"not Engaged"},rider:function(){return this.$store.getters["riders/getRider"]}},data:function(){return{formData:{merchID:"",riderID:"",paymentmethod:"",amount:"",paymenttype:"",paymentdate:""},amount:"",errorData:!1,t:{},rate:2,photo:"",loading:!0,riderData:{},zoom:10,branches:[],branchLocation:{},position:null,orderDetailsData:{items:[],tax:0,orderid:"",orderstatus:"",customername:"",customerphone:"",deliveryaddress:"",profilelink:"",deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:""},staff:{photo:"",name:"",phone:""}}}},methods:{listenOnMap:function(){this.riderData.orderdetails.length;null!=this.riderData.latitude&&this.riderData.longitude?(this.track={lat:Number(this.riderData.latitude),lng:Number(this.riderData.longitude)},this.zoom=15):this.track=this.branchLocation},setRiderData:function(){this.riderData=JSON.parse(localStorage.getItem("driver"));var t=this;this.photo=null!=this.riderData.riderphoto?this.riderData.riderphoto:"N/A";var a=this.branches.find(function(a){return t.riderData.branchID===a.id});this.branchLocation={lat:Number(null!=a.latitude?a.latitude:""),lng:Number(null!=a.longitude?a.longitude:"")},this.listenOnMap(),this.loading=!1},riderCash:function(){t("#rider-cash").addClass("uk-open").show()},closeRiderCash:function(){this.amount="",this.errorData=!1,t("#rider-cash").removeClass("uk-open").hide()},riderAmount:function(){t("#rider-amount").addClass("uk-open").show()},closeRiderAmount:function(){this.amount="",this.errorData=!1,t("#rider-amount").removeClass("uk-open").hide()},clearOrderDetails:function(){this.orderDetailsData={items:[],orderid:"",orderstatus:"",tax:0,customername:"",customerphone:"",deliveryaddress:"",profilelink:"",deliverycharge:0,rider:{id:"",phone:"",name:"",regnumber:""},staff:{photo:"",name:"",phone:""}}},calculateSubTotal:function(t){var a=0;return t.forEach(function(t,e,s){a+=t.totalprice}),a},calculateTotal:function(t){var a=0;t.forEach(function(t,e,s){a+=t.totalprice});var e=0;return this.orderDetailsData.tax>0&&(e=this.orderDetailsData.tax/100*a),+a+ +e+ +this.orderDetailsData.deliverycharge},formatInput:function(){if(""!=this.amount){var t=this.amount.replace(/,/g,"");this.formData.amount=Number(t),"."==t.substr(t.length-1)?this.amount=t:isNaN(t)?this.amount="":this.amount=parseFloat(this.amount.replace(/,/g,"")).toLocaleString()}else"NaN"==this.amount&&(this.amount=0)},makeRiderPayment:function(a){var e=this;""!=this.amount?(this.formatInput(),this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.formData.paymentdate=this.$moment(new Date).format("YYYY-MM-DD"),this.formData.riderID=this.rider.id,"ridercashremittance"==a?(this.formData.paymentmethod="cashpayment",this.formData.paymenttype="debit",t("#createBtn").attr("disabled",!0).html("Submitting....please wait")):(this.formData.paymentmethod="riderpayment",this.formData.paymenttype="credit",t("#amountBtn").attr("disabled",!0).html("Submitting....please wait")),this.$store.dispatch("riders/riderPayment",this.formData).then(function(s){if("ridercashremittance"==a?t("#createBtn").attr("disabled",!1).html("Submit"):t("#amountBtn").attr("disabled",!1).html("Submit"),s.data.status)return e.$toast.success(s.data.message),"ridercashremittance"==a?e.closeRiderCash():e.closeRiderAmount(),void(e.amount="");e.$toast.error(s.data.message)}).catch(function(e){"ridercashremittance"==a?t("#createBtn").attr("disabled",!1).html("Submit"):t("#amountBtn").attr("disabled",!1).html("Submit"),console.log(e)})):this.errorData=!0}},mounted:function(){this.branches=JSON.parse(localStorage.getItem("branches")),this.setRiderData()},beforeRouteEnter:function(t,a,e){var s=JSON.parse(localStorage.getItem("user"));void 0==s.role||s.rolepermission&&s.rolepermission[0].riders.viewriders?e():(alert("You have not been permitted to view this page"),e({path:"/dashboard"}))}}}).call(a,e("7t+N"))},tXAD:function(t,a,e){"use strict";var s=e("4adl"),r=e("VU/8")(s.a,null,!1,null,null,null);r.options.__file="components/MapMarker.vue",a.a=r.exports}});