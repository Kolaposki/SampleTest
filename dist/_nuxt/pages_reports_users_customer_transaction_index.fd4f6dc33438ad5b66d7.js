webpackJsonp([66],{aN6W:function(t,a,s){"use strict";(function(t){a.a={layout:"main",computed:{history:function(){return JSON.parse(localStorage.getItem("orderHistory"))},filteredList:function(){var t=this;return this.orderHistories.filter(function(a){return a.firstname.toLowerCase().includes(t.search.toLowerCase())?a.firstname.toLowerCase().includes(t.search.toLowerCase()):a.lastname.toLowerCase().includes(t.search.toLowerCase())?a.lastname.toLowerCase().includes(t.search.toLowerCase()):a.branchname.toLowerCase().includes(t.search.toLowerCase())})},json_fields:function(){var t=this;this.$moment;return{"CUSTOMER NAME":{callback:function(t){return t.firstname+" "+t.lastname}},CONTACT:"phonenumber",BRANCH:{callback:function(t){return t.branchname+", "+t.branchcity}},"ORDER ID":"ordercode",AMOUNT:{field:"order_total",callback:function(a){return t.formatPrice(a)}},STATUS:{field:"orderstatus",callback:function(a){return t.formatPrice(a).replace("_"," ")}},"ORDER TIME":{field:"created_at",callback:function(a){return t.$moment(a).format("Do MMMM, YYYY")}}}}},data:function(){return{search:"",loading:!0,histories:[],orderHistories:[],orderDetailsData:{items:[],tax:0,orderid:"",orderstatus:"",customername:"",customerphone:"",deliveryaddress:"",deliverycharge:0,profilelink:"",rider:{id:"",phone:"",name:"",regnumber:""},staff:{photo:"",name:"",phone:""}}}},methods:{formatNumber:function(t){return(new Intl.NumberFormat).format(t)},getOrderHistory:function(){this.histories=this.history,this.orderHistories=this.history.customeorderhistory,this.loading=!1},orderDetails:function(a){this.clearOrderDetails(),this.orderDetailsData={items:a.orderitems,orderid:a.ordercode,tax:0,orderstatus:a.orderstatus.replace("_"," "),customername:a.firstname+" "+a.lastname,customerphone:a.username,deliveryaddress:a.address,deliverycharge:a.deliverycharge,profilelink:a.profilelink,rider:{id:a.riderID,name:a.riderfirstname+" "+a.riderlastname,phone:a.riderphonenumber,regnumber:a.registrationnumber},staff:{name:a.staffname,photo:a.staffpic}},t("#order-details").addClass("uk-open").show()},clearOrderDetails:function(){this.orderDetailsData={items:[],orderid:"",orderstatus:"",tax:0,customername:"",customerphone:"",deliveryaddress:"",deliverycharge:0,profilelink:"",rider:{id:"",phone:"",name:"",regnumber:""},staff:{photo:"",name:"",phone:""}}},calculateSubTotal:function(t){var a=0;return t.forEach(function(t,s,e){a+=t.totalprice}),a},calculateTotal:function(t){var a=0;t.forEach(function(t,s,e){a+=t.totalprice});var s=0;return this.orderDetailsData.tax>0&&(s=this.orderDetailsData.tax/100*a),+a+ +s+ +this.orderDetailsData.deliverycharge},closeOrderDetails:function(){this.clearOrderDetails(),t("#order-details").removeClass("uk-open").hide()},viewCustomerDetails:function(t){localStorage.removeItem("customer"),this.$store.dispatch("customers/setCustomer",t),this.$router.push("/customers/details/"+t.id)}},mounted:function(){this.getOrderHistory()}}}).call(a,s("7t+N"))},fJru:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("overlay-scrollbars",{staticClass:"main-content-wrap"},[s("div",{staticClass:"d-flx-alc-jsb page-extras"},[s("a",{staticClass:"text-link",on:{click:function(a){return t.viewCustomerDetails(t.histories)}}},[s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#back"}})]),s("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("Back")])]),t._v(" |\n      "),s("span",{staticClass:"ml-1 fw-bold co-grey"},[t._v("\n        "+t._s(t.histories.firstname)+" "+t._s(t.histories.lastname)+"'s Order History\n      ")]),s("div",{staticClass:"search-filter d-flx-alc-jfe"},[s("label",{staticClass:"search-w-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#search"}})])]),s("download-excel",{staticClass:"btn btn--primary",attrs:{id:"download",data:t.filteredList,fields:t.json_fields,"before-generate":t.startDownload,"before-finish":t.finishDownload,worksheet:"My Worksheet",name:t.histories.firstname+"-"+t.histories.lastname+"-customer-report.xls"}},[t._v("\n          Export\n        ")])],1)]),s("div",{staticClass:"inner-main-wrapper"},[s("overlay-scrollbars",{staticClass:"table-wrapper"},[s("figcaption",{staticClass:"sr"},[t._v("\n          A table showing information of categories\n        ")]),s("table",{staticClass:"table-content "},[s("thead",{},[s("tr",[s("th",{staticClass:"large-space"},[t._v("Customer")]),s("th",{staticClass:"large-space"},[t._v("Mobile")]),s("th",{staticClass:"medium-space"},[t._v("Order ID")]),s("th",{staticClass:"small-space"},[t._v("Amount(₦)")]),s("th",{staticClass:"large-space"},[t._v("Branch")]),s("th",{staticClass:"small-space"},[t._v("Status")]),s("th",{staticClass:"medium-space"},[t._v("Order Time")])])]),s("tbody",{staticClass:"tablebody"},[t.loading?s("tr",[s("td",{attrs:{colspan:"9"}},[t._v("Loading...please wait")])]):t._e(),!t.loading&&t.filteredList.length<1?s("tr",[s("td",{attrs:{colspan:"9"}},[t._v("No record at the moment")])]):t._e(),t._l(t.filteredList,function(a,e){return!t.loading&&t.filteredList.length>0?s("tr",{key:e,on:{click:function(s){return t.orderDetails(a)}}},[s("td",[t._v("\n                "+t._s(a.firstname)+" "+t._s(a.lastname)+"\n              ")]),s("td",[t._v(t._s(a.phonenumber))]),s("td",{staticStyle:{color:"#28A745"}},[t._v(t._s(a.ordercode))]),s("td",[t._v(t._s(t.formatPrice(a.ordertotal)))]),s("td",[t._v(t._s(a.branchname)+","+t._s(a.branchcity))]),s("td",{staticClass:"tx-c"},[s("span",{class:"status "+a.orderstatus.toLowerCase()},[t._v(t._s(a.orderstatus.replace("_"," ")))])]),s("td",[t._v(t._s(t.$moment(a.created_at).format("Do MMMM, YYYY")))])]):t._e()})],2)])]),s("div",{attrs:{id:"order-details","uk-modal":""}},[s("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal"},[s("button",{staticClass:"uk-modal-close-default",attrs:{type:"button"},on:{click:t.closeOrderDetails}},[t._v("X")]),s("div",{staticClass:"modal-header"},[s("h2",[t._v("\n              Order Details\n              "),s("span",{class:"status "+t.orderDetailsData.orderstatus.toLowerCase()},[t._v(t._s(t.orderDetailsData.orderstatus.replace("_"," ")))])]),s("p",{staticClass:"d-flx"},[s("span",{staticClass:"review"},[t._v(t._s(t.orderDetailsData.orderid))])])]),s("div",{staticClass:"modal-body",attrs:{"uk-overflow-auto":""}},[s("div",{staticClass:"d-flx-jsb"},[s("div",{staticClass:"text-img order-modal"},[""===t.orderDetailsData.profilelink||null===t.orderDetailsData.profilelink||"http://68.65.121.57:8080/"===t.orderDetailsData.profilelink?s("img",{staticClass:"text-img__img",attrs:{src:"/default_image.png",alt:""}}):t.orderDetailsData.profilelink.includes("http://")&&t.orderDetailsData.profilelink.includes("https://")?s("img",{staticClass:"text-img__img",attrs:{src:t.orderDetailsData.profilelink.replace("http://68.65.121.57:8080/",""),alt:""}}):s("img",{staticClass:"text-img__img",attrs:{src:t.orderDetailsData.profilelink,alt:""}}),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"uppercase co-grey fw-medium font-14"},[t._v("\n                    Customer info\n                  ")]),s("p",{staticClass:"fw-medium font-16 co-rich-black"},[t._v(t._s(t.orderDetailsData.customername))]),s("p",{staticClass:"font-16 co-rich-black"},[t._v(t._s(t.orderDetailsData.customerphone))])])]),s("div",[s("h4",{staticClass:"uppercase co-grey fw-medium font-14"},[t._v("\n                  Delivery address\n                ")]),s("p",{staticClass:"width-80-pc co-rich-black"},[t._v("\n                  "+t._s(t.orderDetailsData.deliveryaddress)+"\n                ")])])]),s("table",{staticClass:"table-content order-list"},[s("tbody",{staticClass:"tablebody"},[t._l(t.orderDetailsData.items,function(a){return s("tr",{key:a.id},[s("td",[s("div",{staticClass:"text-img alt"},[s("img",{staticClass:"text-img__img",attrs:{src:a.photo,alt:""}}),s("div",{staticClass:"text-img__content"},[s("h3",{staticClass:"fw-medium"},[t._v("\n                        "+t._s(a.productname)+"\n                      ")]),s("p",[t._v("₦ "+t._s(t.formatPrice(a.unitprice)))])])])]),s("td",[s("span",{staticClass:"quantity"},[t._v(t._s(a.quantity))])]),s("td",[t._v(" ₦ "+t._s(t.formatPrice(a.totalprice)))])])}),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"co-lgray tx-r font-16",attrs:{colspan:"2"}},[t._v("Sub total")]),s("td",{staticClass:"fw-medium co-lgray"},[t._v("₦ "+t._s(t.formatPrice(t.calculateSubTotal(t.orderDetailsData.items))))])]),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"co-lgray tx-r font-16",attrs:{colspan:"2"}},[t._v("Delivery Fee")]),s("td",{staticClass:"fw-medium co-lgray"},[t._v("₦ "+t._s(t.formatPrice(t.orderDetailsData.deliverycharge)))])]),s("tr",{staticClass:"no-border-bottom"},[s("td",{staticClass:"font-20 fw-bold tx-r",attrs:{colspan:"2"}},[t._v("Total")]),s("td",{staticClass:"font-20 fw-bold"},[t._v("₦ "+t._s(t.formatPrice(t.calculateTotal(t.orderDetailsData.items))))])])],2)]),s("div",{staticClass:"flex-width-1-2-nr mt-1"},[s("div",[s("h3",{staticClass:"mb-2 big-text"},[t._v("Assigned Rider")]),null!==t.orderDetailsData.rider.id?s("div",{staticClass:"text-img order-modal"},[s("div",{staticClass:"img-wrap"},[""===t.orderDetailsData.rider.photo||null===t.orderDetailsData.rider.photo?s("img",{staticClass:"text-img__img round",attrs:{src:"/default_image.png",alt:""}}):s("img",{staticClass:"text-img__img round",attrs:{src:t.orderDetailsData.rider.photo,alt:""}}),s("p",{staticClass:"rating"},[s("span",[t._v("0")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#star"}})])])]),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("\n                      "+t._s(t.orderDetailsData.rider.name)+"\n                    ")]),s("p",[t._v(t._s(t.orderDetailsData.rider.phone))]),s("p",[t._v(t._s(t.orderDetailsData.rider.regnumber))])])]):s("div",{staticClass:"text-img order-modal"},[s("div",{staticClass:"img-wrap"},[s("img",{staticClass:"text-img__img round",attrs:{src:"/default_image.png",alt:""}}),s("p",{staticClass:"rating"},[s("span",[t._v("0")]),s("svg",[s("use",{attrs:{href:"/uploads/icons.svg#star"}})])])]),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("No rider assigned")])])])]),s("div",[s("h3",{staticClass:"mb-2 big-text"},[t._v("Responding Staff")]),""!==t.orderDetailsData.staff.name?s("div",{staticClass:"text-img order-modal"},[""===t.orderDetailsData.staff.photo?s("img",{staticClass:"text-img__img round",attrs:{src:"/default_image.png",alt:""}}):s("img",{staticClass:"text-img__img round",attrs:{src:t.orderDetailsData.staff.photo,alt:""}}),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("\n                      Staff Info\n                    ")]),s("p",[t._v(t._s(t.orderDetailsData.staff.phone))]),s("p",[t._v(t._s(t.orderDetailsData.staff.name))])])]):s("div",{staticClass:"text-img order-modal"},[s("img",{staticClass:"text-img__img round",attrs:{src:"/default_image.png",alt:""}}),s("div",{staticClass:"text-img__content"},[s("h4",{staticClass:"name"},[t._v("\n                      No staff info\n                    ")])])])])])])])])],1)])};e._withStripped=!0;var r={render:e,staticRenderFns:[]};a.a=r},"ri/A":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("aN6W"),r=s("fJru"),i=s("VU/8")(e.a,r.a,!1,null,null,null);i.options.__file="pages/reports/users/customer/transaction/index.vue",a.default=i.exports}});