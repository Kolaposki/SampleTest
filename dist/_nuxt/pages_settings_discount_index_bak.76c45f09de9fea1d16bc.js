webpackJsonp([46],{LpA8:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("overlay-scrollbars",{staticClass:"main-content-wrap"},[e("overlay-scrollbars",{staticClass:"page-extras d-flx-alc-jsb settings-extra"},[e("div",{staticClass:"links-wrap"},[t.isSupervisor?t._e():e("nuxt-link",{staticClass:"active",attrs:{to:"/settings"}},[t._v("Basic details")]),t.user.rolepermission&&t.user.rolepermission[0].settings.viewcontactdetails||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/contact-details"}},[t._v("Contact Details")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewchangepassword||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/change-password"}},[t._v("Change Password")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].tax.viewtax||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/tax"}},[t._v("Tax")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].discounts.viewdiscount||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/discount"}},[t._v("Discount")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewroles||t.isMerchant?e("nuxt-link",{attrs:{to:"/settings/roles"}},[t._v("Roles & Permissions")]):t._e()],1)]),e("div",{attrs:{id:"discount-fee","uk-modal":"",container:"#parent-component","data-uk-modal":"{target:'#discount-fee',bgclose:false}"}},[e("div",{staticClass:"uk-modal-dialog uk-margin-auto-vertical modal large-modal"},[e("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),e("div",{staticClass:"modal-header"},[e("h2",[t._v("Discount")]),e("p",[t._v("View a list of all your Discount and update them as necessary")])]),e("overlay-scrollbars",{staticClass:"modal-body"},[e("table",{staticClass:"table-content"},[e("thead",{},[e("tr",[e("th",{},[t._v("Minimum Qty")]),e("th",{},[t._v("Maximum Qty")]),e("th",{},[t._v("Discount")]),e("th",[t._v("Action")])])])])])],1)]),e("div",{staticClass:"inner-main-wrapper"},[e("div",{staticClass:"d-flx-alc-jsb table-title"},[e("h3",{staticClass:"section-title"},[t._v("Add discount")]),e("div",{staticClass:"search-filter d-flx-alc-jfe"},[e("div",[e("button",{staticClass:"btn btn--primary",attrs:{type:"button",id:"viewDiscountBtn"},on:{click:function(s){return t.viewDiscount()}}},[t._v("View Discount")])])])]),e("overlay-scrollbar",{staticClass:"table-wrapper no-deco"},[e("form",{staticClass:"mt-2"},[t._l(t.discountdata.discountfee,function(s,i){return e("div",{key:i},[e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Minimum Qty")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.minorder,expression:"input.minorder"}],attrs:{type:"number"},domProps:{value:s.minorder},on:{input:function(e){e.target.composing||t.$set(s,"minorder",e.target.value)}}})])])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v(" Maximum Qty")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.maxorder,expression:"input.maxorder"}],attrs:{type:"number"},domProps:{value:s.maxorder},on:{input:function(e){e.target.composing||t.$set(s,"maxorder",e.target.value)}}})])])]),e("div",{staticClass:"flex-width-1-2 less-gp"},[e("label",{staticClass:"form-input"},[e("span",{staticClass:"form-input__label"},[t._v("Discounted Amount")]),e("div",{staticClass:"form-input__input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.discountedamount,expression:"input.discountedamount"}],attrs:{type:"number"},domProps:{value:s.discountedamount},on:{input:function(e){e.target.composing||t.$set(s,"discountedamount",e.target.value)}}})])])]),e("button",{directives:[{name:"show",rawName:"v-show",value:i==t.discountdata.discountfee.length-1,expression:"i == discountdata.discountfee.length-1"}],staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:function(s){return t.addNew(i)}}},[t._v("\n          +\n          ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:i||!i&&t.discountdata.discountfee.length>1,expression:"i || ( !i && discountdata.discountfee.length > 1)"}],staticClass:"btn btn--primary",attrs:{type:"button"},on:{click:function(s){return t.remove(i)}}},[t._v("-")])])}),e("div",{staticClass:"d-flx-alc-jfe mt-5"},[e("button",{staticClass:"btn btn-no-fill",attrs:{type:"button",id:"cancelBtn"}},[t._v("\n              Cancel\n            ")]),e("button",{staticClass:"btn btn--primary ml-1",attrs:{id:"submitBtn",type:"submit"},on:{click:function(s){return t.creatDiscount()}}},[t._v("\n              + Create Discount\n            ")])])],2)])],1)],1)};i._withStripped=!0;var n={render:i,staticRenderFns:[]};s.a=n},byq7:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("yNE8"),n=e("LpA8"),a=!1;var o=function(t){a||e("hQXF")},r=e("VU/8")(i.a,n.a,!1,o,null,null);r.options.__file="pages/settings/discount/index_bak.vue",s.default=r.exports},hQXF:function(t,s,e){var i=e("kKyP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("11450a01",i,!1,{sourceMap:!1})},kKyP:function(t,s,e){(t.exports=e("FZ+f")(!1)).push([t.i,"button{font-size:medium}",""])},yNE8:function(t,s,e){"use strict";(function(t){s.a={layout:"main",data:function(){return{newID:0,discountdata:{discountfee:[{minorder:"",maxorder:"",discountedamount:"",merchID:""}]}}},computed:{isCourierService:function(){return this.user.businessdescription.toLowerCase().includes("delivery")}},methods:{creatDiscount:function(){var s=this;t("#submitBtn").attr("disabled",!0).html("Creating...please wait"),this.$store.dispatch("branches/saveDiscountFee",this.discountdata).then(function(e){console.log(e),t("#submitBtn").attr("disabled",!1).html("+ Create Discount fee(s)"),s.$toast.success(e.data.message)}).catch(function(s){t("#submitBtn").attr("disabled",!1).html("+ Create Discount fee(s)"),console.log(s)})},addNew:function(){var t={minorder:"",maxorder:"",discountedamount:"",merchID:this.newID};this.discountdata.discountfee.push(t)},remove:function(t){this.discountdata.discountfee.splice(t,1)},viewDiscount:function(){var s=this;t("#viewDiscountBtn").attr("disabled",!0).html("Retrieving...please wait"),this.$store.dispatch("branches/getDiscountFee",this.discountdata).then(function(e){console.log(e),t("#viewDiscountBtn").attr("disabled",!1).html("View discount fees"),s.$toast.error("An error occurred while retrieving data")}).catch(function(e){t("#viewDiscountBtn").attr("disabled",!1).html("View discount fees"),s.$toast.error("An error occurred while retrieving data"),console.log(e)})}},mounted:function(){this.newID=this.user.role?this.user.merchID:this.user.id,this.discountdata.discountfee[0].merchID=this.user.role?this.user.merchID:this.user.id}}}).call(s,e("7t+N"))}});