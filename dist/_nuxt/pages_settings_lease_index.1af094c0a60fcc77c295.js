webpackJsonp([44],{"2Ca3":function(t,e,a){var s=a("h8N+");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("7c2ba132",s,!1,{sourceMap:!1})},"dj+u":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("kw+U"),i=a("sOpt"),r=!1;var n=function(t){r||a("2Ca3")},o=a("VU/8")(s.a,i.a,!1,n,"data-v-3cec5f2c",null);o.options.__file="pages/settings/lease/index.vue",e.default=o.exports},"h8N+":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"h2[data-v-3cec5f2c]{font-weight:600;color:#2f4f4f}.tab[data-v-3cec5f2c]{overflow:hidden;border:.5px solid #eee;background-color:#fff;margin-left:0}button.tab[data-v-3cec5f2c]{background-color:inherit;float:left;border:1px solid #228b22;outline:none;cursor:pointer;padding:18px 32px;font-weight:600;margin-left:0}button.tab[data-v-3cec5f2c]:hover{background-color:#f8f8f8;color:#228b22;font-weight:600}.tab button.click[data-v-3cec5f2c]{min-width:10px!important;height:50px;margin-top:10px}.tab button.click[data-v-3cec5f2c]:hover{background:#228b22;color:#fff}button.tab.active[data-v-3cec5f2c]{color:#fff;background-color:#228b22}",""])},"kw+U":function(t,e,a){"use strict";(function(t){e.a={layout:"main",data:function(){return{options:[{id:"",text:"Select Riders"}],settings:{width:"100%"},formData:{merchID:"",riderID:"",leaseamount:"",leaseduration:"",leasestartdate:""},leaseamount:"",errorData:{riderID:!1,leaseamount:!1,leaseduration:!1},remitData:{riderID:"",remittanceamount:"",merchID:""},remittanceamount:"",riderslist:[],tabs:["Lease Payment","Rider's remittance"],selectedTab:"Lease Payment",showLeasePayment:!0,showRemittance:!1}},computed:{},methods:{formatInput:function(){if(""!=this.leaseamount){var t=this.leaseamount.replace(/,/g,"");this.formData.leaseamount=Number(t),"."==t.substr(t.length-1)?this.leaseamount=t:isNaN(t)?this.leaseamount="":this.leaseamount=parseFloat(this.leaseamount.replace(/,/g,"")).toLocaleString()}else"NaN"==this.leaseamount&&(this.leaseamount=0)},formatRiderInput:function(){if(""!=this.remittanceamount){var t=this.remittanceamount.replace(/,/g,"");this.remitData.remittanceamount=Number(t),"."==t.substr(t.length-1)?this.remittanceamount=t:isNaN(t)?this.remittanceamount="":this.remittanceamount=parseFloat(this.remittanceamount.replace(/,/g,"")).toLocaleString()}else"NaN"==this.remittanceamount&&(this.remittanceamount=0)},createLease:function(){var e=this;this.formData.leasestartdate=this.$moment(new Date).format("YYYY-MM-DD"),t("#leaseBtn").attr("disabled",!0).html("Submitting....please wait"),this.$store.dispatch("settings/leasePayment",this.formData).then(function(a){if(t("#leaseBtn").attr("disabled",!1).html("Submit"),a.data.status)return e.$toast.success("Lease Payment is captured!"),e.leaseamount="",e.formData.riderID="",void(e.formData.leaseduration="");e.$toast.error(a.data.message)}).catch(function(e){t("#leaseBtn").attr("disabled",!1).html("Submit"),console.log(e)})},validateData:function(){return this.clearError(),""===this.formData.riderID?(this.errorData.riderID=!0,!0):""===this.leaseamount?(this.errorData.leaseamount=!0,!0):""===this.formData.leaseduration?(this.errorData.leaseduration=!0,!0):void 0},clearError:function(){this.errorData={riderID:!1,leaseamount:!1,leaseduration:!1}},riderRemittance:function(){var e=this;t("#remitBtn").attr("disabled",!0).html("Submitting....please wait"),this.$store.dispatch("settings/riderWeeklyRemittance",this.remitData).then(function(a){if(t("#remitBtn").attr("disabled",!1).html("Submit"),a.data.status)return e.$toast.success("Rider's weekly remittance is captured!"),e.remitData.riderID="",void(e.remittanceamount="");e.$toast.error(a.data.message)}).catch(function(e){t("#leaseBtn").attr("disabled",!1).html("Submit"),console.log(e)})},getRiders:function(){var t=this;this.$store.dispatch("riders/listRidersExport",this.formData.merchID).then(function(e){e.data.status&&t.setRiders(e.data.data)}).catch(function(t){console.log(t)})},setRiders:function(t){var e=this;t.forEach(function(t){var a={id:t.id,text:t.riderfirstname+" "+t.riderlastname};e.riderslist.push(a),e.options.push(a)})},setTab:function(t){this.selectedTab=t,"Lease Payment"==t?(this.showLeasePayment=!0,this.showRemittance=!1):(this.showLeasePayment=!1,this.showRemittance=!0)}},beforeRouteEnter:function(t,e,a){var s=JSON.parse(localStorage.getItem("user"));void 0==s.role||s.rolepermission&&s.rolepermission[0].settings.viewlease?a():(alert("You have not been permitted to view this page"),a({path:"/dashboard"}))},mounted:function(){this.formData.merchID=this.user.role?this.user.merchID:this.user.id,this.remitData.merchID=this.user.role?this.user.merchID:this.user.id,this.getRiders()}}}).call(e,a("7t+N"))},sOpt:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("overlay-scrollbars",{staticClass:"main-content-wrap"},[a("overlay-scrollbars",{staticClass:"page-extras d-flx-alc-jsb settings-extra"},[a("div",{staticClass:"links-wrap"},[a("nuxt-link",{attrs:{to:"/settings"}},[t._v("Business Rules")]),t.user.rolepermission&&t.user.rolepermission[0].tax.viewtax||t.isMerchant?a("nuxt-link",{attrs:{to:"/settings/tax"}},[t._v("Tax")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].discounts.viewdiscount||t.isMerchant?a("nuxt-link",{attrs:{to:"/settings/discount"}},[t._v("Discount")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewroles||t.isMerchant?a("nuxt-link",{attrs:{to:"/settings/roles"}},[t._v("Roles & Permissions")]):t._e(),t.user.rolepermission&&t.user.rolepermission[0].settings.viewlease||t.isMerchant?a("nuxt-link",{staticClass:"active",attrs:{to:"/settings/lease"}},[t._v("Lease")]):t._e()],1)]),a("div",{staticClass:" ",staticStyle:{display:"flex","margin-left":"30px","margin-top":"10px"}},t._l(t.tabs,function(e,s){return a("button",{key:s,staticClass:"tab",class:t.selectedTab==e?"active":"",on:{click:function(a){return t.setTab(e)}}},[t._v(" "+t._s(e))])}),0),a("div",{staticClass:"inner-main-wrapper"},[a("div",{staticClass:"py-3 px-0"},[t.showLeasePayment?a("section",{staticClass:"setting-section"},[a("div",{staticClass:"setting-section-title"},[a("h2",[t._v("Lease Payment Form")])]),a("div",{staticClass:" r-width-500 py-2"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.createLease.apply(null,arguments)}}},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Rider")]),a("div",{staticClass:"form-input__input"},[a("select2",{attrs:{placeholder:"Select a rider",options:t.options,settings:t.settings,required:""},model:{value:t.formData.riderID,callback:function(e){t.$set(t.formData,"riderID",e)},expression:"formData.riderID"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errorData.riderID,expression:"errorData.riderID"}],staticClass:"form-input__error-msg"},[t._v("Select a rider")])]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Lease Initial Amount (₦) ")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.leaseamount,expression:"leaseamount"}],attrs:{type:"text",placeholder:"Enter Lease Initial Amount",required:""},domProps:{value:t.leaseamount},on:{keyup:t.formatInput,input:function(e){e.target.composing||(t.leaseamount=e.target.value)}}})]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errorData.leaseamount,expression:"errorData.leaseamount"}],staticClass:"form-input__error-msg"},[t._v("Lease amount is required")])]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Lease Duration(No of months)")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.leaseduration,expression:"formData.leaseduration"}],attrs:{type:"text",placeholder:"Enter Lease Duration in Months",required:""},domProps:{value:t.formData.leaseduration},on:{input:function(e){e.target.composing||t.$set(t.formData,"leaseduration",e.target.value)}}})]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errorData.leaseduration,expression:"errorData.leaseduration"}],staticClass:"form-input__error-msg"},[t._v("Lease duration is required")])]),a("button",{staticClass:"btn btn--primary mt-1",attrs:{type:"submit",id:"leaseBtn"}},[t._v("\n               Submit\n              ")])])])]):t._e(),t.showRemittance?a("section",{staticClass:"setting-section"},[a("div",{staticClass:"setting-section-title"},[a("h2",[t._v("Rider's Weekly Remittance Form")])]),a("div",{staticClass:" r-width-500 py-2"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.riderRemittance.apply(null,arguments)}}},[a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Rider")]),a("div",{staticClass:"form-input__input"},[a("select2",{attrs:{placeholder:"Select a rider",options:t.options,settings:t.settings,required:""},model:{value:t.remitData.riderID,callback:function(e){t.$set(t.remitData,"riderID",e)},expression:"remitData.riderID"}})],1)]),a("label",{staticClass:"form-input"},[a("span",{staticClass:"form-input__label"},[t._v("Actual Weekly Remittance (₦)")]),a("div",{staticClass:"form-input__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.remittanceamount,expression:"remittanceamount"}],attrs:{type:"text",placeholder:"Enter Amount",required:""},domProps:{value:t.remittanceamount},on:{keyup:t.formatRiderInput,input:function(e){e.target.composing||(t.remittanceamount=e.target.value)}}})])]),a("button",{staticClass:"btn btn--primary mt-1",attrs:{type:"submit",id:"remitBtn"}},[t._v("\n               Submit\n              ")])])])]):t._e()])])],1)};s._withStripped=!0;var i={render:s,staticRenderFns:[]};e.a=i}});